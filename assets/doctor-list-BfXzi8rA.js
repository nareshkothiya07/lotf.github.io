import{u as R,j as e,S as m,T as r,t as q,a as J,W as Q,r as n,v as $,c as E,i as X,R as Y,x as M,y as Z,z as ee,M as te,E as se,H as y,J as ae,q as S,P as oe,ax as re,K as ie,B as I,U as ne}from"./index-DSO9TgYq.js";import{d as le}from"./dayjs.min-pRfd56nx.js";import{C as ce}from"./ConfirmationDialog-DR_Ho8RD.js";import{u as de,a as me,d as ue}from"./doctor-Ca9o3VsJ.js";import{R as pe}from"./RenderGender-B7FOG7SF.js";import{F as ge}from"./FilterDialog-D5JU5uJB.js";import{D as he}from"./DebouncedInput-DhmfX_1V.js";import{R as fe}from"./RenderFilterKeys-DXC0MC7n.js";import{u as xe}from"./useFilterAndSearch-PJD0Zg8P.js";import{C as f}from"./CustomTypography-CRnDvUFn.js";import{u as je}from"./useStatusList-Dbp-x5Xm.js";import{E as Me}from"./EditStatusDialog-BIVGlZRP.js";import{F as ye}from"./FilterOutlined-DlgxAz6z.js";import{A as Se}from"./ArrowUpOutlined-C9GTlrEN.js";import"./Dialog-CPoUMqzk.js";import"./useGenderList-C-bU5Ya0.js";import"./doctor-9YdFtdUi.js";import"./regex-AjllrUCH.js";import"./specialty-CpBsygzZ.js";import"./handleScroll-BwFQoF1o.js";import"./GenericAutocomplete-D3M5FyqM.js";import"./Autocomplete-BOe_mB7V.js";import"./CloseOutlined-DRBnXhIJ.js";import"./RenderConsultationType-B0EO_Tu5.js";function Ce({open:c,handleClose:x,handleSubmit:C}){const o=R();return e.jsx(ce,{title:o.formatMessage({id:"doctor.delete.title"}),open:c,handleClose:x,handleSubmit:C,actionTitle:o.formatMessage({id:"common.delete"}),styles:{width:"600px"},children:e.jsxs(m,{spacing:1,children:[e.jsx(r,{children:o.formatMessage({id:"doctor.delete.subTitle"})}),e.jsx(r,{variant:"h4",children:o.formatMessage({id:"doctor.delete.appointmentTitle"})}),e.jsx(r,{children:o.formatMessage({id:"doctor.delete.appointmentSubtitle"})}),e.jsx(r,{variant:"h4",children:o.formatMessage({id:"doctor.delete.patientTitle"})}),e.jsx(r,{children:o.formatMessage({id:"doctor.delete.patientSubtitle"})}),e.jsx(r,{variant:"h4",children:o.formatMessage({id:"doctor.delete.historicTitle"})}),e.jsx(r,{children:o.formatMessage({id:"doctor.delete.historicSubtitle"})}),e.jsx(r,{children:o.formatMessage({id:"doctor.delete.confirmation"})})]})})}function be(c){return[{title:c.formatMessage({id:"sidebar.home"}),to:ne},{title:c.formatMessage({id:"sidebar.doctors"})}]}function Je(){const{lang:c}=q(),{data:x,error:C,isLoading:o,setFilterCriteria:A,url:u,setPagination:O,setSorting:k}=de(),w=J(),b=Q(),s=R(),[T,v]=n.useState(!1),[j,p]=n.useState(0),[l,g]=n.useState(null),P=$(w.breakpoints.down("sm")),{defaultList:K}=je(M.DOCTOR_STATUS),B=n.useCallback(t=>{b(`/doctor/${t}`)},[b]),_=n.useCallback(t=>{l&&me(l.id,u,{status:t}).then(()=>{E(s.formatMessage({id:"doctor.statusEditSuccess"})),g(null)}).catch(()=>{g(null)})},[l,s,u]),L=n.useCallback(async()=>{try{await ue(j,u).then(()=>{E(s.formatMessage({id:"doctor.delete.deleteSucess"})),p(0)})}catch{p(0)}},[j,u,s]),{filter:h,search:N,setSearch:H,onResetHandler:F,onRemoveFilterHandler:U,onFilterHandler:V}=xe();n.useEffect(()=>{A(h)},[h]);const z=n.useMemo(()=>[{header:s.formatMessage({id:"profile.id"}),accessorKey:"id",cell:({row:t})=>{var a;return(a=t.original)==null?void 0:a.id}},{header:s.formatMessage({id:"common.doctor"}),accessorKey:"name",enableSorting:!1,cell:({row:t})=>e.jsxs(m,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(X,{alt:"Avatar 1",size:"sm",src:t.original.photo}),e.jsx(f,{className:"typography-inline",value:t.original.name[c]})]})},{header:s.formatMessage({id:"common.specialty"}),accessorKey:"Specialty",enableSorting:!1,cell:({row:t})=>{var a,i;return e.jsx(f,{className:"typography-inline",value:(i=(a=t.original)==null?void 0:a.speciality)==null?void 0:i.speciality_name[c]})}},{header:s.formatMessage({id:"doctor.experience"}),accessorKey:"experience",cell:({row:t})=>{var a;return e.jsx(f,{className:"typography-inline",value:(a=t.original)==null?void 0:a.experience,renderFunction:i=>i+" "+s.formatMessage({id:"common.years"})})}},{header:s.formatMessage({id:"profile.gender"}),accessorKey:"gender",cell:({row:t})=>{var a;return e.jsx(f,{className:"typography-inline",value:(a=t.original)==null?void 0:a.gender,renderFunction:i=>e.jsx(pe,{gender:i})})}},{header:s.formatMessage({id:"common.status"}),accessorKey:"status",disableSortBy:!0,cell:t=>e.jsx(Y,{status:t.getValue(),referenceKey:M.DOCTOR_STATUS})},{header:s.formatMessage({id:"common.joinedon"}),accessorKey:"created_at",cell:({row:t})=>{var a;return le((a=t.original)==null?void 0:a.created_at).format(Z)}},{header:s.formatMessage({id:"common.actions"}),accessorKey:"Actions",meta:{className:"cell-center"},enableSorting:!1,cell:({row:t})=>{const[a,i]=n.useState(null),G=!!a,W=d=>{i(d.currentTarget)},D=()=>{i(null)};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{onClick:W,children:e.jsx(te,{})}),e.jsxs(se,{anchorEl:a,open:G,onClose:D,onClick:D,children:[e.jsx(y,{onClick:d=>{d.stopPropagation(),g(t.original)},children:e.jsx(r,{variant:"body1",children:s.formatMessage({id:"common.editStatus"})})}),e.jsx(y,{onClick:d=>{d.stopPropagation(),B(t.original.id)},children:e.jsx(r,{variant:"body1",children:s.formatMessage({id:"doctor.editProfile"})})}),e.jsx(y,{onClick:d=>{d.stopPropagation(),p(t.original.id)},children:e.jsx(r,{variant:"body1",children:s.formatMessage({id:"doctor.deleteDoctor"})})})]})]})}}],[]);return e.jsxs(e.Fragment,{children:[e.jsx(ae,{custom:!0,links:be(s)}),e.jsxs(m,{direction:"row",marginBottom:"20px",spacing:2,justifyContent:"space-between",alignItems:"center",children:[e.jsx(r,{variant:"h2",children:s.formatMessage({id:"sidebar.doctorList"})}),e.jsx(S,{variant:"contained",startIcon:e.jsx(oe,{}),component:re,to:"/doctor/create",children:s.formatMessage({id:"doctor.addDoctor"})})]}),e.jsxs(ie,{data:x,columns:z,isLoading:o,setPagination:t=>{O(t)},setSortingParams:t=>{k(t)},children:[e.jsxs(m,{direction:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",sx:{px:2,paddingTop:2,...P&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(I,{sx:{width:{xs:"70%",md:"70%"}},children:e.jsxs(m,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(he,{value:N,onFilterChange:t=>H(t),placeholder:s.formatMessage({id:"doctor.searchPlaceholder"})}),e.jsx(S,{variant:"contained",onClick:()=>v(!0),startIcon:e.jsx(ye,{}),children:s.formatMessage({id:"common.filter"})})]})}),e.jsx(m,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:e.jsx(m,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(S,{variant:"outlined",startIcon:e.jsx(Se,{}),children:s.formatMessage({id:"common.export"})})})})]}),e.jsx(I,{sx:{px:2,pt:2,pb:1},children:e.jsx(fe,{params:h,onClearFilter:F,onRemoveFilter:U,referenceKey:M.DOCTOR_STATUS})})]}),T&&e.jsx(ge,{open:T,isDoctorList:!0,initialValue:h,handleClose:()=>{v(!1)},setCriteria:V,resetFilter:F}),e.jsx(Ce,{open:!!j,handleSubmit:L,handleClose:()=>{p(0)}}),l&&e.jsx(Me,{title:s.formatMessage({id:"doctor.editTitle"}),open:!!l,statusList:K,status:l==null?void 0:l.status,handleSubmit:_,handleClose:()=>{g(null)}})]})}export{Je as default};
