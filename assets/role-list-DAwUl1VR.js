import{r,W as E,u as D,a as F,v as _,c as N,j as e,y as j,z as K,M as J,E as L,H as u,T as c,J as U,S as n,q as M,P as H,K as W,B as q,U as z}from"./index-DSO9TgYq.js";import{d as y}from"./dayjs.min-pRfd56nx.js";import{C}from"./CustomTypography-CRnDvUFn.js";import{D as G}from"./DebouncedInput-DhmfX_1V.js";import{u as Q,d as V}from"./role-NGsUuE4A.js";import{D as X}from"./DeleteConfirmation-BqFOMagf.js";import{u as Y}from"./useFilterAndSearch-PJD0Zg8P.js";import{A as Z}from"./ArrowUpOutlined-C9GTlrEN.js";import"./CloseOutlined-DRBnXhIJ.js";import"./ConfirmationDialog-DR_Ho8RD.js";import"./Dialog-CPoUMqzk.js";function $(i){return[{title:i.formatMessage({id:"sidebar.home"}),to:z},{title:i.formatMessage({id:"sidebar.roles"})}]}function me(){const{data:i,isLoading:S,setFilterCriteria:I,url:g,setPagination:b,setSorting:v}=Q(),[d,l]=r.useState(0),h=E(),t=D(),w=F(),R=_(w.breakpoints.down("sm")),{filter:p,search:P,setSearch:k}=Y();r.useEffect(()=>{I(p)},[p]);const m=r.useCallback(()=>{localStorage.removeItem("selectedRole"),h("/role/create")},[h]),O=r.useCallback(async()=>{try{await V(d,g).then(s=>{location.href="/role/list",N(t.formatMessage({id:"roles.deleteSucess"})),l(0)})}catch{l(0)}},[d,g,t]),A=r.useMemo(()=>[{header:t.formatMessage({id:"common.role"}),accessorKey:"name",cell:({row:s})=>e.jsx(C,{className:"typography-inline",value:s.original.name})},{header:t.formatMessage({id:"common.description"}),accessorKey:"description",enableSorting:!1,cell:({row:s})=>e.jsx(C,{className:"typography-inline",value:s.original.description})},{header:t.formatMessage({id:"common.createdOn"}),accessorKey:"created_at",cell:({row:s})=>{var a;return y((a=s.original)==null?void 0:a.created_at).format(j)}},{header:t.formatMessage({id:"common.updatedOn"}),accessorKey:"created_at",cell:({row:s})=>{var a;return y((a=s.original)==null?void 0:a.created_at).format(j)}},{header:t.formatMessage({id:"common.actions"}),accessorKey:"Actions",meta:{className:"cell-center"},enableSorting:!1,cell:({row:s})=>{const[a,x]=r.useState(null),T=!!a,B=o=>{x(o.currentTarget)},f=()=>{x(null)};return e.jsxs(e.Fragment,{children:[e.jsx(K,{onClick:B,children:e.jsx(J,{})}),e.jsxs(L,{anchorEl:a,open:T,onClose:f,onClick:f,children:[e.jsx(u,{onClick:o=>{o.stopPropagation(),m(),localStorage.setItem("selectedRole",JSON.stringify(s.original))},children:e.jsx(c,{variant:"body1",children:t.formatMessage({id:"roles.viewRole"})})}),e.jsx(u,{onClick:o=>{o.stopPropagation(),m(),localStorage.setItem("selectedRole",JSON.stringify(s.original))},children:e.jsx(c,{variant:"body1",children:t.formatMessage({id:"roles.editRole"})})}),e.jsx(u,{onClick:o=>{o.stopPropagation(),l(s.original.id)},children:e.jsx(c,{variant:"body1",children:t.formatMessage({id:"roles.deleteRole"})})})]})]})}}],[]);return e.jsxs(e.Fragment,{children:[e.jsx(U,{custom:!0,links:$(t)}),e.jsxs(n,{direction:"row",marginBottom:"20px",spacing:2,justifyContent:"space-between",alignItems:"center",children:[e.jsx(c,{variant:"h2",children:t.formatMessage({id:"sidebar.roles"})}),e.jsx(M,{variant:"contained",startIcon:e.jsx(H,{}),onClick:m,children:t.formatMessage({id:"roles.addNewRole"})})]}),e.jsx(W,{data:i,columns:A,isLoading:S,setPagination:s=>{b(s)},setSortingParams:s=>{v(s)},children:e.jsxs(n,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...R&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(q,{sx:{width:{xs:"70%",md:"70%"}},children:e.jsx(n,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(G,{value:P,onFilterChange:s=>k(s),placeholder:t.formatMessage({id:"roles.searchPlaceholder"})})})}),e.jsx(n,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:e.jsx(n,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(M,{variant:"outlined",startIcon:e.jsx(Z,{}),children:t.formatMessage({id:"common.export"})})})})]})}),e.jsx(X,{open:!!d,handleSubmit:O,handleClose:()=>{l(0)}})]})}export{me as default};
