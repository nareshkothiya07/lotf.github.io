import{t as V,u as Y,a as q,v as J,r as t,c as P,j as e,S as o,i as Q,T as u,R as W,x as I,y as X,z as Z,M as $,E as ee,H as S,J as se,q as E,K as ae,aL as te,B as ne,bK as b,U as re}from"./index-DSO9TgYq.js";import{d as ie}from"./dayjs.min-pRfd56nx.js";import{D as oe}from"./DebouncedInput-DhmfX_1V.js";import{C as j}from"./CustomTypography-CRnDvUFn.js";import{E as ce}from"./EditStatusDialog-BIVGlZRP.js";import{u as le}from"./useStatusList-Dbp-x5Xm.js";import{D as de}from"./DeleteConfirmation-BqFOMagf.js";import{u as ue}from"./useFilterAndSearch-PJD0Zg8P.js";import{u as me,d as ge,a as he}from"./service-packages-ClErv1Kx.js";import{P as pe}from"./PackageAddModal-Cz_1MXOB.js";import{f as fe}from"./services-DCcxZZqT.js";import{P as xe}from"./PlusOutlined-BQvVSxI0.js";import{A as Se}from"./ArrowUpOutlined-C9GTlrEN.js";import"./CloseOutlined-DRBnXhIJ.js";import"./ConfirmationDialog-DR_Ho8RD.js";import"./Dialog-CPoUMqzk.js";import"./CameraOutlined-D4Mj0cXe.js";import"./services-BGkrpTaC.js";function je(m){return[{title:m.formatMessage({id:"sidebar.home"}),to:re},{title:m.formatMessage({id:"services.physiotherapist.title"})}]}function He(){const{lang:m}=V(),{defaultList:k}=le(I.PACKAGE_STATUS),{data:A,error:ye,isLoading:T,setSorting:_,setFilterCriteria:B,setPagination:w,url:c}=me(b.PHYSIOTHERAPIST),a=Y(),K=q(),O=J(K.breakpoints.down("sm")),[y,x]=t.useState(!1),[r,g]=t.useState(null),[D,M]=t.useState(null),[h,p]=t.useState(0),[F,R]=t.useState(),{filter:v,search:H,setSearch:N}=ue(),L=()=>{M(null),x(!0)},U=t.useCallback(async()=>{try{await ge(h,c).then(s=>{P(a.formatMessage({id:"services.deletePackageSuccess"})),p(0)})}catch{p(0)}},[h,c,a]),G=t.useCallback(async s=>{try{he(r==null?void 0:r.id,{status:s},c).then(n=>{P(a.formatMessage({id:"services.statusEditSuccess"})),g(null)})}catch{g(null)}},[r,c,a]);t.useEffect(()=>{B(v)},[v]);const z=t.useMemo(()=>[{header:a.formatMessage({id:"services.packageName"}),accessorKey:"name",enableSorting:!1,cell:({row:s})=>e.jsxs(o,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(Q,{alt:"Avatar 1",size:"sm",src:s.original.image}),e.jsx(o,{spacing:0,children:e.jsx(u,{variant:"subtitle1",children:s.original.name[m]})})]})},{header:a.formatMessage({id:"services.physiotherapist.sessionNo"}),accessorKey:"sessions_number",enableSorting:!1,cell:({row:s})=>e.jsx(j,{className:"typography-inline",value:s.original.sessions_number})},{header:a.formatMessage({id:"services.medicalCenters"}),accessorKey:"hospitals_count",cell:({row:s})=>e.jsx(j,{className:"typography-inline",value:s.original.hospitals_count})},{header:a.formatMessage({id:"common.visits"}),accessorKey:"visits_count",disableSortBy:!0,cell:({row:s})=>e.jsx(j,{className:"typography-inline",value:s.original.visits_count})},{header:a.formatMessage({id:"common.status"}),accessorKey:"status",cell:({row:s})=>e.jsx(W,{status:s.original.status,referenceKey:I.PACKAGE_STATUS})},{header:a.formatMessage({id:"common.createdOn"}),accessorKey:"created_at",cell:({row:s})=>{var n;return ie((n=s.original)==null?void 0:n.created_at).format(X)}},{header:a.formatMessage({id:"common.actions"}),accessorKey:"Actions",meta:{className:"cell-center"},enableSorting:!1,cell:({row:s})=>{const[n,l]=t.useState(null),f=!!n,d=i=>{l(i.currentTarget)},C=()=>{l(null)};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{onClick:d,children:e.jsx($,{})}),e.jsxs(ee,{anchorEl:n,open:f,onClose:C,onClick:C,children:[e.jsx(S,{onClick:i=>{i.stopPropagation(),x(!0),M(s.original)},children:e.jsx(u,{variant:"body1",children:a.formatMessage({id:"services.editPackageInfo"})})}),e.jsx(S,{onClick:i=>{i.stopPropagation(),g(s.original)},children:e.jsx(u,{variant:"body1",children:a.formatMessage({id:"common.editStatus"})})}),e.jsx(S,{onClick:i=>{i.stopPropagation(),p(s.original.id)},children:e.jsx(u,{variant:"body1",children:a.formatMessage({id:"services.deletePackage"})})})]})]})}}],[]);return t.useEffect(()=>{fe().then(s=>{var l,f;const n=(f=(l=s==null?void 0:s.data)==null?void 0:l.data)==null?void 0:f.find(d=>(d==null?void 0:d.slug)==="physiotherapist");R(n==null?void 0:n.id)})},[]),e.jsxs(e.Fragment,{children:[e.jsx(se,{custom:!0,links:je(a)}),e.jsxs(o,{direction:"row",marginBottom:"20px",spacing:2,justifyContent:"space-between",alignItems:"center",children:[e.jsx(u,{variant:"h2",children:a.formatMessage({id:"services.physiotherapist.title"})}),e.jsx(E,{variant:"contained",startIcon:e.jsx(xe,{}),onClick:L,children:a.formatMessage({id:"services.physiotherapist.addServiceTitle"})})]}),e.jsx(ae,{data:A,columns:z,isLoading:T,setPagination:s=>{w(s)},setSortingParams:s=>{_(s)},children:e.jsx(te,{content:!1,children:e.jsxs(o,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...O&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(ne,{sx:{width:{xs:"70%",md:"70%"}},children:e.jsx(o,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(oe,{value:H,onFilterChange:s=>N(s),placeholder:a.formatMessage({id:"services.searchPackage"})})})}),e.jsx(o,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:e.jsx(o,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(E,{variant:"outlined",startIcon:e.jsx(Se,{}),children:a.formatMessage({id:"common.export"})})})})]})})}),y&&e.jsx(pe,{open:y,handleClose:()=>{x(!1)},url:c,subService:D,packageType:b.PHYSIOTHERAPIST,packageId:F}),!!h&&e.jsx(de,{open:!!h,handleSubmit:U,handleClose:()=>{p(0)}}),r&&e.jsx(ce,{title:a.formatMessage({id:"medicalCenter.editTitle"}),open:!!r,statusList:k,status:r==null?void 0:r.status,handleSubmit:G,handleClose:()=>{g(null)}})]})}export{He as default};
