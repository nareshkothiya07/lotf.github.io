import{ay as j,r as O}from"./index-DSO9TgYq.js";function it(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r}var z;(function(t){t.event="event",t.props="prop"})(z||(z={}));function M(){}function wt(t){var e,r=void 0;return function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return e&&a.length===e.length&&a.every(function(o,l){return o===e[l]})||(e=a,r=t.apply(void 0,a)),r}}function P(t){return!!(t||"").match(/\d/)}function W(t){return t==null}function bt(t){return typeof t=="number"&&isNaN(t)}function pt(t){return W(t)||bt(t)||typeof t=="number"&&!isFinite(t)}function At(t){var e=O.useRef(t);e.current=t;var r=O.useRef(function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return e.current.apply(e,a)});return r.current}function at(t,e){return Array(e+1).join(t)}function Et(t){var e=t+"",r=e[0]==="-"?"-":"";r&&(e=e.substring(1));var a=e.split(/[eE]/g),n=a[0],o=a[1];if(o=Number(o),!o)return r+n;n=n.replace(".","");var l=1+o,s=n.length;return l<0?n="0."+at("0",Math.abs(l))+n:l>=s?n=n+at("0",l-s):n=(n.substring(0,l)||"0")+"."+n.substring(l),r+n}function Z(t,e){if(t.value=t.value,t!==null){if(t.createTextRange){var r=t.createTextRange();return r.move("character",e),r.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}var xt=wt(function(t,e){for(var r=0,a=0,n=t.length,o=e.length;t[r]===e[r]&&r<n;)r++;for(;t[n-1-a]===e[o-1-a]&&o-a>r&&n-a>r;)a++;return{from:{start:r,end:n-a},to:{start:r,end:o-a}}}),Nt=function(t,e){var r=Math.min(t.selectionStart,e);return{from:{start:r,end:t.selectionEnd},to:{start:r,end:e}}};function Ot(t,e,r){return Math.min(Math.max(t,e),r)}function Y(t){return Math.max(t.selectionStart,t.selectionEnd)}function Ft(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Tt(t){return{from:{start:0,end:0},to:{start:0,end:t.length},lastValue:""}}function ut(t,e){return t===void 0&&(t=" "),typeof t=="string"?t:t[e]||" "}function Bt(t){var e=t.currentValue,r=t.formattedValue,a=t.currentValueIndex,n=t.formattedValueIndex;return e[a]===r[n]}function Rt(t,e,r,a,n,o,l){l===void 0&&(l=Bt);var s=n.findIndex(function(A){return A}),y=t.slice(0,s);!e&&!r.startsWith(y)&&(e=y,r=y+r,a=a+y.length);for(var V=r.length,w=t.length,E={},c=new Array(V),S=0;S<V;S++){c[S]=-1;for(var f=0,b=w;f<b;f++){var C=l({currentValue:r,lastValue:e,formattedValue:t,currentValueIndex:S,formattedValueIndex:f});if(C&&E[f]!==!0){c[S]=f,E[f]=!0;break}}}for(var d=a;d<V&&(c[d]===-1||!o(r[d]));)d++;var x=d===V||c[d]===-1?w:c[d];for(d=a-1;d>0&&c[d]===-1;)d--;var I=d===-1||c[d]===-1?0:c[d]+1;return I>x?x:a-I<x-a?I:x}function G(t,e,r,a){var n=t.length;if(e=Ot(e,0,n),a==="left"){for(;e>=0&&!r[e];)e--;e===-1&&(e=r.indexOf(!0))}else{for(;e<=n&&!r[e];)e++;e>n&&(e=r.lastIndexOf(!0))}return e===-1&&(e=n),e}function Mt(t){for(var e=Array.from({length:t.length+1}).map(function(){return!0}),r=0,a=e.length;r<a;r++)e[r]=!!(P(t[r])||P(t[r-1]));return e}function kt(t,e,r,a,n,o){o===void 0&&(o=M);var l=At(function(f,b){var C,d;return pt(f)?(d="",C=""):typeof f=="number"||b?(d=typeof f=="number"?Et(f):f,C=a(d)):(d=n(f,void 0),C=a(d)),{formattedValue:C,numAsString:d}}),s=O.useState(function(){return l(W(t)?e:t,r)}),y=s[0],V=s[1],w=function(f,b){f.formattedValue!==y.formattedValue&&V({formattedValue:f.formattedValue,numAsString:f.value}),o(f,b)},E=t,c=r;W(t)&&(E=y.numAsString,c=!0);var S=l(E,c);return O.useMemo(function(){V(S)},[S.formattedValue]),[y,w]}function _t(t){return t.replace(/[^0-9]/g,"")}function jt(t){return t}function Dt(t){var e=t.type;e===void 0&&(e="text");var r=t.displayType;r===void 0&&(r="input");var a=t.customInput,n=t.renderText,o=t.getInputRef,l=t.format;l===void 0&&(l=jt);var s=t.removeFormatting;s===void 0&&(s=_t);var y=t.defaultValue,V=t.valueIsNumericString,w=t.onValueChange,E=t.isAllowed,c=t.onChange;c===void 0&&(c=M);var S=t.onKeyDown;S===void 0&&(S=M);var f=t.onMouseUp;f===void 0&&(f=M);var b=t.onFocus;b===void 0&&(b=M);var C=t.onBlur;C===void 0&&(C=M);var d=t.value,x=t.getCaretBoundary;x===void 0&&(x=Mt);var I=t.isValidInputCharacter;I===void 0&&(I=P);var A=t.isCharacterSame,R=it(t,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),K=kt(d,y,!!V,l,s,w),tt=K[0],p=tt.formattedValue,U=tt.numAsString,ot=K[1],$=O.useRef(),q=O.useRef({formattedValue:p,numAsString:U}),et=function(i,u){q.current={formattedValue:i.formattedValue,numAsString:i.value},ot(i,u)},rt=O.useState(!1),ft=rt[0],vt=rt[1],D=O.useRef(null),k=O.useRef({setCaretTimeout:null,focusTimeout:null});O.useEffect(function(){return vt(!0),function(){clearTimeout(k.current.setCaretTimeout),clearTimeout(k.current.focusTimeout)}},[]);var lt=l,H=function(i,u){var v=parseFloat(u);return{formattedValue:i,value:u,floatValue:isNaN(v)?void 0:v}},_=function(i,u,v){i.selectionStart===0&&i.selectionEnd===i.value.length||(Z(i,u),k.current.setCaretTimeout=setTimeout(function(){i.value===v&&i.selectionStart!==u&&Z(i,u)},0))},L=function(i,u,v){return G(i,u,x(i),v)},J=function(i,u,v){var g=x(u),N=Rt(u,p,i,v,g,I,A);return N=G(u,N,g),N},ct=function(i){var u=i.formattedValue;u===void 0&&(u="");var v=i.input,g=i.source,N=i.event,h=i.numAsString,m;if(v){var F=i.inputValue||v.value,T=Y(v);v.value=u,m=J(F,u,T),m!==void 0&&_(v,m,u)}u!==p&&et(H(u,h),{event:N,source:g})};O.useEffect(function(){var i=q.current,u=i.formattedValue,v=i.numAsString;(p!==u||U!==v)&&et(H(p,U),{event:void 0,source:z.props})},[p,U]);var st=D.current?Y(D.current):void 0,dt=typeof window<"u"?O.useLayoutEffect:O.useEffect;dt(function(){var i=D.current;if(p!==q.current.formattedValue&&i){var u=J(q.current.formattedValue,p,st);i.value=p,_(i,u,p)}},[p]);var mt=function(i,u,v){var g=u.target,N=$.current?Nt($.current,g.selectionEnd):xt(p,i),h=Object.assign(Object.assign({},N),{lastValue:p}),m=s(i,h),F=lt(m);if(m=s(F,void 0),E&&!E(H(F,m))){var T=u.target,B=Y(T),X=J(i,p,B);return T.value=p,_(T,X,p),!1}return ct({formattedValue:F,numAsString:m,inputValue:i,event:u,source:v,input:u.target}),!0},Q=function(i,u){u===void 0&&(u=0);var v=i.selectionStart,g=i.selectionEnd;$.current={selectionStart:v,selectionEnd:g+u}},gt=function(i){var u=i.target,v=u.value,g=mt(v,i,z.event);g&&c(i),$.current=void 0},ht=function(i){var u=i.target,v=i.key,g=u.selectionStart,N=u.selectionEnd,h=u.value;h===void 0&&(h="");var m;v==="ArrowLeft"||v==="Backspace"?m=Math.max(g-1,0):v==="ArrowRight"?m=Math.min(g+1,h.length):v==="Delete"&&(m=g);var F=0;v==="Delete"&&g===N&&(F=1);var T=v==="ArrowLeft"||v==="ArrowRight";if(m===void 0||g!==N&&!T){S(i),Q(u,F);return}var B=m;if(T){var X=v==="ArrowLeft"?"left":"right";B=L(h,m,X),B!==m&&i.preventDefault()}else v==="Delete"&&!I(h[m])?B=L(h,m,"right"):v==="Backspace"&&!I(h[m])&&(B=L(h,m,"left"));B!==m&&_(u,B,h),S(i),Q(u,F)},yt=function(i){var u=i.target,v=function(){var g=u.selectionStart,N=u.selectionEnd,h=u.value;if(h===void 0&&(h=""),g===N){var m=L(h,g);m!==g&&_(u,m,h)}};v(),requestAnimationFrame(function(){v()}),f(i),Q(u)},Ct=function(i){i.persist&&i.persist();var u=i.target,v=i.currentTarget;D.current=u,k.current.focusTimeout=setTimeout(function(){var g=u.selectionStart,N=u.selectionEnd,h=u.value;h===void 0&&(h="");var m=L(h,g);m!==g&&!(g===0&&N===h.length)&&_(u,m,h),b(Object.assign(Object.assign({},i),{currentTarget:v}))},0)},St=function(i){D.current=null,clearTimeout(k.current.focusTimeout),clearTimeout(k.current.setCaretTimeout),C(i)},Vt=ft&&Ft()?"numeric":void 0,nt=Object.assign({inputMode:Vt},R,{type:e,value:p,onChange:gt,onKeyDown:ht,onMouseUp:yt,onFocus:Ct,onBlur:St});if(r==="text")return n?j.createElement(j.Fragment,null,n(p,R)||null):j.createElement("span",Object.assign({},R,{ref:o}),p);if(a){var It=a;return j.createElement(It,Object.assign({},nt,{ref:o}))}return j.createElement("input",Object.assign({},nt,{ref:o}))}function Lt(t,e){var r=e.format,a=e.allowEmptyFormatting,n=e.mask,o=e.patternChar;if(o===void 0&&(o="#"),t===""&&!a)return"";for(var l=0,s=r.split(""),y=0,V=r.length;y<V;y++)r[y]===o&&(s[y]=t[l]||ut(n,l),l+=1);return s.join("")}function Pt(t,e,r){e===void 0&&(e=Tt(t));var a=r.format,n=r.patternChar;n===void 0&&(n="#");var o=e.from,l=e.to,s=e.lastValue;s===void 0&&(s="");var y=function(C){return a[C]===n},V=function(C,d){for(var x="",I=0;I<C.length;I++)y(d+I)&&P(C[I])&&(x+=C[I]);return x},w=function(C){return C.replace(/[^0-9]/g,"")};if(!a.match(/\d/))return w(t);if((s===""||o.end-o.start===s.length)&&t.length===a.length){for(var E="",c=0;c<t.length;c++)if(y(c))P(t[c])&&(E+=t[c]);else if(t[c]!==a[c])return w(t);return E}var S=s.substring(0,o.start),f=t.substring(l.start,l.end),b=s.substring(o.end);return""+V(S,0)+w(f)+V(b,o.end)}function Kt(t,e){var r=e.format,a=e.mask,n=e.patternChar;n===void 0&&(n="#");var o=Array.from({length:t.length+1}).map(function(){return!0}),l=0,s=-1,y={};r.split("").forEach(function(c,S){var f=void 0;c===n&&(l++,f=ut(a,l-1),s===-1&&t[S]===f&&(s=S)),y[S]=f});for(var V=function(c){return r[c]===n&&t[c]!==y[c]},w=0,E=o.length;w<E;w++)o[w]=w===s||V(w)||V(w-1);return o[r.indexOf(n)]=!0,o}function Ut(t){var e=t.mask;if(e){var r=e==="string"?e:e.toString();if(r.match(/\d/g))throw new Error("Mask "+e+" should not contain numeric character;")}}function $t(t,e){return t===""?!0:!(e!=null&&e.match(/\d/))&&typeof t=="string"&&(!!t.match(/^\d+$/)||t==="")}function qt(t){t.mask,t.allowEmptyFormatting;var e=t.format,r=t.inputMode;r===void 0&&(r="numeric");var a=t.onKeyDown;a===void 0&&(a=M);var n=t.patternChar;n===void 0&&(n="#");var o=t.value,l=t.defaultValue,s=t.valueIsNumericString,y=it(t,["mask","allowEmptyFormatting","format","inputMode","onKeyDown","patternChar","value","defaultValue","valueIsNumericString"]);Ut(t);var V=function(f){return Kt(f,t)},w=function(f){var b=f.key,C=f.target,d=C.selectionStart,x=C.selectionEnd,I=C.value;if(d!==x){a(f);return}var A=d;if(b==="Backspace"||b==="Delete"){var R="right";if(b==="Backspace"){for(;A>0&&e[A-1]!==n;)A--;R="left"}else{for(var K=e.length;A<K&&e[A]!==n;)A++;R="right"}A=G(I,A,V(I),R)}else e[A]!==n&&b!=="ArrowLeft"&&b!=="ArrowRight"&&(A=G(I,A+1,V(I),"right"));A!==d&&Z(C,A),a(f)},E=W(o)?l:o,c=s??$t(E,e),S=Object.assign(Object.assign({},t),{valueIsNumericString:c});return Object.assign(Object.assign({},y),{value:o,defaultValue:l,valueIsNumericString:c,inputMode:r,format:function(f){return Lt(f,S)},removeFormatting:function(f,b){return Pt(f,b,S)},getCaretBoundary:V,onKeyDown:w})}function Wt(t){var e=qt(t);return j.createElement(Dt,Object.assign({},e))}export{Wt as P};
