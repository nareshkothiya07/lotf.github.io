import{t as R,u as B,r as l,b as N,b2 as w,j as e,C as z,F as q,L as K,A as U,d as Z,D as J,e as E,f as Q,G as i,S as c,I as m,aK as x,b0 as b,H as o,p as X,B as Y,q as S,x as $,b6 as v}from"./index-DSO9TgYq.js";import{f as V}from"./doctor-9YdFtdUi.js";import{a as ee}from"./specialty-CpBsygzZ.js";import{u as se}from"./useGenderList-C-bU5Ya0.js";import{u as re}from"./useStatusList-Dbp-x5Xm.js";import{u as te}from"./RenderFilterKeys-DXC0MC7n.js";import{h as ne}from"./handleScroll-BwFQoF1o.js";import{G as ie}from"./GenericAutocomplete-D3M5FyqM.js";function je({open:F,isDoctorList:_,initialValue:r,handleClose:a,setCriteria:k,resetFilter:D}){const{lang:h}=R(),t=B(),p=se(),{defaultList:g}=re($.DOCTOR_STATUS),j=te(),[C,I]=l.useState([]),{data:n,isLoading:f,setPagination:A,setFilterCriteria:G}=ee(v.TEN),M=N({initialValues:{speciality_id:(r==null?void 0:r.speciality_id)??"",experience:(r==null?void 0:r.experience)??"",gender:(r==null?void 0:r.gender)??"",status:(r==null?void 0:r.status)??""},validationSchema:V,enableReinitialize:!0,onSubmit:async(s,{setSubmitting:ce})=>{try{const d={...(s==null?void 0:s.speciality_id)&&{speciality_id:s.speciality_id},...(s==null?void 0:s.experience)&&{experience:s.experience},...(s==null?void 0:s.gender)&&{gender:s.gender},...typeof(s==null?void 0:s.status)=="number"&&{status:s.status}};if(Object.keys(d).length===0)return;k(d),a()}catch(d){console.error(d)}}}),P=l.useCallback(s=>{ne(s,{isLoading:f,responseMeta:n.meta,setPagination:A})},[n,f]),T=l.useCallback(s=>{G({...(s==null?void 0:s.length)>0&&{search:s}})},[]),W=()=>{O(),D(),a()};l.useEffect(()=>{var s;(s=n==null?void 0:n.data)!=null&&s.length&&w(n,C,I)},[n]);const{handleSubmit:H,isSubmitting:L,resetForm:O,values:u,getFieldProps:oe,setFieldValue:y}=M;return e.jsx(e.Fragment,{children:F&&e.jsx(z,{open:F,handleClose:a,maxWidth:550,children:e.jsx(q,{value:M,children:e.jsx(K,{dateAdapter:U,children:e.jsxs(Z,{autoComplete:"off",noValidate:!0,onSubmit:H,children:[e.jsx(J,{children:t.formatMessage({id:"doctor.filter.title"})}),e.jsx(E,{}),e.jsx(Q,{sx:{p:2.5},children:e.jsxs(i,{container:!0,spacing:1,children:[e.jsx(i,{item:!0,xs:12,md:12,children:e.jsxs(c,{spacing:1,children:[e.jsx(m,{htmlFor:"speciality_id",children:t.formatMessage({id:"common.specialty"})}),e.jsx(x,{fullWidth:!0,children:e.jsx(ie,{label:t.formatMessage({id:"common.selectOp"}),fieldId:"speciality_id",options:C,isLoading:f,fieldName:"speciality_name",onSearch:T,onScroll:P})})]})}),e.jsx(i,{item:!0,xs:12,md:12,children:e.jsxs(c,{spacing:1,children:[e.jsx(m,{htmlFor:"gender",children:t.formatMessage({id:"profile.gender"})}),e.jsx(x,{fullWidth:!0,children:e.jsxs(b,{id:"gender",displayEmpty:!0,value:u.gender,onChange:s=>y("gender",s.target.value),children:[e.jsx(o,{value:"",children:e.jsx("em",{children:t.formatMessage({id:"common.none"})})}),p==null?void 0:p.content.map(s=>e.jsx(o,{value:s.value,children:s.label[h]},s.value))]})})]})}),e.jsx(i,{item:!0,xs:12,md:12,children:e.jsxs(c,{spacing:1,children:[e.jsx(m,{htmlFor:"experience",children:t.formatMessage({id:"doctor.experience"})}),e.jsx(x,{fullWidth:!0,children:e.jsxs(b,{id:"experience",displayEmpty:!0,value:u.experience,onChange:s=>y("experience",s.target.value),children:[e.jsx(o,{value:"",children:e.jsx("em",{children:t.formatMessage({id:"common.none"})})}),j==null?void 0:j.content.map(s=>e.jsx(o,{value:s.value,children:s.label[h]},s.value))]})})]})}),_&&e.jsx(i,{item:!0,xs:12,md:12,children:e.jsxs(c,{spacing:1,children:[e.jsx(m,{htmlFor:"status",children:t.formatMessage({id:"common.status"})}),e.jsx(x,{fullWidth:!0,children:e.jsxs(b,{id:"status",displayEmpty:!0,value:u.status,onChange:s=>y("status",s.target.value),children:[e.jsx(o,{value:"",children:e.jsx("em",{children:t.formatMessage({id:"common.none"})})}),g==null?void 0:g.map(s=>e.jsx(o,{value:s.value,children:s.label[h]},s.value))]})})]})})]})}),e.jsx(E,{}),e.jsx(X,{sx:{p:2.5},children:e.jsx(i,{container:!0,justifyContent:"right",alignItems:"center",children:e.jsx(i,{item:!0,md:12,children:e.jsxs(Y,{display:"flex",justifyContent:"space-between",children:[e.jsx(S,{color:"secondary",onClick:()=>W(),children:t.formatMessage({id:"doctor.filter.clear"})}),e.jsxs(c,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(S,{color:"error",onClick:a,children:t.formatMessage({id:"common.cancel"})}),e.jsx(S,{type:"submit",variant:"contained",disabled:L,children:t.formatMessage({id:"doctor.filter.apply"})})]})]})})})})]})})})})})}export{je as F};
