import{u as D,a as H,W as K,t as J,r as x,g as Q,b as $,a$ as X,c as Z,j as e,B as A,F as ee,d as ae,aL as F,G as s,S as r,I as l,l as h,m as o,aC as te,N as ie,aJ as se,h as ne,aj as re,k as oe,T as y,L as le,Q as de,aK as C,b0 as I,H as u,br as ce,q as E,ax as me,J as he,U as ue}from"./index-DSO9TgYq.js";import{P as pe}from"./react-number-format.es-Bl0F5VJY.js";import{d as xe}from"./dayjs.min-pRfd56nx.js";import{u as ge}from"./useGenderList-C-bU5Ya0.js";import{u as je,a as _e}from"./patient-Di49-sc8.js";import{h as fe}from"./patient-B2iOhP67.js";import{A as be,D as ye}from"./AdapterDayjs-DJXadXKJ.js";import{R as T,a as g}from"./RadioGroup-CZi2BDzD.js";import{F as j}from"./FormControlLabel-DB_ChWU7.js";import{E as Me}from"./EyeOutlined-ChV9zO9W.js";import{E as we}from"./EyeInvisibleOutlined-CaFaFVHk.js";import{C as ve}from"./CameraOutlined-dQFboYcG.js";import"./regex-AjllrUCH.js";import"./Dialog-CPoUMqzk.js";const Fe=()=>({password:"",name_en:"",name_ar:"",gender:"",national_id:"",dob:null,photo:"",weight:"",height:"",phone_number:"",marital_status:"",is_medical_insurance:"",medical_insurance:"",nationality_type:"",nationality_code:null}),Ce=xe(new Date),Ie=()=>{const t=D(),S=H(),M=je(),k=K(),{lang:P}=J(),w=ge(),[_,L]=x.useState(void 0),[O,N]=x.useState("");x.useEffect(()=>{_&&(N(URL.createObjectURL(_)),Q(_,i=>{p("photo",i)}))},[_]);const[v,R]=x.useState(!1),W=()=>{R(!v)},V=i=>{i.preventDefault()},G=x.useMemo(()=>Fe(),[]),f=$({initialValues:G,validationSchema:_e(t),enableReinitialize:!0,onSubmit:async(i,{setSubmitting:b})=>{try{const m={...i,name:{ar:i.name_ar,en:i.name_en},phone_number:X(i.phone_number),dob:new Date(i==null?void 0:i.dob).toISOString()};m.is_medical_insurance==="Yes"&&(m.medical_insurance=""),delete m.name_en,delete m.name_ar,delete m.is_medical_insurance,fe(m).then(Pe=>{Z(t.formatMessage({id:"patient.addSuccess"})),b(!1),k("/patients/list")})}catch(m){console.error(m)}}}),{errors:a,touched:n,handleSubmit:z,handleChange:U,values:d,isSubmitting:B,handleBlur:Y,setFieldTouched:q,getFieldProps:c,setFieldValue:p}=f;return e.jsx(A,{sx:{mb:5,mt:2},children:e.jsx(ee,{value:f,children:e.jsxs(ae,{autoComplete:"off",noValidate:!0,onSubmit:z,children:[e.jsx(F,{title:t.formatMessage({id:"common.accountInfoTitle"}),subheader:t.formatMessage({id:"patient.accountInfoSubtitle"}),children:e.jsx(s,{container:!0,spacing:2,children:e.jsx(s,{item:!0,xs:12,sm:8,children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"phone_number",children:t.formatMessage({id:"profile.phoneNo"})}),e.jsx(pe,{id:"phone_number",name:"phone_number",format:"+### ## ### ####",mask:"_",placeholder:"+966 5",onValueChange:i=>f.setFieldValue("phone_number",i.formattedValue),onBlur:f.handleBlur,customInput:h})]}),n.phone_number&&a.phone_number&&e.jsx(o,{error:!0,id:"helper-phone_number",children:a==null?void 0:a.phone_number})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"password",children:t.formatMessage({id:"common.password"})}),e.jsx(te,{id:"password",placeholder:t.formatMessage({id:"common.password"}),type:v?"text":"password",name:"password",onBlur:Y,onChange:U,endAdornment:e.jsx(ie,{position:"end",children:e.jsx(se,{"aria-label":"toggle password visibility",onClick:W,onMouseDown:V,edge:"end",size:"large",color:"secondary",children:v?e.jsx(Me,{}):e.jsx(we,{})})})})]}),n.password&&a.password&&e.jsx(o,{error:!0,id:"password-helper",children:a.password})]})]})})})}),e.jsx("br",{}),e.jsx(F,{title:t.formatMessage({id:"profile.personalInfoTitle"}),subheader:t.formatMessage({id:"patient.personalInfoSubtitle"}),children:e.jsx(s,{container:!0,spacing:2,children:e.jsx(s,{item:!0,xs:12,sm:8,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,md:6,children:[e.jsxs(r,{direction:"row",justifyContent:"center",sx:{mt:3},children:[e.jsxs(ne,{htmlFor:"change-avtar",sx:{position:"relative",borderRadius:"50%",overflow:"hidden","&:hover .MuiBox-root":{opacity:1},cursor:"pointer"},children:[e.jsx(re,{alt:"Avatar 1",src:O,sx:{width:72,height:72,border:"1px dashed"}}),e.jsx(A,{sx:{position:"absolute",top:0,left:0,background:S.palette.mode===oe.DARK?"rgba(255, 255, 255, .75)":"rgba(0,0,0,.65)",width:"100%",height:"100%",opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(r,{spacing:.5,alignItems:"center",children:[e.jsx(ve,{style:{color:S.palette.secondary.lighter,fontSize:"2rem"}}),e.jsx(y,{sx:{color:"secondary.lighter"},children:t.formatMessage({id:"common.upload"})})]})})]}),e.jsx(h,{type:"file",id:"change-avtar",placeholder:"Outlined",variant:"outlined",inputProps:{accept:"image/*"},sx:{display:"none"},onChange:i=>{var b;q("photo",!0),L((b=i.target.files)==null?void 0:b[0])}})]}),e.jsx(r,{direction:"row",justifyContent:"center",children:n.photo&&a.photo&&e.jsx(o,{error:!0,id:"helper-image",children:a==null?void 0:a.photo})})]}),e.jsx(s,{item:!0,xs:12,md:12,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"name_en",children:t.formatMessage({id:"profile.nameEn"})}),e.jsx(h,{fullWidth:!0,id:"name_en",placeholder:t.formatMessage({id:"profile.nameEn"}),...c("name_en"),error:!!(n.name_en&&a.name_en)})]}),n.name_en&&a.name_en&&e.jsx(o,{error:!0,id:"helper-name_en",children:a==null?void 0:a.name_en})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"name_ar",children:t.formatMessage({id:"profile.nameAr"})}),e.jsx(h,{fullWidth:!0,id:"name_ar",placeholder:t.formatMessage({id:"profile.nameAr"}),...c("name_ar"),error:!!(n.name_ar&&a.name_ar)})]}),n.name_ar&&a.name_ar&&e.jsx(o,{error:!0,id:"helper-name_ar",children:a==null?void 0:a.name_ar})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"national_id",children:t.formatMessage({id:"profile.nationalIdIqamaNumber"})}),e.jsx(h,{fullWidth:!0,id:"national_id",placeholder:t.formatMessage({id:"profile.nationalIdIqamaNumber"}),...c("national_id"),error:!!(n.national_id&&a.national_id)})]}),n.national_id&&a.national_id&&e.jsx(o,{error:!0,id:"helper-national_id",children:a==null?void 0:a.national_id})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"dob",children:t.formatMessage({id:"profile.dob"})}),e.jsx(le,{dateAdapter:be,children:e.jsx(ye,{format:de,value:d==null?void 0:d.dob,maxDate:Ce,onChange:i=>p("dob",i),name:"dob"})})]}),n.dob&&a.dob&&e.jsx(o,{error:!0,id:"helper-dob",children:a==null?void 0:a.dob})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"gender",children:t.formatMessage({id:"profile.gender"})}),e.jsx(C,{fullWidth:!0,error:!!(n.gender&&a.gender),children:e.jsxs(I,{id:"gender",displayEmpty:!0,value:d.gender,onChange:i=>p("gender",i.target.value),children:[e.jsx(u,{value:"",disabled:!0,children:e.jsx(y,{color:"secondary",children:t.formatMessage({id:"common.selectOp"})})}),w==null?void 0:w.content.map(i=>e.jsx(u,{value:i.value,children:i.label[P]},i.value))]})})]}),n.gender&&a.gender&&e.jsx(o,{error:!0,id:"helper-gender",children:a==null?void 0:a.gender})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"marital_status",children:t.formatMessage({id:"patient.martialStatus"})}),e.jsx(C,{fullWidth:!0,error:!!(n.marital_status&&a.marital_status),children:e.jsxs(I,{id:"marital_status",displayEmpty:!0,value:d.marital_status,onChange:i=>p("marital_status",i.target.value),children:[e.jsx(u,{value:"",disabled:!0,children:e.jsx(y,{color:"secondary",children:t.formatMessage({id:"common.selectOp"})})}),M==null?void 0:M.content.map(i=>e.jsx(u,{value:i.value,children:i.label[P]},i.value))]})})]}),n.marital_status&&a.marital_status&&e.jsx(o,{error:!0,id:"helper-marital_status",children:a==null?void 0:a.marital_status})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"height",children:t.formatMessage({id:"common.height"})}),e.jsx(h,{fullWidth:!0,id:"height",placeholder:t.formatMessage({id:"common.height"}),...c("height"),error:!!(n.height&&a.height)})]}),n.height&&a.height&&e.jsx(o,{error:!0,id:"helper-height",children:a==null?void 0:a.height})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"weight",children:t.formatMessage({id:"common.weight"})}),e.jsx(h,{fullWidth:!0,id:"weight",placeholder:t.formatMessage({id:"common.weight"}),...c("weight"),error:!!(n.weight&&a.weight)})]}),n.weight&&a.weight&&e.jsx(o,{error:!0,id:"helper-weight",children:a==null?void 0:a.weight})]}),e.jsx(s,{item:!0,xs:12,sm:12,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,sm:12,children:[e.jsxs(r,{spacing:1,children:[e.jsxs(l,{htmlFor:"nationality_type",children:[t.formatMessage({id:"patient.nationality_type"})," "]}),e.jsxs(T,{row:!0,"aria-label":"payment-card",...c("nationality_type"),children:[e.jsx(j,{control:e.jsx(g,{value:"saudi"}),label:t.formatMessage({id:"common.saudi"})}),e.jsx(j,{control:e.jsx(g,{value:"resident"}),label:t.formatMessage({id:"common.resident"})}),e.jsx(j,{control:e.jsx(g,{value:"gcc"}),label:t.formatMessage({id:"common.gcc"})})]})]}),n.nationality_type&&a.nationality_type&&e.jsx(o,{error:!0,id:"helper-nationality_type",children:a==null?void 0:a.nationality_type})]}),d.nationality_type==="gcc"&&e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"nationality_code",children:t.formatMessage({id:"patient.nationalityCode"})}),e.jsx(C,{fullWidth:!0,error:!!(n.nationality_code&&a.nationality_code),children:e.jsxs(I,{id:"nationality_code",displayEmpty:!0,value:d.nationality_code||"",onChange:i=>p("nationality_code",i.target.value),children:[e.jsx(u,{value:"",disabled:!0,children:e.jsx(y,{color:"secondary",children:t.formatMessage({id:"common.selectOp"})})}),ce.map(i=>e.jsx(u,{value:i.value,children:i.label},i.value))]})})]}),n.nationality_code&&a.nationality_code&&e.jsx(o,{error:!0,id:"helper-nationality_code",children:a==null?void 0:a.nationality_code})]})]})})]})})]})})})}),e.jsx("br",{}),e.jsx(F,{title:t.formatMessage({id:"patient.insurance"}),subheader:t.formatMessage({id:"patient.insuranceSubTitle"}),children:e.jsx(s,{container:!0,spacing:2,children:e.jsx(s,{item:!0,xs:12,sm:8,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsxs(l,{htmlFor:"is_medical_insurance",children:[t.formatMessage({id:"patient.medicalInsuranceConfirm"})," "]}),e.jsxs(T,{row:!0,"aria-label":"payment-card",...c("is_medical_insurance"),children:[e.jsx(j,{control:e.jsx(g,{value:"Yes"}),label:t.formatMessage({id:"common.yes"})}),e.jsx(j,{control:e.jsx(g,{value:"No"}),label:t.formatMessage({id:"common.no"})})]})]}),n.is_medical_insurance&&a.is_medical_insurance&&e.jsx(o,{error:!0,id:"helper-is_medical_insurance",children:a==null?void 0:a.is_medical_insurance})]}),(d==null?void 0:d.is_medical_insurance)==="Yes"&&e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(r,{spacing:1,children:[e.jsx(l,{htmlFor:"medical_insurance",children:t.formatMessage({id:"patient.medicalInsurance"})}),e.jsx(h,{fullWidth:!0,multiline:!0,id:"medical_insurance",placeholder:t.formatMessage({id:"patient.medicalInsurance"}),...c("medical_insurance"),error:!!(n.medical_insurance&&a.medical_insurance)})]}),n.medical_insurance&&a.medical_insurance&&e.jsx(o,{error:!0,id:"helper-medical_insurance",children:a==null?void 0:a.medical_insurance})]})]})})})}),e.jsxs(r,{direction:"row",sx:{mt:2},justifyContent:"flex-start",alignItems:"center",spacing:2,children:[e.jsx(E,{variant:"outlined",component:me,to:"/patients/list",disabled:B,children:t.formatMessage({id:"common.cancel"})}),e.jsx(E,{type:"submit",variant:"contained",disabled:B,children:t.formatMessage({id:"patient.addPatient"})})]})]})})})};function Se(t){return[{title:t.formatMessage({id:"sidebar.home"}),to:ue},{title:t.formatMessage({id:"sidebar.patients"}),to:"/patients/list"},{title:t.formatMessage({id:"patient.addPatient"})}]}const Ue=()=>{const t=D();return e.jsxs("div",{children:[e.jsx(he,{custom:!0,heading:t.formatMessage({id:"patient.addPatient"}),links:Se(t)}),e.jsx(Ie,{})]})};export{Ue as default};
