import{t as E,u as B,a as P,v as K,r as c,j as e,b5 as _,y as A,z as O,M as V,E as H,H as R,T as s,J as G,S as b,K as q,B as r,G as i,q as J,U as Q,cS as X}from"./index-DSO9TgYq.js";import{d as U}from"./dayjs.min-pRfd56nx.js";import{D as Y}from"./DebouncedInput-DhmfX_1V.js";import{u as Z}from"./useFilterAndSearch-PJD0Zg8P.js";import{C as m}from"./CustomTypography-CRnDvUFn.js";import"./CloseOutlined-DRBnXhIJ.js";function $(t){return[{title:t.formatMessage({id:"sidebar.home"}),to:Q},{title:t.formatMessage({id:"sidebar.contactUs"})}]}function ce(){E();const t=B(),z=P(),I=K(z.breakpoints.down("sm")),[a,v]=c.useState(null),[k,M]=c.useState(!1),[j,f]=c.useState([]),[N,C]=c.useState(!1),[h,W]=c.useState({page:1,pageSize:10}),[ee,T]=c.useState({created_at:"desc"}),{filter:se,search:d,setSearch:D}=Z();c.useEffect(()=>{(async()=>{var o;C(!0);try{const l=await X();(o=l==null?void 0:l.data)!=null&&o.data?f(l.data.data):f([])}catch{f([])}finally{C(!1)}})()},[]);const x=c.useMemo(()=>{const n=Array.isArray(j)?j:[];return d?n.filter(o=>{var l,p,y,u;return((l=o==null?void 0:o.full_name)==null?void 0:l.toLowerCase().includes(d.toLowerCase()))||((p=o==null?void 0:o.phone_number)==null?void 0:p.includes(d))||((y=o==null?void 0:o.reason)==null?void 0:y.toLowerCase().includes(d.toLowerCase()))||((u=o==null?void 0:o.user_type)==null?void 0:u.toLowerCase().includes(d.toLowerCase()))}):n},[j,d]),F=c.useMemo(()=>({data:Array.isArray(x)?x:[],meta:{page:h.page,pageSize:h.pageSize,total:Array.isArray(x)?x.length:0}}),[x,h.page,h.pageSize]),S=c.useCallback(n=>{v(n),M(!0)},[]),w=()=>{M(!1),v(null)},L=c.useMemo(()=>[{accessorKey:"id",header:t.formatMessage({id:"profile.id"}),size:60,cell:({row:n})=>e.jsx(m,{variant:"body2",color:"textSecondary",value:n.original.id})},{accessorKey:"full_name",header:t.formatMessage({id:"contactUs.fullName"}),size:150,cell:({row:n})=>e.jsx(m,{variant:"body2",fontWeight:"medium",value:n.original.full_name})},{accessorKey:"phone_number",header:t.formatMessage({id:"contactUs.phoneNumber"}),size:130,cell:({row:n})=>e.jsx(m,{variant:"body2",value:n.original.phone_number})},{accessorKey:"reason",header:t.formatMessage({id:"contactUs.reason"}),size:150,cell:({row:n})=>e.jsx(m,{variant:"body2",value:n.original.reason})},{accessorKey:"user_type",header:t.formatMessage({id:"contactUs.userType"}),size:120,cell:({row:n})=>e.jsx(_,{label:n.original.user_type,size:"small",color:n.original.user_type==="doctor"?"primary":n.original.user_type==="patient"?"success":"default",variant:"outlined"})},{accessorKey:"created_at",header:t.formatMessage({id:"contactUs.createdAt"}),size:130,cell:({row:n})=>e.jsx(m,{variant:"body2",color:"textSecondary",value:U(n.original.created_at).format(A)})},{id:"actions",header:t.formatMessage({id:"common.actions"}),size:80,cell:({row:n})=>{const[o,l]=c.useState(null),p=!!o,y=g=>{l(g.currentTarget)},u=()=>{l(null)};return e.jsxs(e.Fragment,{children:[e.jsx(O,{onClick:y,children:e.jsx(V,{})}),e.jsx(H,{anchorEl:o,open:p,onClose:u,onClick:u,children:e.jsx(R,{onClick:g=>{g.stopPropagation(),S(n.original)},children:e.jsx(s,{variant:"body1",children:t.formatMessage({id:"common.view"})})})})]})}}],[t,S]);return e.jsxs(e.Fragment,{children:[e.jsx(G,{custom:!0,links:$(t)}),e.jsx(b,{direction:"row",marginBottom:"20px",spacing:2,justifyContent:"space-between",alignItems:"center",children:e.jsx(s,{variant:"h2",children:t.formatMessage({id:"sidebar.contactUs"})})}),e.jsx(q,{data:F,columns:L,isLoading:N,setPagination:W,setSortingParams:T,children:e.jsx(b,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...I&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:e.jsx(r,{sx:{width:{xs:"70%",md:"70%"}},children:e.jsx(b,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(Y,{value:d,onFilterChange:D,placeholder:t.formatMessage({id:"contactUs.searchPlaceholder"})})})})})}),k&&a&&e.jsx(r,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1300,display:"flex",alignItems:"center",justifyContent:"center",p:2},onClick:w,children:e.jsxs(r,{sx:{backgroundColor:"background.paper",borderRadius:2,p:3,maxWidth:600,width:"100%",maxHeight:"80vh",overflow:"auto"},onClick:n=>n.stopPropagation(),children:[e.jsx(s,{variant:"h5",sx:{mb:3},children:t.formatMessage({id:"contactUs.contactDetails"})}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{children:[e.jsx(s,{variant:"subtitle2",color:"textSecondary",children:t.formatMessage({id:"contactUs.fullName"})}),e.jsx(s,{variant:"body1",children:a.full_name})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{children:[e.jsx(s,{variant:"subtitle2",color:"textSecondary",children:t.formatMessage({id:"contactUs.phoneNumber"})}),e.jsx(s,{variant:"body1",children:a.phone_number})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{children:[e.jsx(s,{variant:"subtitle2",color:"textSecondary",children:t.formatMessage({id:"contactUs.reason"})}),e.jsx(s,{variant:"body1",children:a.reason})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{children:[e.jsx(s,{variant:"subtitle2",color:"textSecondary",children:t.formatMessage({id:"contactUs.userType"})}),e.jsx(_,{label:a.user_type,size:"small",color:a.user_type==="doctor"?"primary":a.user_type==="patient"?"success":"default",variant:"outlined"})]})})]}),a.user_id&&e.jsxs(r,{sx:{mt:3},children:[e.jsx(s,{variant:"subtitle2",color:"textSecondary",sx:{mb:1},children:t.formatMessage({id:"contactUs.userDetails"})}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.formatMessage({id:"profile.id"}),":"]}),e.jsxs(s,{variant:"body2",fontWeight:"medium",children:["#",a.user_id]})]})}),a.user_type==="patient"&&a.patient&&e.jsxs(e.Fragment,{children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.formatMessage({id:"profile.email"}),":"]}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:a.patient.email||"N/A"})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.formatMessage({id:"contactUs.phoneNumber"}),":"]}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:a.patient.phone_number||"N/A"})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.formatMessage({id:"common.status"}),":"]}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:a.patient.status===1?"Active":"Inactive"})]})})]}),a.user_type==="doctor"&&a.doctor&&e.jsxs(e.Fragment,{children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.formatMessage({id:"profile.email"}),":"]}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:a.doctor.email||"N/A"})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.formatMessage({id:"contactUs.phoneNumber"}),":"]}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:a.doctor.phone_number||"N/A"})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.formatMessage({id:"common.status"}),":"]}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:a.doctor.status===1?"Active":"Inactive"})]})})]}),a.user_type==="employee"&&a.employee&&e.jsxs(e.Fragment,{children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.formatMessage({id:"profile.email"}),":"]}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:a.employee.email||"N/A"})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.formatMessage({id:"contactUs.phoneNumber"}),":"]}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:a.employee.phone_number||"N/A"})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.formatMessage({id:"common.status"}),":"]}),e.jsx(s,{variant:"body2",fontWeight:"medium",children:a.employee.status===1?"Active":"Inactive"})]})})]})]})]}),e.jsxs(r,{sx:{mt:3},children:[e.jsx(s,{variant:"subtitle2",color:"textSecondary",children:t.formatMessage({id:"contactUs.message"})}),e.jsx(s,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:a.message})]}),e.jsxs(r,{sx:{mt:3},children:[e.jsx(s,{variant:"subtitle2",color:"textSecondary",children:t.formatMessage({id:"contactUs.createdAt"})}),e.jsx(s,{variant:"body1",children:U(a.created_at).format(A)})]}),e.jsx(r,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:e.jsx(J,{onClick:w,variant:"outlined",children:t.formatMessage({id:"common.close"})})})]})})]})}export{ce as default};
