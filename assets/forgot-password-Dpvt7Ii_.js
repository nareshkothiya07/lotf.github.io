import{u as f,W as j,az as u,j as e,aA as b,Y as w,Z as v,aG as y,G as s,S as h,I as F,aB as n,aC as I,m,q as A,T as d,ax as k}from"./index-DSO9TgYq.js";import{A as B,a as M}from"./AnimateButton-C_cTvbpU.js";function P(){const t=f(),x=j(),{forgotPassword:p}=u();return e.jsx(e.Fragment,{children:e.jsx(b,{initialValues:{email:"",submit:null},validationSchema:w().shape({email:v().email(t.formatMessage({id:"auth.forgotpassword.validation.email.invalid"})).max(255).required(t.formatMessage({id:"auth.forgotpassword.validation.email.required"}))}),onSubmit:async(a,{setErrors:l,setStatus:r,setSubmitting:o})=>{try{await p(a.email).then(()=>{r({success:!0}),o(!1),y({open:!0,message:t.formatMessage({id:"auth.forgotpassword.success"}),variant:"alert",alert:{color:"success"}}),setTimeout(()=>{window.localStorage.setItem("email",a.email),x("/code-verification",{replace:!0})},1500)},i=>{r({success:!1}),l({submit:i.message}),o(!1)})}catch(i){console.error(i),r({success:!1}),l({submit:i.message}),o(!1)}},children:({errors:a,handleBlur:l,handleChange:r,handleSubmit:o,isSubmitting:i,touched:c,values:g})=>e.jsx("form",{noValidate:!0,onSubmit:o,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,children:[e.jsxs(h,{spacing:1,children:[e.jsx(F,{htmlFor:"email-forgot",children:e.jsx(n,{id:"auth.forgotpassword.email"})}),e.jsx(I,{fullWidth:!0,error:!!(c.email&&a.email),id:"email-forgot",type:"email",value:g.email,name:"email",onBlur:l,onChange:r,placeholder:t.formatMessage({id:"auth.forgotpassword.email"}),inputProps:{}})]}),c.email&&a.email&&e.jsx(m,{error:!0,id:"helper-text-email-forgot",children:a.email})]}),a.submit&&e.jsx(s,{item:!0,xs:12,children:e.jsx(m,{error:!0,children:a.submit})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(B,{children:e.jsx(A,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:e.jsx(n,{id:"auth.forgotpassword.submit"})})})})]})})})})}function q(){const{isLoggedIn:t}=u();return e.jsx(M,{children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,children:[e.jsxs(h,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:1}},children:[e.jsx(d,{variant:"h3",children:e.jsx(n,{id:"auth.forgotpassword.title"})}),e.jsx(d,{component:k,to:t?"/auth/login":"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:e.jsx(n,{id:"auth.forgotpassword.back"})})]}),e.jsx(d,{color:"secondary",variant:"body1",children:e.jsx(n,{id:"auth.forgotpassword.subtitle"})})]}),e.jsx(s,{item:!0,xs:12,children:e.jsx(P,{})})]})})}export{q as default};
