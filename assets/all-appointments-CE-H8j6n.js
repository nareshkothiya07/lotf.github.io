import{W as N,t as _,a as K,u as R,v as B,r as l,b6 as F,j as s,S as c,i as k,R as w,y as P,z as D,J as O,T as V,b5 as y,K as z,B as p,x as j}from"./index-DSO9TgYq.js";import{d as U}from"./dayjs.min-pRfd56nx.js";import{u as G}from"./useFilterAndSearch-PJD0Zg8P.js";import{C as m}from"./CustomTypography-CRnDvUFn.js";import{e as L}from"./consultations-DReYVU28.js";import{D as W}from"./DebouncedInput-DhmfX_1V.js";import{E as H}from"./EyeFilled-BTYwWTr6.js";import"./CloseOutlined-DRBnXhIJ.js";function J(d){return[{title:d.formatMessage({id:"sidebar.allAppointments"}),to:"/finance/all-appointments"}]}function se(){const d=N(),{lang:r}=_(),b=K(),o=R(),C=B(b.breakpoints.down("sm")),[n,u]=l.useState(1),{filter:g,search:S,setSearch:M}=G(),{data:f,isLoading:v,setPagination:x,setFilterCriteria:T,setSorting:A}=L(n);console.log(f),l.useEffect(()=>{T(g)},[g]);const E=l.useCallback((e,a)=>{d(`/finance/appointments/${e}`,{state:a})},[d]);l.useEffect(()=>{x({page:1,pageSize:F.TEN})},[n]);const I=l.useMemo(()=>[{header:o.formatMessage({id:"common.from"}),accessorKey:"from",cell:({row:e})=>{var a,t;return(t=(a=e.original)==null?void 0:a.patient)==null?void 0:t.name[r]}},{header:o.formatMessage({id:"common.doctor"}),accessorKey:"doctor",enableSorting:!1,cell:({row:e})=>{var a,t,i,h;return s.jsxs(c,{direction:"row",spacing:1.5,alignItems:"center",children:[s.jsx(k,{alt:"Avatar 1",size:"sm",src:((a=e.original.doctor)==null?void 0:a.photo)||((t=e.original.employee)==null?void 0:t.photo)}),s.jsx(m,{className:"typography-inline",value:((i=e.original.doctor)==null?void 0:i.name[r])||((h=e.original.employee)==null?void 0:h.name[r])})]})}},{header:o.formatMessage({id:"common.type"}),accessorKey:"type",enableSorting:!1,cell:({row:e})=>{var a,t,i;return s.jsx(m,{className:"typography-inline",value:((a=e.original.service)==null?void 0:a.name[r])||((i=(t=e.original)==null?void 0:t.speciality)==null?void 0:i.speciality_name[r])})}},{header:o.formatMessage({id:"common.amount"}),accessorKey:"amount",cell:({row:e})=>{var a;return s.jsx(m,{className:"typography-inline",value:(a=e.original)==null?void 0:a.total_price})}},{header:o.formatMessage({id:"finance.docCommision"}),accessorKey:"docCommision",cell:({row:e})=>{var a,t;return s.jsx(m,{className:"typography-inline",value:(t=(a=e.original)==null?void 0:a.transaction)==null?void 0:t.doctor_commision})}},{header:o.formatMessage({id:"finance.lotfCommission"}),accessorKey:"lotfCommission",cell:({row:e})=>{var a,t;return s.jsx(m,{className:"typography-inline",value:(t=(a=e.original)==null?void 0:a.transaction)==null?void 0:t.lotf_commision})}},{header:o.formatMessage({id:"common.status"}),accessorKey:"status",disableSortBy:!0,cell:e=>{const a=n===1?j.CONSULTATION_STATUS:j.VISIT_STATUS;return s.jsx(w,{status:e.getValue(),referenceKey:a})}},{header:o.formatMessage({id:"common.date"}),accessorKey:"created_at",cell:({row:e})=>{var t,i;const a=n===1?(t=e.original)==null?void 0:t.consultation_date:(i=e.original)==null?void 0:i.visited_on;return U(a).format(P)}},{header:o.formatMessage({id:"common.actions"}),accessorKey:"Actions",meta:{className:"cell-center"},enableSorting:!1,cell:({row:e})=>s.jsx(D,{onClick:a=>{a.stopPropagation(),E(e.original.id,e.original)},children:s.jsx(H,{})})}],[]);return s.jsxs(s.Fragment,{children:[s.jsx(O,{custom:!0,links:J(o)}),s.jsx(c,{direction:"row",marginBottom:"20px",spacing:2,justifyContent:"space-between",alignItems:"center",children:s.jsx(V,{variant:"h2",children:o.formatMessage({id:"sidebar.allAppointments"})})}),s.jsxs(c,{direction:"row",marginBottom:"20px",spacing:2,children:[s.jsx(y,{color:n===1?"primary":"default",label:o.formatMessage({id:"common.virtualConsultations"}),sx:{borderRadius:"15px"},onClick:()=>{u(1)},variant:"filled"}),s.jsx(y,{color:n===2?"primary":"default",label:o.formatMessage({id:"finance.atHomeVisits"}),sx:{borderRadius:"15px"},onClick:()=>{u(2)},variant:"filled"})]}),s.jsxs(z,{data:f,columns:I,isLoading:v,setPagination:e=>{x(e)},setSortingParams:e=>{A(e)},children:[s.jsx(c,{direction:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",sx:{px:2,paddingTop:2,...C&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:s.jsx(p,{sx:{width:{xs:"70%",md:"70%"}},children:s.jsx(c,{direction:"row",spacing:2,alignItems:"center",children:s.jsx(p,{sx:{display:"flex",alignItems:"center",border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:"4px"},children:s.jsx(W,{value:S,onFilterChange:e=>M(e),placeholder:o.formatMessage({id:"doctor.searchPlaceholder"})})})})})}),s.jsx(p,{sx:{px:2,pt:2,pb:1}})]})]})}export{se as default};
