import{u as T,j as e,S as c,T as n,t as H,a as U,W as z,r as o,v as V,c as S,i as W,X as q,R as G,x as b,y as J,z as Q,M as X,E as $,H as f,J as Y,q as E,P as Z,ax as ee,K as te,B as ae,U as se}from"./index-DSO9TgYq.js";import{d as ne}from"./dayjs.min-pRfd56nx.js";import{D as ie}from"./DebouncedInput-DhmfX_1V.js";import{u as re,a as oe,d as le}from"./medical-centers-BO6wn6Y4.js";import{C as ce}from"./ConfirmationDialog-DR_Ho8RD.js";import{C as I}from"./CustomTypography-CRnDvUFn.js";import{u as de}from"./useFilterAndSearch-PJD0Zg8P.js";import{E as me}from"./EditStatusDialog-BIVGlZRP.js";import{u as ue}from"./useStatusList-Dbp-x5Xm.js";import{A as he}from"./ArrowUpOutlined-C9GTlrEN.js";import"./CloseOutlined-DRBnXhIJ.js";import"./Dialog-CPoUMqzk.js";function ge({open:d,handleClose:g,handleSubmit:x}){const s=T();return e.jsx(ce,{title:s.formatMessage({id:"medicalCenter.delete.title"}),open:d,handleClose:g,handleSubmit:x,actionTitle:s.formatMessage({id:"common.delete"}),styles:{width:"600px"},children:e.jsxs(c,{spacing:1,children:[e.jsx(n,{children:s.formatMessage({id:"medicalCenter.delete.subTitle"})}),e.jsx(n,{variant:"h4",children:s.formatMessage({id:"medicalCenter.delete.appointmentTitle"})}),e.jsx(n,{children:s.formatMessage({id:"medicalCenter.delete.appointmentSubtitle"})}),e.jsx(n,{variant:"h4",children:s.formatMessage({id:"medicalCenter.delete.patientTitle"})}),e.jsx(n,{children:s.formatMessage({id:"medicalCenter.delete.patientSubtitle"})}),e.jsx(n,{variant:"h4",children:s.formatMessage({id:"medicalCenter.delete.historicTitle"})}),e.jsx(n,{children:s.formatMessage({id:"medicalCenter.delete.historicSubtitle"})}),e.jsx(n,{children:s.formatMessage({id:"medicalCenter.delete.confirmation"})})]})})}function pe(d){return[{title:d.formatMessage({id:"sidebar.home"}),to:se},{title:d.formatMessage({id:"sidebar.medicalCenters"})}]}function we(){const{lang:d}=H(),{data:g,error:x,isLoading:s,setFilterCriteria:v,url:m,setPagination:w,setSorting:A}=re(),P=U(),C=z(),a=T(),{defaultList:k}=ue(b.MEDICAL_CENTER),[p,u]=o.useState(0),[i,h]=o.useState(null),B=V(P.breakpoints.down("sm")),D=o.useCallback(t=>{C(`/medical-center/${t}`)},[C]),N=o.useCallback(async t=>{try{oe(i==null?void 0:i.id,m,{status:t}).then(r=>{S(a.formatMessage({id:"medicalCenter.statusEditSuccess"})),h(null)})}catch{h(null)}},[i,m,a]),F=o.useCallback(async()=>{try{await le(p,m).then(t=>{S(a.formatMessage({id:"medicalCenter.delete.deleteSucess"})),u(0)})}catch{u(0)}},[p,m,a]),{filter:j,search:L,setSearch:R}=de();o.useEffect(()=>{v(j)},[j]);const _=o.useMemo(()=>[{header:a.formatMessage({id:"profile.id"}),accessorKey:"id",cell:({row:t})=>{var r;return(r=t.original)==null?void 0:r.id}},{header:a.formatMessage({id:"common.medicalCenter"}),accessorKey:"name",enableSorting:!1,cell:({row:t})=>e.jsxs(c,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(W,{alt:"Avatar 1",size:"sm",src:t.original.image}),e.jsx(I,{className:"typography-inline",value:t.original.name[d]})]})},{header:a.formatMessage({id:"profile.phoneNo"}),accessorKey:"phoneNo",cell:({row:t})=>e.jsx(I,{className:"typography-inline",value:q(t.original.phone_number)})},{header:a.formatMessage({id:"common.status"}),accessorKey:"status",disableSortBy:!0,cell:t=>e.jsx(G,{status:t.getValue(),referenceKey:b.MEDICAL_CENTER})},{header:a.formatMessage({id:"common.joinedon"}),accessorKey:"created_at",cell:({row:t})=>{var r;return ne((r=t.original)==null?void 0:r.created_at).format(J)}},{header:a.formatMessage({id:"common.actions"}),accessorKey:"Actions",meta:{className:"cell-center"},enableSorting:!1,cell:({row:t})=>{const[r,M]=o.useState(null),K=!!r,O=l=>{M(l.currentTarget)},y=()=>{M(null)};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{onClick:O,children:e.jsx(X,{})}),e.jsxs($,{anchorEl:r,open:K,onClose:y,onClick:y,children:[e.jsx(f,{onClick:l=>{l.stopPropagation(),h(t.original)},children:e.jsx(n,{variant:"body1",children:a.formatMessage({id:"common.editStatus"})})}),e.jsx(f,{onClick:l=>{l.stopPropagation(),D(t.original.id)},children:e.jsx(n,{variant:"body1",children:a.formatMessage({id:"medicalCenter.editMedicalCenterInfo"})})}),e.jsx(f,{onClick:l=>{l.stopPropagation(),u(t.original.id)},children:e.jsx(n,{variant:"body1",children:a.formatMessage({id:"medicalCenter.deleteMedicalCenter"})})})]})]})}}],[]);return e.jsxs(e.Fragment,{children:[e.jsx(Y,{custom:!0,links:pe(a)}),e.jsxs(c,{direction:"row",marginBottom:"20px",spacing:2,justifyContent:"space-between",alignItems:"center",children:[e.jsx(n,{variant:"h2",children:a.formatMessage({id:"sidebar.medicalCenters"})}),e.jsx(E,{variant:"contained",startIcon:e.jsx(Z,{}),component:ee,to:"/medical-center/create",children:a.formatMessage({id:"medicalCenter.addNewMedicalCenter"})})]}),e.jsx(te,{data:g,columns:_,isLoading:s,setPagination:t=>{w(t)},setSortingParams:t=>{A(t)},children:e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...B&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(ae,{sx:{width:{xs:"70%",md:"70%"}},children:e.jsx(c,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(ie,{value:L,onFilterChange:t=>R(t),placeholder:a.formatMessage({id:"medicalCenter.searchPlaceholder"})})})}),e.jsx(c,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:e.jsx(c,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(E,{variant:"outlined",startIcon:e.jsx(he,{}),children:a.formatMessage({id:"common.export"})})})})]})}),e.jsx(ge,{open:!!p,handleSubmit:F,handleClose:()=>{u(0)}}),i&&e.jsx(me,{title:a.formatMessage({id:"medicalCenter.editTitle"}),open:!!i,statusList:k,status:i==null?void 0:i.status,handleSubmit:N,handleClose:()=>{h(null)}})]})}export{we as default};
