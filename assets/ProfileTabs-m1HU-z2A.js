import{r as v,aV as Jn,a0 as q,aW as Tn,j as e,ao as qn,ab as et,ad as Ze,aX as Fn,aY as nt,ae as tt,a2 as kn,ak as Dn,al as st,ap as it,aZ as at,a3 as rt,a1 as Ye,aa as ot,a_ as lt,u as H,T as w,e as ie,aw as An,aS as te,B as M,y as Ke,X as Rn,a as dn,t as be,g as ct,b as ue,a$ as dt,c as Z,C as Qe,F as pe,L as Te,A as Je,d as xe,D as qe,f as en,G as d,S as b,h as In,i as mn,k as mt,l as B,m as N,I as E,aK as ce,Q as Pn,b0 as he,H as K,p as nn,q as I,s as Ee,b1 as Oe,W as ht,aL as Q,v as hn,b2 as ut,b3 as xn,b4 as Me,aT as pt,b5 as En,b6 as xt,aC as gn,N as ln,aJ as cn,x as ye,aF as He,b7 as gt,b8 as Ne,av as ft,b9 as fn,ba as jn,ag as we,bb as jt,bc as yt,bd as yn,af as bt,K as On,be as We,ah as Ae,aj as _t,bf as vt}from"./index-DSO9TgYq.js";import{d as V}from"./dayjs.min-pRfd56nx.js";import{R as St}from"./RenderGender-B7FOG7SF.js";import{R as bn,a as Nn,T as _n}from"./RenderDay-DQUhTzfr.js";import{u as se}from"./hooks-CMWd8yYb.js";import{C as Y}from"./CustomTypography-CRnDvUFn.js";import{m as Ct}from"./makeStyles-BH_ZnhxP.js";import{b as je,c as Mt,r as wt,e as Tt,f as Ft,g as kt,h as Dt,i as At,j as Rt,k as It}from"./doctor-Ca9o3VsJ.js";import{C as Pt}from"./CameraOutlined-D4Mj0cXe.js";import{p as Et,a as Ot,s as Nt,c as Vt,b as Lt}from"./doctor-9YdFtdUi.js";import{P as Bt}from"./react-number-format.es-Bl0F5VJY.js";import{u as zt}from"./useGenderList-C-bU5Ya0.js";import{u as $t}from"./useCountries-DSXcarux.js";import{A as vn}from"./Autocomplete-BOe_mB7V.js";import{A as Vn,D as Ln}from"./AdapterDayjs-DJXadXKJ.js";import{C as Bn}from"./ConfirmationDialog-DR_Ho8RD.js";import{E as un}from"./EditFilled-Bmyorrxv.js";import{C as Ht}from"./CloseOutlined-DRBnXhIJ.js";import{a as Wt}from"./specialty-CpBsygzZ.js";import{E as Ut}from"./EducationAddDialog-DF0mhxtx.js";import{u as zn,a as Gt,t as Yt}from"./useLanguageList-CLbSClFZ.js";import{D as Kt}from"./DeleteConfirmation-BqFOMagf.js";import{C as $n}from"./CircularLoader-BWmEA7Ji.js";import{G as Xt}from"./GenericAutocomplete-D3M5FyqM.js";import{h as Zt}from"./handleScroll-BwFQoF1o.js";import{D as Hn,P as Xe}from"./PlusCircleOutlined-C_mUG7bl.js";import{C as Qt}from"./Checkbox-DyJiWu1i.js";import{u as Ie}from"./useStatusList-Dbp-x5Xm.js";import{c as Jt}from"./common-9rbEmXms.js";import{E as Sn}from"./EyeOutlined-ChV9zO9W.js";import{E as Cn}from"./EyeInvisibleOutlined-CaFaFVHk.js";import{U as fe,A as qt}from"./AttachDocumentDialog-Cqj2T6SH.js";import{D as Ue}from"./DownloadOutlined-BN5QXIj2.js";import{F as Re}from"./FormControlLabel-DB_ChWU7.js";import{D as es}from"./DeleteOutlined-awUikH6H.js";import{D as Wn}from"./DebouncedInput-DhmfX_1V.js";import{u as ns}from"./consultations-DReYVU28.js";import{R as ts}from"./RenderConsultationStatus-D5pOsWlB.js";import{f as rn}from"./consultation-B8vXld6y.js";import{R as ss}from"./RenderConsultationType-B0EO_Tu5.js";import{u as Un}from"./useFilterAndSearch-PJD0Zg8P.js";import{R as Gn}from"./RenderFilterKeys-DXC0MC7n.js";import{D as is}from"./react-datepicker-C4k7dhVo.js";import{F as Yn}from"./FilterOutlined-DlgxAz6z.js";import{A as Kn}from"./ArrowUpOutlined-C9GTlrEN.js";import{R as Mn,a as Ge}from"./RadioGroup-CZi2BDzD.js";import{T as oe}from"./TabPanel-BmkMU0MV.js";import{T as Xn,a as le}from"./Tabs-CFBjtj-9.js";const as={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},rs=as;var os={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const ls=os;var cs=function(t,i){return v.createElement(Jn,q({},t,{ref:i,icon:ls}))},ds=v.forwardRef(cs);const ms=ds,hs=Tn(e.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),us=Tn(e.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function ps(n){return et("MuiRating",n)}const xs=qn("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),De=xs,gs=["value"],fs=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function js(n){const t=n.toString().split(".")[1];return t?t.length:0}function on(n,t){if(n==null)return n;const i=Math.round(n/t)*t;return Number(i.toFixed(js(t)))}const ys=n=>{const{classes:t,size:i,readOnly:s,disabled:x,emptyValueFocused:o,focusVisible:S}=n,u={root:["root",`size${Fn(i)}`,x&&"disabled",S&&"focusVisible",s&&"readOnly"],label:["label","pristine"],labelEmptyValue:[o&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return ot(u,ps,t)},bs=Ze("span",{name:"MuiRating",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:i}=n;return[{[`& .${De.visuallyHidden}`]:t.visuallyHidden},t.root,t[`size${Fn(i.size)}`],i.readOnly&&t.readOnly]}})(({theme:n,ownerState:t})=>q({display:"inline-flex",position:"relative",fontSize:n.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",width:"min-content",WebkitTapHighlightColor:"transparent",[`&.${De.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${De.focusVisible} .${De.iconActive}`]:{outline:"1px solid #999"},[`& .${De.visuallyHidden}`]:rs},t.size==="small"&&{fontSize:n.typography.pxToRem(18)},t.size==="large"&&{fontSize:n.typography.pxToRem(30)},t.readOnly&&{pointerEvents:"none"})),Zn=Ze("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:n},t)=>[t.label,n.emptyValueFocused&&t.labelEmptyValueActive]})(({ownerState:n})=>q({cursor:"inherit"},n.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})),_s=Ze("span",{name:"MuiRating",slot:"Icon",overridesResolver:(n,t)=>{const{ownerState:i}=n;return[t.icon,i.iconEmpty&&t.iconEmpty,i.iconFilled&&t.iconFilled,i.iconHover&&t.iconHover,i.iconFocus&&t.iconFocus,i.iconActive&&t.iconActive]}})(({theme:n,ownerState:t})=>q({display:"flex",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest}),pointerEvents:"none"},t.iconActive&&{transform:"scale(1.2)"},t.iconEmpty&&{color:(n.vars||n).palette.action.disabled})),vs=Ze("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:n=>nt(n)&&n!=="iconActive",overridesResolver:(n,t)=>{const{iconActive:i}=n;return[t.decimal,i&&t.iconActive]}})(({iconActive:n})=>q({position:"relative"},n&&{transform:"scale(1.2)"}));function Ss(n){const t=kn(n,gs);return e.jsx("span",q({},t))}function wn(n){const{classes:t,disabled:i,emptyIcon:s,focus:x,getLabelText:o,highlightSelectedOnly:S,hover:u,icon:y,IconContainerComponent:g,isActive:j,itemValue:D,labelProps:R,name:T,onBlur:a,onChange:m,onClick:_,onFocus:p,readOnly:k,ownerState:l,ratingValue:c,ratingValueRounded:A}=n,r=S?D===c:D<=c,f=D<=u,F=D<=x,C=D===A,W=Dn(),ee=e.jsx(_s,{as:g,value:D,className:Ye(t.icon,r?t.iconFilled:t.iconEmpty,f&&t.iconHover,F&&t.iconFocus,j&&t.iconActive),ownerState:q({},l,{iconEmpty:!r,iconFilled:r,iconHover:f,iconFocus:F,iconActive:j}),children:s&&!r?s:y});return k?e.jsx("span",q({},R,{children:ee})):e.jsxs(v.Fragment,{children:[e.jsxs(Zn,q({ownerState:q({},l,{emptyValueFocused:void 0}),htmlFor:W},R,{children:[ee,e.jsx("span",{className:t.visuallyHidden,children:o(D)})]})),e.jsx("input",{className:t.visuallyHidden,onFocus:p,onBlur:a,onChange:m,onClick:_,disabled:i,value:D,id:W,type:"radio",name:T,checked:C})]})}const Cs=e.jsx(hs,{fontSize:"inherit"}),Ms=e.jsx(us,{fontSize:"inherit"});function ws(n){return`${n} Star${n!==1?"s":""}`}const Ts=v.forwardRef(function(t,i){const s=tt({name:"MuiRating",props:t}),{className:x,defaultValue:o=null,disabled:S=!1,emptyIcon:u=Ms,emptyLabelText:y="Empty",getLabelText:g=ws,highlightSelectedOnly:j=!1,icon:D=Cs,IconContainerComponent:R=Ss,max:T=5,name:a,onChange:m,onChangeActive:_,onMouseLeave:p,onMouseMove:k,precision:l=1,readOnly:c=!1,size:A="medium",value:r}=s,f=kn(s,fs),F=Dn(a),[C,W]=st({controlled:r,default:o,name:"Rating"}),ee=on(C,l),z=it(),[{hover:J,focus:ae},U]=v.useState({hover:-1,focus:-1});let X=ee;J!==-1&&(X=J),ae!==-1&&(X=ae);const{isFocusVisibleRef:P,onBlur:_e,onFocus:O,ref:tn}=at(),[Ve,ve]=v.useState(!1),Fe=v.useRef(),Le=rt(tn,Fe,i),Be=L=>{k&&k(L);const G=Fe.current,{right:ne,left:$e,width:Se}=G.getBoundingClientRect();let Ce;z?Ce=(ne-L.clientX)/Se:Ce=(L.clientX-$e)/Se;let re=on(T*Ce+l/2,l);re=lt(re,l,T),U(ge=>ge.hover===re&&ge.focus===re?ge:{hover:re,focus:re}),ve(!1),_&&J!==re&&_(L,re)},ze=L=>{p&&p(L);const G=-1;U({hover:G,focus:G}),_&&J!==G&&_(L,G)},h=L=>{let G=L.target.value===""?null:parseFloat(L.target.value);J!==-1&&(G=J),W(G),m&&m(L,G)},$=L=>{L.clientX===0&&L.clientY===0||(U({hover:-1,focus:-1}),W(null),m&&parseFloat(L.target.value)===ee&&m(L,null))},de=L=>{O(L),P.current===!0&&ve(!0);const G=parseFloat(L.target.value);U(ne=>({hover:ne.hover,focus:G}))},sn=L=>{if(J!==-1)return;_e(L),P.current===!1&&ve(!1);const G=-1;U(ne=>({hover:ne.hover,focus:G}))},[Qn,pn]=v.useState(!1),ke=q({},s,{defaultValue:o,disabled:S,emptyIcon:u,emptyLabelText:y,emptyValueFocused:Qn,focusVisible:Ve,getLabelText:g,icon:D,IconContainerComponent:R,max:T,precision:l,readOnly:c,size:A}),me=ys(ke);return e.jsxs(bs,q({ref:Le,onMouseMove:Be,onMouseLeave:ze,className:Ye(me.root,x,c&&"MuiRating-readOnly"),ownerState:ke,role:c?"img":null,"aria-label":c?g(X):null},f,{children:[Array.from(new Array(T)).map((L,G)=>{const ne=G+1,$e={classes:me,disabled:S,emptyIcon:u,focus:ae,getLabelText:g,highlightSelectedOnly:j,hover:J,icon:D,IconContainerComponent:R,name:F,onBlur:sn,onChange:h,onClick:$,onFocus:de,ratingValue:X,ratingValueRounded:ee,readOnly:c,ownerState:ke},Se=ne===Math.ceil(X)&&(J!==-1||ae!==-1);if(l<1){const Ce=Array.from(new Array(1/l));return e.jsx(vs,{className:Ye(me.decimal,Se&&me.iconActive),ownerState:ke,iconActive:Se,children:Ce.map((re,ge)=>{const an=on(ne-1+(ge+1)*l,l);return e.jsx(wn,q({},$e,{isActive:!1,itemValue:an,labelProps:{style:Ce.length-1===ge?{}:{width:an===X?`${(ge+1)*l*100}%`:"0%",overflow:"hidden",position:"absolute"}}}),an)})},ne)}return e.jsx(wn,q({},$e,{isActive:Se,itemValue:ne}),ne)}),!c&&!S&&e.jsxs(Zn,{className:Ye(me.label,me.labelEmptyValue),ownerState:ke,children:[e.jsx("input",{className:me.visuallyHidden,value:"",id:`${F}-empty`,type:"radio",name:F,checked:ee==null,onFocus:()=>pn(!0),onBlur:()=>pn(!1),onChange:h}),e.jsx("span",{className:me.visuallyHidden,children:y})]})]}))}),Fs=Ts;Ct({heading:{width:"50% !important"},text:{width:"50% !important",overflowWrap:"break-word",textAlign:"right"}});const ks=()=>{const n=H(),t=se(i=>i.app.doctor);return e.jsxs("div",{children:[e.jsxs(w,{variant:"h6",color:"secondary",sx:{textTransform:"uppercase"},children:[n.formatMessage({id:"profile.personalInfoTitle"})," "]}),e.jsx(ie,{sx:{my:1}}),e.jsxs(An,{component:"nav","aria-label":"main mailbox folders  ",sx:{py:0,"& .MuiListItem-root":{p:0,py:"4px",display:"block"}},children:[e.jsx(te,{children:e.jsxs(M,{sx:{display:"inline"},children:[e.jsxs(w,{variant:"body1",color:"secondary",className:"typography-inline",children:[n.formatMessage({id:"profile.id"}),":  "]}),e.jsxs(w,{variant:"body1",className:"typography-inline",children:[t==null?void 0:t.id," "]})]})}),e.jsx(te,{children:e.jsxs(M,{sx:{display:"inline"},children:[e.jsxs(w,{variant:"body1",color:"secondary",className:"typography-inline",children:[n.formatMessage({id:"profile.gender"}),":  "]}),e.jsx(Y,{className:"typography-inline",value:t==null?void 0:t.gender,renderFunction:i=>e.jsx(St,{gender:i})})]})}),e.jsx(te,{children:e.jsxs(M,{sx:{display:"inline"},children:[e.jsxs(w,{variant:"body1",color:"secondary",className:"typography-inline",children:[n.formatMessage({id:"profile.nationality"}),":  "]}),e.jsx(Y,{className:"typography-inline",value:t==null?void 0:t.nationality,renderFunction:i=>e.jsx(bn,{code:i})})]})}),e.jsx(te,{children:e.jsxs(M,{sx:{display:"inline"},children:[e.jsxs(w,{variant:"body1",color:"secondary",className:"typography-inline",children:[n.formatMessage({id:"profile.nationalIdIqamaNumber"}),":  "]}),e.jsx(Y,{className:"typography-inline",value:t==null?void 0:t.national_id})]})}),e.jsx(te,{children:e.jsxs(M,{sx:{display:"inline"},children:[e.jsxs(w,{variant:"body1",color:"secondary",className:"typography-inline",children:[n.formatMessage({id:"profile.dob"}),":  "]}),e.jsxs(w,{variant:"body1",className:"typography-inline",children:[V(t==null?void 0:t.dob).format(Ke)," "]}),e.jsx(Y,{className:"typography-inline",value:t==null?void 0:t.dob,renderFunction:i=>V(i).format(Ke)})]})}),e.jsx(te,{children:e.jsxs(M,{sx:{display:"inline"},children:[e.jsxs(w,{variant:"body1",color:"secondary",className:"typography-inline",children:[n.formatMessage({id:"profile.country"}),":  "]}),e.jsx(Y,{className:"typography-inline",value:t==null?void 0:t.country,renderFunction:i=>e.jsx(bn,{code:i})})]})}),e.jsx(te,{children:e.jsxs(M,{sx:{display:"inline"},children:[e.jsxs(w,{variant:"body1",color:"secondary",className:"typography-inline",children:[n.formatMessage({id:"profile.city"}),":  "]}),e.jsx(Y,{className:"typography-inline",value:t==null?void 0:t.city})]})}),e.jsx(te,{children:e.jsxs(M,{sx:{display:"inline"},children:[e.jsxs(w,{variant:"body1",color:"secondary",className:"typography-inline",children:[n.formatMessage({id:"profile.phoneNo"}),":  "]}),e.jsx(Y,{className:"typography-inline",value:Rn(t==null?void 0:t.phone_number)})]})}),e.jsx(te,{children:e.jsxs(M,{sx:{display:"inline"},children:[e.jsxs(w,{variant:"body1",color:"secondary",className:"typography-inline",children:[n.formatMessage({id:"profile.email"}),":  "]}),e.jsx(Y,{className:"typography-inline",value:t==null?void 0:t.email})]})})]}),e.jsxs(w,{sx:{mt:3},variant:"h6",color:"secondary",children:[n.formatMessage({id:"profile.bio"})," "]}),e.jsxs(w,{component:"div",children:[n.formatMessage({id:"profile.bioDescEn"})," "]}),e.jsxs(w,{variant:"body1",color:"secondary",children:[t==null?void 0:t.bio.en," "]}),e.jsxs(w,{component:"div",children:[n.formatMessage({id:"profile.bioDescAr"})," "]}),e.jsx(w,{dir:"rtl",variant:"body1",color:"secondary",children:t==null?void 0:t.bio.ar})]})},Ds=ks,As=n=>({name_en:n==null?void 0:n.name.en,name_ar:n==null?void 0:n.name.ar,gender:n==null?void 0:n.gender,nationality:n==null?void 0:n.nationality,national_id:n==null?void 0:n.national_id,dob:V(n==null?void 0:n.dob),photo:n==null?void 0:n.photo,country:n==null?void 0:n.country,city:n==null?void 0:n.city,phone_number:Rn(n==null?void 0:n.phone_number),email:n==null?void 0:n.email,bio_en:n==null?void 0:n.bio.en,bio_ar:n==null?void 0:n.bio.ar}),Rs=V(new Date);function Is({open:n,handleClose:t}){const i=dn(),s=H(),x=se(r=>r.app.doctor),[o,S]=v.useState(void 0),{lang:u}=be(),y=zt(),g=$t(),[j,D]=v.useState(`${x&&(x!=null&&x.photo)?x.photo:""}`);v.useEffect(()=>{o&&(D(URL.createObjectURL(o)),ct(o,r=>{A("photo",r)}))},[o]);const R=v.useMemo(()=>As(x),[x]),T=ue({initialValues:R,validationSchema:Et(s),enableReinitialize:!0,onSubmit:async(r,{setSubmitting:f})=>{try{let F={...r,dob:new Date(r==null?void 0:r.dob).toISOString(),phone_number:dt(r.phone_number),name:{en:r==null?void 0:r.name_en,ar:r==null?void 0:r.name_ar},bio:{en:r==null?void 0:r.bio_en,ar:r==null?void 0:r.bio_ar}};F.photo.includes("http")&&delete F.photo,delete F.name_en,delete F.name_ar,delete F.bio_en,delete F.bio_ar,await je(x==null?void 0:x.id,F).then(C=>{Z(s.formatMessage({id:"doctor.personalinfoUpdateSuccess"})),f(!1),t()})}catch(F){f(!1),console.error(F)}}}),{errors:a,touched:m,handleSubmit:_,values:p,isSubmitting:k,handleBlur:l,getFieldProps:c,setFieldValue:A}=T;return e.jsx(e.Fragment,{children:n&&e.jsx(Qe,{open:n,handleClose:t,children:e.jsx(pe,{value:T,children:e.jsx(Te,{dateAdapter:Je,children:e.jsxs(xe,{autoComplete:"off",noValidate:!0,onSubmit:_,children:[e.jsx(qe,{children:s.formatMessage({id:"common.updateInformation"})}),e.jsx(ie,{}),e.jsx(en,{sx:{p:2.5},children:e.jsxs(d,{container:!0,spacing:3,children:[e.jsxs(d,{item:!0,xs:12,md:3,children:[e.jsxs(b,{direction:"row",justifyContent:"center",sx:{mt:3},children:[e.jsxs(In,{htmlFor:"change-avtar",sx:{position:"relative",borderRadius:"50%",overflow:"hidden","&:hover .MuiBox-root":{opacity:1},cursor:"pointer"},children:[e.jsx(mn,{alt:"Avatar 1",src:j,sx:{width:72,height:72,border:"1px dashed"}}),e.jsx(M,{sx:{position:"absolute",top:0,left:0,background:i.palette.mode===mt.DARK?"rgba(255, 255, 255, .75)":"rgba(0,0,0,.65)",width:"100%",height:"100%",opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(b,{spacing:.5,alignItems:"center",children:[e.jsx(Pt,{style:{color:i.palette.secondary.lighter,fontSize:"2rem"}}),e.jsx(w,{sx:{color:"secondary.lighter"},children:s.formatMessage({id:"common.upload"})})]})})]}),e.jsx(B,{type:"file",id:"change-avtar",placeholder:"Outlined",variant:"outlined",inputProps:{accept:"image/*"},sx:{display:"none"},onChange:r=>{var f;return S((f=r.target.files)==null?void 0:f[0])}})]}),e.jsx(b,{direction:"row",justifyContent:"center",children:m.photo&&a.photo&&e.jsx(N,{error:!0,id:"helper-image",children:a==null?void 0:a.photo})})]}),e.jsx(d,{item:!0,xs:12,md:8,children:e.jsxs(d,{container:!0,spacing:3,children:[e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"name_en",children:s.formatMessage({id:"profile.nameEn"})}),e.jsx(B,{fullWidth:!0,id:"name_en",placeholder:s.formatMessage({id:"profile.nameEn"}),...c("name_en"),error:!!(m.name_en&&a.name_en)})]}),m.name_en&&a.name_en&&e.jsx(N,{error:!0,id:"helper-name_en",children:a==null?void 0:a.name_en})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"name_ar",children:s.formatMessage({id:"profile.nameAr"})}),e.jsx(B,{fullWidth:!0,id:"name_ar",placeholder:s.formatMessage({id:"profile.nameAr"}),...c("name_ar"),error:!!(m.name_ar&&a.name_ar)})]}),m.name_ar&&a.name_ar&&e.jsx(N,{error:!0,id:"helper-name_ar",children:a==null?void 0:a.name_ar})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"email",children:s.formatMessage({id:"profile.email"})}),e.jsx(B,{fullWidth:!0,id:"email",placeholder:s.formatMessage({id:"profile.email"}),...c("email"),error:!!(m.email&&a.email)})]}),m.email&&a.email&&e.jsx(N,{error:!0,id:"helper-email",children:a==null?void 0:a.email})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"phone_number",children:s.formatMessage({id:"profile.phoneNo"})}),e.jsx(Bt,{id:"phone_number",name:"phone_number",format:"+### ## ### ####",mask:"_",placeholder:"+966 5",value:p.phone_number,onValueChange:r=>T.setFieldValue("phone_number",r.formattedValue),onBlur:T.handleBlur,customInput:B})]}),m.phone_number&&a.phone_number&&e.jsx(N,{error:!0,id:"helper-phone_number",children:a==null?void 0:a.phone_number})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"nationality",children:s.formatMessage({id:"profile.nationality"})}),e.jsx(ce,{fullWidth:!0,children:e.jsx(vn,{id:"nationality",fullWidth:!0,value:g==null?void 0:g.content.filter(r=>r.code===(p==null?void 0:p.nationality))[0],onChange:(r,f)=>{A("nationality",f===null?"":f==null?void 0:f.code)},options:g==null?void 0:g.content,autoHighlight:!0,isOptionEqualToValue:(r,f)=>r.code===(f==null?void 0:f.code),getOptionLabel:r=>r.label[u],renderOption:({key:r,...f},F)=>e.jsxs(M,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...f,children:[F.code&&e.jsx("img",{loading:"lazy",width:"20",src:`https://flagcdn.com/w20/${F.code.toLowerCase()}.png`,srcSet:`https://flagcdn.com/w40/${F.code.toLowerCase()}.png 2x`,alt:""}),F.label[u],F.code&&`(${F.code}) ${F.phone}`]},r),renderInput:r=>e.jsx(B,{...r,placeholder:s.formatMessage({id:"profile.nationality"}),...c("nationality"),error:!!(m.nationality&&a.nationality),inputProps:{...r.inputProps}})})})]}),m.nationality&&a.nationality&&e.jsx(N,{error:!0,id:"helper-nationality",children:a==null?void 0:a.nationality})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"national_id",children:s.formatMessage({id:"profile.nationalIdIqamaNumber"})}),e.jsx(B,{fullWidth:!0,id:"national_id",placeholder:s.formatMessage({id:"profile.nationalIdIqamaNumber"}),...c("national_id"),error:!!(m.national_id&&a.national_id)})]}),m.national_id&&a.national_id&&e.jsx(N,{error:!0,id:"helper-national_id",children:a==null?void 0:a.national_id})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"country",children:s.formatMessage({id:"profile.country"})}),e.jsx(ce,{fullWidth:!0,children:e.jsx(vn,{id:"country",fullWidth:!0,value:g==null?void 0:g.content.filter(r=>r.code===(p==null?void 0:p.country))[0],onBlur:l,onChange:(r,f)=>{A("country",f===null?"":f.code)},options:g==null?void 0:g.content,autoHighlight:!0,isOptionEqualToValue:(r,f)=>r.code===(f==null?void 0:f.code),getOptionLabel:r=>r.label[u],renderOption:({key:r,...f},F)=>e.jsxs(M,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...f,children:[F.code&&e.jsx("img",{loading:"lazy",width:"20",src:`https://flagcdn.com/w20/${F.code.toLowerCase()}.png`,srcSet:`https://flagcdn.com/w40/${F.code.toLowerCase()}.png 2x`,alt:""}),F.label[u],F.code&&`(${F.code}) ${F.phone}`]},r),renderInput:r=>e.jsx(B,{...r,placeholder:s.formatMessage({id:"profile.country"}),...c("country"),inputProps:{...r.inputProps}})})})]}),m.country&&a.country&&e.jsx(N,{error:!0,id:"helper-country",children:a==null?void 0:a.country})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"city",children:s.formatMessage({id:"profile.city"})}),e.jsx(B,{fullWidth:!0,id:"city",placeholder:s.formatMessage({id:"profile.city"}),...c("city"),error:!!(m.city&&a.city)})]}),m.city&&a.city&&e.jsx(N,{error:!0,id:"helper-city",children:a==null?void 0:a.city})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"dob",children:s.formatMessage({id:"profile.dob"})}),e.jsx(Te,{dateAdapter:Vn,children:e.jsx(Ln,{format:Pn,value:p==null?void 0:p.dob,maxDate:Rs,onChange:r=>A("dob",r),name:"dob"})})]}),m.dob&&a.dob&&e.jsx(N,{error:!0,id:"helper-dob",children:a==null?void 0:a.dob})]}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"gender",children:s.formatMessage({id:"profile.gender"})}),e.jsx(ce,{fullWidth:!0,children:e.jsx(he,{id:"gender",displayEmpty:!0,value:p.gender,onChange:r=>A("gender",r.target.value),children:y==null?void 0:y.content.map(r=>e.jsx(K,{value:r.value,children:r.label[u]},r.value))})})]})}),e.jsxs(d,{item:!0,xs:12,sm:12,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"bio_en",children:s.formatMessage({id:"profile.bioDescEn"})}),e.jsx(B,{fullWidth:!0,id:"bio_en",multiline:!0,placeholder:s.formatMessage({id:"profile.bioDescEn"}),...c("bio_en"),error:!!(m.bio_en&&a.bio_en)})]}),m.bio_en&&a.bio_en&&e.jsx(N,{error:!0,id:"helper-bio_en",children:a==null?void 0:a.bio_en})]}),e.jsxs(d,{item:!0,xs:12,sm:12,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"bio_ar",children:s.formatMessage({id:"profile.bioDescAr"})}),e.jsx(B,{fullWidth:!0,id:"bio_ar",multiline:!0,dir:"rtl",placeholder:s.formatMessage({id:"profile.bioDescAr"}),...c("bio_ar"),error:!!(m.bio_ar&&a.bio_ar)})]}),m.bio_ar&&a.bio_ar&&e.jsx(N,{error:!0,id:"helper-bio_ar",children:a==null?void 0:a.bio_ar})]})]})})]})}),e.jsx(ie,{}),e.jsx(nn,{sx:{p:2.5},children:e.jsx(d,{container:!0,justifyContent:"right",alignItems:"center",children:e.jsx(d,{item:!0,children:e.jsxs(b,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(I,{color:"error",onClick:t,children:s.formatMessage({id:"common.cancel"})}),e.jsx(Ee,{type:"submit",loading:k,loadingIndicator:s.formatMessage({id:"common.processing"}),variant:"contained",children:s.formatMessage({id:"common.updateInformation"})})]})})})})]})})})})})}function Ps({open:n,handleClose:t,handleSubmit:i}){const s=H();return e.jsx(Bn,{title:s.formatMessage({id:"doctor.approve.title"}),open:n,handleClose:t,handleSubmit:i,actionTitle:s.formatMessage({id:"common.accept"}),children:e.jsx(b,{spacing:1,children:e.jsx(w,{children:s.formatMessage({id:"doctor.approve.subTitle"})})})})}function Es({open:n,handleClose:t,handleSubmit:i}){const[s,x]=v.useState(""),o=H(),S=u=>{x(u.target.value)};return e.jsx(Bn,{title:o.formatMessage({id:"doctor.reject.title"}),open:n,handleClose:t,actionTitle:o.formatMessage({id:"common.confirm"}),actionButton:e.jsx(I,{type:"button",disabled:(s==null?void 0:s.length)===0,onClick:()=>i(s),variant:"contained",children:o.formatMessage({id:"common.confirm"})}),children:e.jsx(b,{spacing:1,children:e.jsx(B,{multiline:!0,fullWidth:!0,value:s,onChange:S,id:"reason",placeholder:o.formatMessage({id:"doctor.reject.title"})})})})}function ia({requestMode:n,rejectMode:t}){var m;const{id:i}=Oe(),{lang:s}=be(),x=ht(),[o,S]=v.useState(!1),u=H(),y=se(_=>_.app.doctor),[g,j]=v.useState(!1),[D,R]=v.useState(!1),T=async()=>{try{await Mt(Number(i)).then(_=>{Z(u.formatMessage({id:"doctor.approve.approveSuccess"})),j(!1),x("/doctor/list")})}catch(_){console.log(_)}},a=async _=>{try{await wt(Number(i),{rejection_reason:_}).then(p=>{Z(u.formatMessage({id:"doctor.reject.rejectSuccess"})),R(!1),x("/doctor/list")})}catch(p){console.log(p)}};return e.jsxs(Q,{children:[e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,children:e.jsxs(b,{spacing:2.5,alignItems:"center",children:[e.jsx(In,{htmlFor:"change-avtar",sx:{position:"relative",borderRadius:"50%",overflow:"hidden","&:hover .MuiBox-root":{opacity:1},cursor:"pointer"},children:e.jsx(mn,{alt:"Avatar 1",src:y==null?void 0:y.photo,sx:{width:124,height:124,border:"1px dashed"}})}),e.jsxs(b,{spacing:.5,alignItems:"center",children:[e.jsx(w,{variant:"h5",children:y==null?void 0:y.name[s]}),e.jsx(w,{color:"secondary",children:(m=y==null?void 0:y.speciality)==null?void 0:m.speciality_name[s]})]}),n&&!t&&e.jsxs(b,{spacing:2,direction:"row",children:[e.jsx(I,{variant:"outlined",onClick:()=>R(!0),startIcon:e.jsx(Ht,{}),children:u.formatMessage({id:"common.reject"})}),e.jsx(I,{variant:"outlined",onClick:()=>j(!0),startIcon:e.jsx(ms,{}),children:u.formatMessage({id:"common.accept"})})]})]})}),e.jsx(d,{item:!0,sm:3,sx:{display:{sm:"block",md:"none"}}}),e.jsx(d,{item:!0,xs:12,children:e.jsx(Ds,{})}),e.jsx(d,{item:!0,xs:12,display:"flex",sx:{mt:1},justifyContent:"center",children:!n&&e.jsx(I,{onClick:()=>S(!0),variant:"outlined",startIcon:e.jsx(un,{}),children:u.formatMessage({id:"profile.editInformation"})})})]}),o&&e.jsx(Is,{open:o,handleClose:()=>S(!1)}),g&&e.jsx(Ps,{open:g,handleSubmit:T,handleClose:()=>j(!1)}),D&&e.jsx(Es,{open:D,handleSubmit:a,handleClose:()=>R(!1)})]})}const Os=({level:n})=>{const{lang:t}=be(),i=zn(),s=v.useMemo(()=>{var x;return(x=i==null?void 0:i.content)==null?void 0:x.find(o=>o.value===n)},[n,i]);return s==null?void 0:s.label[t]},Ns=Os,Vs=V(new Date),Ls=n=>{var t;return{health_reg_no:n==null?void 0:n.health_reg_no,expire_date:V(n==null?void 0:n.expire_date),speciality_id:(t=n==null?void 0:n.speciality)==null?void 0:t.id,seniority_level:(n==null?void 0:n.seniority_level)||"",consultation_languages:n?n==null?void 0:n.consultation_languages:[],experience:n==null?void 0:n.experience,linkedin_url:n==null?void 0:n.linkedin_url,government_employee:n==null?void 0:n.government_employee,special_price:n==null?void 0:n.special_price,special_percentage:n==null?void 0:n.special_percentage}};function Bs({requestMode:n}){var Ve,ve,Fe,Le,Be,ze;const t=hn(h=>h.breakpoints.down("md")),{lang:i}=be(),[s,x]=v.useState(!1),o=se(h=>h.app.doctor),[S,u]=v.useState(),[y,g]=v.useState(),[j,D]=v.useState(null),[R,T]=v.useState([]),{data:a,setPagination:m,setFilterCriteria:_}=Wt(xt.HUNDRED),p=zn(),k=Gt(),l=se(h=>h.app.loading),c=H(),A=v.useMemo(()=>Ls(o),[o]),r=ue({initialValues:A,validationSchema:Ot(c),enableReinitialize:!0,onSubmit:async(h,{setSubmitting:$})=>{try{h.expire_date=new Date(h==null?void 0:h.expire_date).toISOString(),h.special_price!==void 0&&h.special_price!==null&&String(h.special_price).trim()!==""?h.special_price=Number(h.special_price):h.special_price=0,h.special_percentage!==void 0&&h.special_percentage!==null&&String(h.special_percentage).trim()!==""?h.special_percentage=Number(h.special_percentage):h.special_percentage=0,await je(o==null?void 0:o.id,h).then(de=>{$(!1),Z(c.formatMessage({id:"doctor.profInfoUpdateSuccess"}))})}catch{$(!1)}}}),f=(h,$)=>{x(!0),u(h),g($)},F=()=>{x(!0),u(void 0),g(void 0)},C=()=>{const h=(o==null?void 0:o.education.filter(($,de)=>de!==j))??[];je(o==null?void 0:o.id,{education:[...h]}).then($=>{Z(c.formatMessage({id:"profile.education.deleteSuccess"})),D(null)})},W=async h=>{try{if(h.fromDate=new Date(h==null?void 0:h.fromDate).toISOString(),h.toDate=new Date(h==null?void 0:h.toDate).toISOString(),y){const $=(o==null?void 0:o.education.filter((de,sn)=>sn!==S))??[];await je(o==null?void 0:o.id,{education:[h,...$]}).then(de=>{Z(c.formatMessage({id:"profile.education.updateSuccess"})),x(!1)})}else{const $=(o==null?void 0:o.education)??[];await je(o==null?void 0:o.id,{education:[h,...$]}).then(de=>{Z(c.formatMessage({id:"profile.education.addSuccess"})),x(!1)})}}catch($){console.error($)}},ee=h=>{Zt(h,{isLoading:l,responseMeta:a.meta,setPagination:m})};v.useEffect(()=>{var h;(h=a==null?void 0:a.data)!=null&&h.length&&ut(a,R,T)},[a]);const{touched:z,isSubmitting:J,handleSubmit:ae,handleBlur:U,handleChange:X,values:P,setFieldValue:_e,errors:O}=r,tn=e.jsx(M,{sx:{height:"calc(100vh - 310px)"},children:e.jsx($n,{})});return l?tn:e.jsxs(e.Fragment,{children:[e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{item:!0,xs:12,children:e.jsxs(Q,{title:c.formatMessage({id:"profile.educationTitle"}),children:[(o==null?void 0:o.education)&&((Ve=o==null?void 0:o.education)==null?void 0:Ve.length)>0&&e.jsxs(An,{sx:{py:0},children:[(ve=o==null?void 0:o.education)==null?void 0:ve.map((h,$)=>e.jsx(te,{divider:!0,secondaryAction:e.jsx(e.Fragment,{children:!n&&e.jsxs(e.Fragment,{children:[" ",e.jsx(I,{onClick:()=>{f($,h)},startIcon:e.jsx(un,{}),children:c.formatMessage({id:"common.edit"})}),e.jsx(I,{onClick:()=>{D($)},startIcon:e.jsx(Hn,{}),children:c.formatMessage({id:"common.delete"})})]})}),children:e.jsxs(d,{container:!0,spacing:t?.5:3,children:[e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(b,{spacing:.5,children:[e.jsx(w,{color:"black",variant:"h6",children:h.degree}),e.jsxs(w,{color:"secondary",variant:"caption",children:[" ",V(h.fromDate).format(xn)+" - "+V(h.toDate).format(xn)]})]})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(b,{spacing:.5,children:e.jsx(w,{color:"black",variant:"h6",children:h.institute})})})]})},$)),!n&&((Fe=o==null?void 0:o.education)==null?void 0:Fe.length)>0&&e.jsx(te,{children:e.jsx(I,{onClick:()=>{F()},variant:"text",startIcon:e.jsx(Xe,{}),children:c.formatMessage({id:"common.addMore"})})})]}),!n&&((Le=o==null?void 0:o.education)==null?void 0:Le.length)==0&&e.jsx(Me,{message:c.formatMessage({id:"profile.education.emptyEducationMessage"}),children:e.jsx(I,{onClick:()=>{x(!0)},startIcon:e.jsx(Xe,{}),children:c.formatMessage({id:"profile.education.titleAdd"})})})]})}),e.jsx(d,{item:!0,xs:12,sm:12,children:e.jsx(Q,{title:c.formatMessage({id:"profile.proInfoTitle"}),children:e.jsx(pe,{value:r,children:e.jsx(xe,{autoComplete:"off",noValidate:!0,onSubmit:ae,children:e.jsxs(d,{container:!0,spacing:3,children:[e.jsxs(d,{item:!0,xs:12,sm:12,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"health_reg_no",children:c.formatMessage({id:"profile.saudiCommRegNo"})}),n?e.jsx(Y,{value:P.health_reg_no}):e.jsx(B,{fullWidth:!0,id:"health_reg_no",placeholder:c.formatMessage({id:"profile.saudiCommRegNo"}),value:P.health_reg_no,name:"health_reg_no",onBlur:U,onChange:X,error:!!(z.health_reg_no&&O.health_reg_no)})]}),z.health_reg_no&&O.health_reg_no&&e.jsx(N,{error:!0,id:"helper-text-health_reg_no",children:O.health_reg_no})]}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"expire_date",children:c.formatMessage({id:"profile.expireDate"})}),n?e.jsx(Y,{value:V(P==null?void 0:P.expire_date).format(Ke)}):e.jsx(Te,{dateAdapter:Vn,children:e.jsx(Ln,{format:Pn,minDate:Vs,value:P==null?void 0:P.expire_date,onChange:h=>_e("expire_date",h),name:"expire_date"})})]})}),e.jsx(d,{item:!0,xs:6,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"speciality_id",children:c.formatMessage({id:"common.specialty"})}),n?e.jsx(Y,{value:(Be=R==null?void 0:R.find(h=>h.id===(P==null?void 0:P.speciality_id)))==null?void 0:Be.speciality_name[i]}):e.jsx(ce,{fullWidth:!0,children:e.jsx(Xt,{label:c.formatMessage({id:"common.selectOp"}),fieldId:"speciality_id",options:R,isLoading:l,fieldName:"speciality_name",onSearch:h=>_({...(h==null?void 0:h.length)>0&&{search:h}}),onScroll:ee})})]})}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"seniority_level",children:c.formatMessage({id:"profile.seniorityLevel"})}),n?e.jsx(Ns,{level:P.seniority_level}):e.jsx(ce,{fullWidth:!0,error:!!(z.seniority_level&&O.seniority_level),children:e.jsxs(he,{id:"seniority_level",displayEmpty:!0,value:P.seniority_level,onChange:h=>_e("seniority_level",h.target.value),children:[e.jsx(K,{value:"",disabled:!0,children:e.jsx(w,{color:"secondary",children:c.formatMessage({id:"common.selectOp"})})}),p==null?void 0:p.content.map(h=>e.jsx(K,{value:h.value,children:h.label[i]},h.value))]})})]}),z.seniority_level&&O.seniority_level&&e.jsx(N,{error:!0,id:"helper-seniority_level",children:O==null?void 0:O.seniority_level})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsxs(E,{htmlFor:"experience",children:[c.formatMessage({id:"profile.yearsOfExperience"})," "]}),n?e.jsx(Y,{value:P.experience}):e.jsx(B,{fullWidth:!0,id:"experience",placeholder:c.formatMessage({id:"profile.yearsOfExperience"}),value:P.experience,name:"experience",type:"number",onBlur:U,onChange:X,error:!!(z.experience&&O.experience)})]}),z.experience&&O.experience&&e.jsx(N,{error:!0,id:"helper-text-experience",children:O.experience})]}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{id:"consultation_languages",children:c.formatMessage({id:"profile.consultLang"})}),n?e.jsx(w,{color:"black",variant:"h6",children:(ze=o==null?void 0:o.consultation_languages)==null?void 0:ze.map(h=>e.jsx(En,{color:"default",label:h,sx:{mr:1},size:"small",variant:"light"},h))}):e.jsx(he,{multiple:!0,value:P.consultation_languages,onBlur:U,name:"consultation_languages",onChange:h=>_e("consultation_languages",h.target.value),renderValue:h=>h.join(", "),error:!!(z.consultation_languages&&O.consultation_languages),children:k==null?void 0:k.content.map(h=>{var $;return e.jsxs(K,{value:h.value,children:[e.jsx(Qt,{checked:(($=P==null?void 0:P.consultation_languages)==null?void 0:$.indexOf(h.value))>-1}),e.jsx(pt,{primary:h.label[i]})]},h.value)})}),z.consultation_languages&&O.consultation_languages&&e.jsx(N,{error:!0,id:"helper-text-consultation_languagesxperience",children:O.consultation_languages})]})}),e.jsx(d,{item:!0,xs:6,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"government_employee",children:c.formatMessage({id:"profile.workSector"})}),n?e.jsx(Y,{value:P.government_employee}):e.jsx(he,{fullWidth:!0,id:"government_employee",value:String(P.government_employee),onBlur:U,name:"government_employee",onChange:h=>_e("government_employee",h.target.value),error:!!(z.government_employee&&O.government_employee),children:Yt.map(h=>e.jsx(K,{value:h.id,children:h[i]},h.id))}),z.government_employee&&O.government_employee&&e.jsx(N,{error:!0,id:"helper-text-government_employee",children:O.government_employee})]})}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"linkedin_url",children:c.formatMessage({id:"profile.profileLinkedin"})}),n?e.jsx(Y,{value:P.linkedin_url}):e.jsx(B,{fullWidth:!0,id:"linkedin_url",placeholder:c.formatMessage({id:"profile.profileLinkedin"}),value:P.linkedin_url,name:"linkedin_url",onBlur:U,onChange:X,error:!!(z.linkedin_url&&O.linkedin_url)})]}),z.linkedin_url&&O.linkedin_url&&e.jsx(N,{error:!0,id:"helper-text-linkedin_url",children:O.linkedin_url})]}),e.jsx(d,{item:!0,xs:12,sm:12,children:e.jsxs(d,{container:!0,spacing:2,children:[e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"special_price",children:c.formatMessage({id:"profile.specialPrice"})}),n?e.jsx(Y,{value:P.special_price}):e.jsx(B,{fullWidth:!0,id:"special_price",placeholder:c.formatMessage({id:"profile.specialPrice"}),value:P.special_price,name:"special_price",type:"number",onBlur:U,onChange:X,error:!!(z.special_price&&O.special_price)})]}),z.special_price&&O.special_price&&typeof O.special_price=="string"&&e.jsx(N,{error:!0,id:"helper-text-special_price",children:O.special_price})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"special_percentage",children:c.formatMessage({id:"profile.specialPercentage"})}),n?e.jsx(Y,{value:P.special_percentage}):e.jsx(B,{fullWidth:!0,id:"special_percentage",placeholder:c.formatMessage({id:"profile.specialPercentage"}),value:P.special_percentage,name:"special_percentage",type:"number",inputProps:{min:0,max:100,step:.01},onBlur:U,onChange:X,error:!!(z.special_percentage&&O.special_percentage)})]}),z.special_percentage&&O.special_percentage&&typeof O.special_percentage=="string"&&e.jsx(N,{error:!0,id:"helper-text-special_percentage",children:O.special_percentage})]})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(b,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:e.jsx(Ee,{type:"submit",loading:J,loadingIndicator:c.formatMessage({id:"common.processing"}),variant:"contained",children:c.formatMessage({id:"common.saveChanges"})})})})]})})})})})]}),s&&e.jsx(Ut,{submit:W,education:y,open:s,handleClose:()=>x(!1)}),e.jsx(Kt,{open:j!=null&&j>=0,handleClose:()=>D(null),handleSubmit:C})]})}function zs(){const[n,t]=v.useState(!1),[i,s]=v.useState(!1),x=se(r=>r.app.doctor),[o,S]=v.useState(String(x==null?void 0:x.status)),{lang:u}=be(),y=H(),{defaultList:g}=Ie(ye.DOCTOR_STATUS),j=()=>{t(!n)},D=()=>{s(!i)},R=r=>{r.preventDefault()},T=()=>{je(x==null?void 0:x.id,{status:Number(o)}).then(r=>{Z(y.formatMessage({id:"doctor.settingTab.statusSuccess"}))})},a=ue({initialValues:{password:"",confirm:""},validationSchema:Jt(y),enableReinitialize:!0,onSubmit:async(r,{setSubmitting:f})=>{await Tt(x==null?void 0:x.id,{new_password:r==null?void 0:r.password}).then(F=>{f(!1),Z(y.formatMessage({id:"common.changePassword.passwordChangeSuccess"}))})}}),{handleSubmit:m,isSubmitting:_,touched:p,handleBlur:k,errors:l,handleChange:c,values:A}=a;return e.jsx(pe,{value:a,children:e.jsx(xe,{autoComplete:"off",noValidate:!0,onSubmit:m,children:e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,sm:12,children:e.jsx(Q,{title:y.formatMessage({id:"common.changePassword.title"}),children:e.jsxs(d,{container:!0,spacing:2,children:[e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"password",children:y.formatMessage({id:"common.changePassword.newPassword"})}),e.jsx(gn,{id:"password",placeholder:y.formatMessage({id:"common.changePassword.newPassword"}),type:n?"text":"password",value:A.password,name:"password",onBlur:k,onChange:c,endAdornment:e.jsx(ln,{position:"end",children:e.jsx(cn,{"aria-label":"toggle password visibility",onClick:j,onMouseDown:R,edge:"end",size:"large",color:"secondary",children:n?e.jsx(Sn,{}):e.jsx(Cn,{})})})})]}),p.password&&l.password&&e.jsx(N,{error:!0,id:"password-helper",children:l.password})]}),e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"password-confirm",children:y.formatMessage({id:"common.changePassword.confirmPassword"})}),e.jsx(gn,{id:"password-confirm",placeholder:y.formatMessage({id:"common.changePassword.confirmPassword"}),type:i?"text":"password",value:A.confirm,name:"confirm",onBlur:k,onChange:c,endAdornment:e.jsx(ln,{position:"end",children:e.jsx(cn,{"aria-label":"toggle password visibility",onClick:D,onMouseDown:R,edge:"end",size:"large",color:"secondary",children:i?e.jsx(Sn,{}):e.jsx(Cn,{})})}),autoComplete:"password-confirm"})]}),p.confirm&&l.confirm&&e.jsx(N,{error:!0,id:"password-confirm-helper",children:l.confirm})]}),e.jsx(d,{item:!0,xs:12,children:e.jsx(b,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:e.jsx(Ee,{type:"submit",loading:_,loadingIndicator:y.formatMessage({id:"common.processing"}),variant:"contained",children:y.formatMessage({id:"common.changePassword.title"})})})})]})})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(Q,{title:y.formatMessage({id:"doctor.settingTab.accountStatus"}),children:e.jsx(d,{container:!0,spacing:2,children:e.jsx(d,{item:!0,xs:6,children:e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,sm:12,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"status",children:y.formatMessage({id:"common.status"})}),e.jsx(ce,{fullWidth:!0,children:e.jsx(he,{id:"status",value:o,onChange:r=>{S(r.target.value)},children:g.map(r=>e.jsx(K,{value:r.value,children:r.label[u]},r.value))})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(b,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:e.jsx(I,{onClick:T,variant:"contained",children:y.formatMessage({id:"common.editStatus"})})})})]})})})})})]})})})}function $s({requestMode:n}){const[t,i]=v.useState(!1),[s,x]=v.useState(!1),[o,S]=v.useState(""),[u,y]=v.useState(null),g=H(),j=se(f=>f.app.doctor),[D,R]=v.useState(""),T=(f,F)=>{R(f),i(!0),S(F),x(!1)},a=(f,F)=>{y(f),S(F),x(!0),i(!0)},m=v.useCallback(async(f,F)=>{try{const C={attachment_type:D,file_name:F,file:f};await Ft(j==null?void 0:j.id,C).then(W=>{Z(g.formatMessage({id:"profile.attachmentTab.fileUploadSuccess"})),R(""),y(null),i(!1)})}catch(C){console.error(C)}},[j,D,g]),_=v.useCallback(async(f,F)=>{try{const C={file_name:F,file:f};await kt(j==null?void 0:j.id,u,C).then(W=>{Z(g.formatMessage({id:"profile.attachmentTab.fileReplaceSuccess"})),R(""),y(null),i(!1)})}catch(C){console.error(C)}},[j,u,g]),p=f=>{gt(f==null?void 0:f.absolute_url,f.file_name)},k=async f=>{await Dt(j==null?void 0:j.id,f).then(F=>{Z(g.formatMessage({id:"profile.attachmentTab.fileDeleteSuccess"})),R(""),i(!1)})},l=v.useMemo(()=>(j==null?void 0:j.attachments.find(f=>f.attachment_type==="NATIONAL_ID"))??null,[j==null?void 0:j.attachments]),c=v.useMemo(()=>(j==null?void 0:j.attachments.find(f=>f.attachment_type==="CV"))??null,[j==null?void 0:j.attachments]),A=v.useMemo(()=>(j==null?void 0:j.attachments.find(f=>f.attachment_type==="HEALTH_REG_NO"))??null,[j==null?void 0:j.attachments]),r=v.useMemo(()=>(j==null?void 0:j.attachments.filter(f=>f.attachment_type==="OTHERS"))??[],[j==null?void 0:j.attachments]);return e.jsxs(e.Fragment,{children:[e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{item:!0,xs:12,children:e.jsxs(Q,{title:g.formatMessage({id:"profile.nationalIdIqamaNumber"}),children:[l&&e.jsxs(b,{direction:"row",spacing:1,children:[e.jsx(M,{sx:{flexGrow:1},children:e.jsxs(He,{component:"button",variant:"h6",underline:"always",sx:{wordBreak:"break-word",whiteSpace:"normal",textAlign:"left",display:"block"},children:["  ",l.file_name]})}),e.jsxs(b,{direction:"row",spacing:2,alignItems:"flex-start",children:[e.jsx(I,{variant:"outlined",size:"small",onClick:()=>{p(l)},startIcon:e.jsx(Ue,{}),children:g.formatMessage({id:"common.download"})}),!n&&e.jsx(I,{variant:"outlined",size:"small",sx:{minWidth:"120px"},onClick:()=>a(l==null?void 0:l.id,"IMAGES"),startIcon:e.jsx(fe,{}),children:g.formatMessage({id:"profile.attachmentTab.replaceFile"})})]})]}),!l&&e.jsx(Me,{message:g.formatMessage({id:"profile.attachmentTab.emptyDocumentMessage"}),children:!n&&e.jsx(I,{onClick:()=>T("NATIONAL_ID","IMAGES"),startIcon:e.jsx(fe,{}),children:g.formatMessage({id:"common.upload"})})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(Q,{title:g.formatMessage({id:"profile.saudiCommRegNo"}),children:[A&&e.jsxs(b,{direction:"row",spacing:1,children:[e.jsx(M,{sx:{flexGrow:1},children:e.jsxs(He,{component:"button",variant:"h6",underline:"always",sx:{wordBreak:"break-word",whiteSpace:"normal",textAlign:"left",display:"block"},children:[" ",A.file_name]})}),e.jsxs(b,{direction:"row",spacing:2,alignItems:"flex-start",children:[e.jsx(I,{variant:"outlined",size:"small",onClick:()=>{p(A)},startIcon:e.jsx(Ue,{}),children:g.formatMessage({id:"common.download"})}),!n&&e.jsx(I,{variant:"outlined",size:"small",sx:{minWidth:"120px"},onClick:()=>a(A==null?void 0:A.id,"IMAGES"),startIcon:e.jsx(fe,{}),children:g.formatMessage({id:"profile.attachmentTab.replaceFile"})})]})]}),!A&&e.jsx(Me,{message:g.formatMessage({id:"profile.attachmentTab.emptyDocumentMessage"}),children:!n&&e.jsx(I,{onClick:()=>T("HEALTH_REG_NO","IMAGES"),startIcon:e.jsx(fe,{}),children:g.formatMessage({id:"common.upload"})})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(Q,{title:g.formatMessage({id:"profile.attachmentTab.cv"}),children:[c&&e.jsxs(b,{direction:"row",spacing:1,children:[e.jsx(M,{sx:{flexGrow:1},children:e.jsxs(He,{component:"button",variant:"h6",underline:"always",sx:{wordBreak:"break-word",whiteSpace:"normal",textAlign:"left",display:"block"},children:["   ",c.file_name]})}),e.jsxs(b,{direction:"row",spacing:2,alignItems:"flex-start",children:[e.jsx(I,{variant:"outlined",size:"small",onClick:()=>{p(c)},startIcon:e.jsx(Ue,{}),children:g.formatMessage({id:"common.download"})}),!n&&e.jsx(I,{variant:"outlined",size:"small",sx:{minWidth:"120px"},onClick:()=>a(c==null?void 0:c.id,"DOCS"),startIcon:e.jsx(fe,{}),children:g.formatMessage({id:"profile.attachmentTab.replaceFile"})})]})]}),!c&&e.jsx(Me,{message:g.formatMessage({id:"profile.attachmentTab.emptyDocumentMessage"}),children:!n&&e.jsx(I,{onClick:()=>T("CV","DOCS"),startIcon:e.jsx(fe,{}),children:g.formatMessage({id:"common.upload"})})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(Q,{title:g.formatMessage({id:"profile.attachmentTab.otherCertificate"}),children:[r==null?void 0:r.map(f=>e.jsxs("div",{children:[e.jsxs(b,{direction:"row",sx:{my:1},spacing:1,children:[e.jsx(M,{sx:{flexGrow:1},children:e.jsxs(He,{component:"button",variant:"h6",underline:"always",sx:{wordBreak:"break-word",whiteSpace:"normal",textAlign:"left",display:"block"},children:[" ",f.file_name]})}),e.jsxs(b,{direction:"row",spacing:2,alignItems:"flex-start",children:[e.jsx(I,{variant:"outlined",size:"small",onClick:()=>{p(f)},startIcon:e.jsx(Ue,{}),children:g.formatMessage({id:"common.download"})}),!n&&e.jsx(I,{variant:"outlined",size:"small",onClick:()=>k(f.id),startIcon:e.jsx(Hn,{}),children:g.formatMessage({id:"common.delete"})})]})]}),e.jsx(ie,{})]},f.id)),!n&&(r==null?void 0:r.length)>0&&e.jsx(I,{sx:{mt:2},variant:"text",onClick:()=>T("OTHERS","ALL"),startIcon:e.jsx(Xe,{}),children:g.formatMessage({id:"common.addMore"})}),(r==null?void 0:r.length)==0&&e.jsx(Me,{message:g.formatMessage({id:"profile.attachmentTab.emptyCertificateMessage"}),children:!n&&e.jsx(I,{onClick:()=>T("OTHERS","ALL"),startIcon:e.jsx(fe,{}),children:g.formatMessage({id:"common.upload"})})})]})})]}),t&&e.jsx(qt,{fileType:o,open:t,handleUpload:m,isReplace:s,handleReplace:_,handleClose:()=>i(!1)})]})}const Pe={availability:"/api/v1/admin/doctors/availability",doctor:"/api/v1/admin/doctors",bulkSlots:"/api/v1/admin/doctors/availability-slots/bulk-slots",availabilitySlots:"/api/v1/admin/doctors/availability-slots"};async function Hs(n){try{await Ne.put(`${Pe.bulkSlots}`,n),ft(`${Pe.doctor}/${n==null?void 0:n.doctor_id}`)}catch(t){throw t}}async function Ws(n,t){try{await Ne.post(`${Pe.availability}/${n}/enable`,{doctor_id:t})}catch(i){throw i}}async function Us(n,t){try{await Ne.post(`${Pe.availability}/${n}/disable`,{doctor_id:t})}catch(i){throw i}}async function Gs(n){try{await Ne.delete(`${Pe.availabilitySlots}/${n}/slots`)}catch(t){throw t}}const Ys=n=>({availability:n.map(i=>{const s=yt(i.slots);return{id:i.id,is_working:i.is_working,week_days:i.week_days,slots:s==null?void 0:s.map(x=>({id:x.id,start_time:yn(x.start_time),end_time:yn(x.end_time)}))}}).sort((i,s)=>i.week_days-s.week_days)});function Ks({open:n,handleClose:t}){const i=H(),s=se(T=>T.app.doctor),x=v.useMemo(()=>Ys((s==null?void 0:s.availability)??[]),[]),o=ue({initialValues:x,validationSchema:Nt(),enableReinitialize:!0,onSubmit:async(T,{setSubmitting:a})=>{try{const m=T==null?void 0:T.availability.map(p=>({id:p.id,slots:p.slots.map(k=>({...k,start_time:fn(k.start_time),end_time:fn(k.end_time)}))})),_={doctor_id:s==null?void 0:s.id,availability:m};await Hs(_).then(p=>{Z(i.formatMessage({id:"profile.scheduleTab.scheduleUpdateSuccess"})),a(!1),t()})}catch(m){a(!1),console.error(m)}}}),S=(T,a,m)=>{var c,A,r,f;const _=o.errors.availability,p=o.touched.availability,k=_&&Array.isArray(_)?(A=(c=_[T])==null?void 0:c.slots)==null?void 0:A[a]:void 0,l=p&&Array.isArray(p)?(f=(r=p[T])==null?void 0:r.slots)==null?void 0:f[a]:void 0;if(k&&typeof k!="string"){const F=k[m];return(l?l[m]:!1)&&F?F:void 0}},u=T=>{var _;const a=o.errors.availability,m=a&&Array.isArray(a)?(_=a[T])==null?void 0:_.slots:void 0;if(typeof m=="string")return m},y=async(T,a,m)=>{var k;o.setFieldValue(`availability.${a}.is_working`,m);const _=m?[{start_time:null,end_time:null}]:[];T.replace(a,{...o.values.availability[a],slots:_,is_working:m});const p=(k=o.values.availability[a])==null?void 0:k.id;m?Ws(p,s==null?void 0:s.id).then(l=>{console.log("Day enabled")}):(await Us(p,s==null?void 0:s.id).then(l=>{console.log("Day enabled")}),await Gs(p).then(l=>{console.log("Slots deleted")}))},{errors:g,handleSubmit:j,values:D,isSubmitting:R}=o;return e.jsx(e.Fragment,{children:n&&e.jsx(Qe,{open:n,handleClose:t,maxWidth:780,children:e.jsx(pe,{value:o,children:e.jsx(Te,{dateAdapter:Je,children:e.jsxs(xe,{autoComplete:"off",noValidate:!0,onSubmit:j,children:[e.jsx(qe,{children:i.formatMessage({id:"profile.editScheduleTab.title"})}),e.jsx(M,{padding:"0 0 10px 20px",children:e.jsx(w,{variant:"body1",children:i.formatMessage({id:"profile.editScheduleTab.subTitle"})})}),e.jsx(ie,{}),e.jsx(en,{sx:{p:2.5},children:e.jsx(jn,{name:"availability",render:T=>{var a;return e.jsx(e.Fragment,{children:(a=D==null?void 0:D.availability)==null?void 0:a.map((m,_)=>e.jsxs(we,{variant:"outlined",sx:{p:2,marginTop:1},children:[e.jsxs(M,{display:"flex",justifyContent:"space-between",children:[e.jsx(w,{variant:"h5",children:e.jsx(Nn,{dayNumber:m==null?void 0:m.week_days})}),e.jsx(Re,{control:e.jsx(jt,{checked:m.is_working,onChange:p=>{y(T,_,p.target.checked)},sx:{mt:0}}),label:"",labelPlacement:"start"})]}),e.jsx(M,{display:"flex",justifyContent:"center",children:e.jsx(w,{color:"error",variant:"body1",children:u(_)})}),e.jsx(e.Fragment,{children:(m==null?void 0:m.is_working)&&e.jsx(jn,{name:`availability.${_}.slots`,render:p=>{var k;return e.jsxs(e.Fragment,{children:[m.slots.map((l,c)=>e.jsxs(d,{container:!0,spacing:3,marginTop:.1,children:[e.jsx(d,{item:!0,xs:12,sm:5,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{children:i.formatMessage({id:"profile.editScheduleTab.from"})}),e.jsx(_n,{ampm:!1,openTo:"hours",views:["hours","minutes"],format:"HH:mm",value:l.start_time,onChange:A=>{o.setFieldValue(`availability.${_}.slots.${c}.start_time`,A)},slots:{textField:B},slotProps:{textField:{fullWidth:!0,error:!!S(_,c,"start_time"),helperText:S(_,c,"start_time")}}})]})}),e.jsx(d,{item:!0,xs:12,sm:5,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"name_en",children:i.formatMessage({id:"profile.editScheduleTab.to"})}),e.jsx(_n,{ampm:!1,openTo:"hours",views:["hours","minutes"],format:"HH:mm",value:l.end_time,onChange:A=>{o.setFieldValue(`availability.${_}.slots.${c}.end_time`,A)},slots:{textField:B},slotProps:{textField:{fullWidth:!0,error:!!S(_,c,"end_time"),helperText:S(_,c,"end_time")}}})]})}),e.jsx(d,{item:!0,xs:12,sm:2,display:"flex",alignItems:"center",position:"relative",justifyContent:"flex-start",children:c>0&&e.jsx(M,{display:"flex",position:"absolute",left:"8px",top:"54px",justifyContent:"center",alignItems:"center",children:e.jsx(cn,{"aria-label":"delete",color:"error",onClick:()=>{p.remove(c)},children:e.jsx(es,{})})})})]},c)),((k=m==null?void 0:m.slots)==null?void 0:k.length)>0&&e.jsx(M,{marginTop:1,children:e.jsx(I,{variant:"text",onClick:()=>{p.push({start_time:null,end_time:null})},startIcon:e.jsx(Xe,{}),children:i.formatMessage({id:"common.addMore"})})})]})}})})]},_))})}})}),e.jsx(ie,{}),e.jsx(nn,{sx:{p:2.5},children:e.jsx(d,{container:!0,justifyContent:"right",alignItems:"center",children:e.jsx(d,{item:!0,children:e.jsxs(b,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(I,{color:"error",onClick:t,children:i.formatMessage({id:"common.cancel"})}),e.jsx(Ee,{type:"submit",loading:R,loadingIndicator:i.formatMessage({id:"common.processing"}),variant:"contained",children:i.formatMessage({id:"profile.editScheduleTab.title"})})]})})})})]})})})})})}const Xs=()=>{const n=H(),[t,i]=v.useState(!1),s=se(p=>p.app.doctor),x=se(p=>p.app.loading),o=v.useMemo(()=>({consultation:s==null?void 0:s.time_before_consultation}),[]),S=ue({initialValues:o,validationSchema:Vt(),enableReinitialize:!0,onSubmit:async(p,{setSubmitting:k})=>{try{const l={time_before_consultation:p==null?void 0:p.consultation};await je(s==null?void 0:s.id,l).then(c=>{Z(n.formatMessage({id:"profile.scheduleTab.timeUpdateSucccess"}))})}catch(l){k(!1),console.error(l)}}}),u=v.useMemo(()=>{var k;return(((k=s==null?void 0:s.availability)==null?void 0:k.filter(l=>{var c;return((c=l.slots)==null?void 0:c.length)>0}).sort((l,c)=>l.week_days-c.week_days))??[]).map(l=>{const c=[];return{...{...l,time_slots:l.time_slots,slots:l.slots.map(r=>{let f=new Date(`1970-01-01T${r.start_time}Z`);const F=new Date(`1970-01-01T${r.end_time}Z`);for(;f<F;){const C=new Date(f.getTime()+9e5);c.push({start_time:f.toISOString().substring(11,16),end_time:C.toISOString().substring(11,16)}),f=C}return{...r}})},interval:c.sort((r,f)=>r.start_time.localeCompare(f.start_time))}})},[s]),y=v.useMemo(()=>(u==null?void 0:u.length)>0,[u]),{errors:g,handleSubmit:j,handleBlur:D,handleChange:R,setFieldValue:T,values:a,touched:m}=S,_=e.jsx(M,{sx:{height:"calc(100vh - 310px)"},children:e.jsx($n,{})});return x?_:e.jsxs(e.Fragment,{children:[e.jsxs(Q,{content:!0,children:[e.jsxs(M,{display:"flex",justifyContent:"space-between",children:[e.jsx(w,{variant:"h4",children:n.formatMessage({id:"profile.scheduleTab.availableTime"})}),e.jsx(b,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(I,{variant:"outlined",onClick:()=>i(!0),startIcon:e.jsx(un,{}),children:n.formatMessage({id:"profile.editScheduleTab.title"})})})]}),y&&e.jsx(M,{mt:2,children:u.map(p=>{var k;return e.jsxs(M,{children:[e.jsx(Nn,{dayNumber:p.week_days}),e.jsx(d,{container:!0,spacing:1,sx:{my:2},children:(k=p==null?void 0:p.interval)==null?void 0:k.map(l=>e.jsx(d,{item:!0,sm:2,children:e.jsx(En,{color:"default",sx:{borderRadius:"15px"},label:`${l.start_time}- ${l.end_time}`,size:"small",variant:"outlined"})}))})]},p.id)})}),!y&&e.jsx(M,{mt:4,children:e.jsx(Me,{message:n.formatMessage({id:"profile.scheduleTab.message"})})})]}),e.jsx("br",{}),e.jsx(Q,{content:!0,children:e.jsx(pe,{value:S,children:e.jsxs(xe,{autoComplete:"off",noValidate:!0,onSubmit:j,children:[e.jsx(w,{variant:"h4",children:n.formatMessage({id:"profile.scheduleTab.timeBeforeConsult"})}),e.jsx(d,{container:!0,children:e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsxs(b,{spacing:1,marginTop:"20px",children:[e.jsx(E,{htmlFor:"password",children:n.formatMessage({id:"profile.scheduleTab.timeBeforeConsult"})}),e.jsx(B,{variant:"outlined",type:"number",id:"consultation",name:"consultation",onBlur:D,onChange:R,value:a.consultation,InputProps:{endAdornment:e.jsx(ln,{position:"end",children:e.jsx(w,{variant:"body2",sx:{color:"gray"},children:"Min"})})}})]}),m.consultation&&g.consultation&&e.jsx(N,{error:!0,id:"password-helper",children:g.consultation})]})}),e.jsx("br",{}),e.jsx(I,{variant:"contained",type:"submit",children:n.formatMessage({id:"common.saveChanges"})})]})})}),t&&e.jsx(Ks,{open:t,handleClose:()=>{i(!1)}})]})},Zs=Xs;function Qs({open:n,handleClose:t,initialValue:i,resetFilter:s,setCriteria:x}){var p,k;const{lang:o}=be(),S=H(),{statusList:u}=Ie(ye.CONSULTATION_STATUS),{statusList:y}=Ie(ye.CONSULTATION_TYPE),g=v.useMemo(()=>rn.cast(i),[rn]),j=ue({initialValues:g,validationSchema:rn,enableReinitialize:!0,onSubmit:async(l,{setSubmitting:c})=>{try{const A={...(l==null?void 0:l.consultation_type)&&{consultation_type:l.consultation_type},...typeof(l==null?void 0:l.status)=="number"&&{status:l.status}};if(Object.keys(A).length===0)return;x(A),t()}catch(A){console.error(A)}}}),D=()=>{s(),m(),t()},{handleSubmit:R,isSubmitting:T,values:a,resetForm:m,setFieldValue:_}=j;return e.jsx(e.Fragment,{children:n&&e.jsx(Qe,{open:n,handleClose:t,maxWidth:550,children:e.jsx(pe,{value:j,children:e.jsx(Te,{dateAdapter:Je,children:e.jsxs(xe,{autoComplete:"off",noValidate:!0,onSubmit:R,children:[e.jsx(qe,{children:S.formatMessage({id:"doctor.consultationTab.filterTitle"})}),e.jsx(ie,{}),e.jsx(en,{sx:{p:2.5},children:e.jsxs(d,{container:!0,spacing:1,children:[e.jsx(d,{item:!0,xs:12,md:12,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"status",children:S.formatMessage({id:"doctor.consultationTab.consultationStatus"})}),e.jsx(ce,{fullWidth:!0,children:e.jsxs(he,{id:"status",displayEmpty:!0,value:a.status,onChange:l=>_("status",l.target.value),children:[e.jsx(K,{value:"",children:e.jsx("em",{children:S.formatMessage({id:"common.none"})})}),(p=u==null?void 0:u.content)==null?void 0:p.map(l=>e.jsx(K,{value:l.value,children:l.label[o]},l.value))]})})]})}),e.jsx(d,{item:!0,xs:12,md:12,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"consultation_type",children:S.formatMessage({id:"common.type"})}),e.jsx(ce,{fullWidth:!0,children:e.jsxs(he,{id:"consultation_type",displayEmpty:!0,value:a.consultation_type,onChange:l=>_("consultation_type",l.target.value),children:[e.jsx(K,{value:"",children:e.jsx("em",{children:S.formatMessage({id:"common.none"})})}),(k=y==null?void 0:y.content)==null?void 0:k.map(l=>e.jsx(K,{value:l.value,children:l.label[o]},l.value))]})})]})})]})}),e.jsx(ie,{}),e.jsx(nn,{sx:{p:2.5},children:e.jsx(d,{container:!0,justifyContent:"right",alignItems:"center",children:e.jsx(d,{item:!0,md:12,children:e.jsxs(M,{display:"flex",justifyContent:"space-between",children:[e.jsx(I,{color:"secondary",onClick:()=>D(),children:S.formatMessage({id:"doctor.filter.clear"})}),e.jsxs(b,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(I,{color:"error",onClick:t,children:S.formatMessage({id:"common.cancel"})}),e.jsx(I,{type:"submit",variant:"contained",disabled:T,children:S.formatMessage({id:"doctor.filter.apply"})})]})]})})})})]})})})})})}const Js=[{label:"Today",getDates:()=>[V().toDate(),V().toDate()]},{label:"Yesterday",getDates:()=>[V().subtract(1,"day").toDate(),V().subtract(1,"day").toDate()]},{label:"Last 7 days",getDates:()=>[V().subtract(7,"days").toDate(),V().toDate()]},{label:"Last 14 days",getDates:()=>[V().subtract(14,"days").toDate(),V().toDate()]},{label:"This month",getDates:()=>[V().startOf("month").toDate(),V().toDate()]},{label:"Last year",getDates:()=>[V().subtract(1,"year").startOf("year").toDate(),V().endOf("year").toDate()]}];function qs({setAnchorEl:n,startDate:t,endDate:i,isPickerOpen:s}){return e.jsx(I,{className:"custom-calendar-opening-button",variant:"contained",onClick:x=>n(x.currentTarget),children:t&&i?`${V(t).format("MMM D, YYYY")} - ${V(i).format("MMM D, YYYY")}`:"Select Date Range"})}function ei(){const[n,t]=v.useState(null),[i,s]=v.useState(null),[x,o]=v.useState(null),S=!!x,u=()=>o(null),y=g=>{const[j,D]=g();t(j),s(D),u()};return e.jsxs("div",{children:[e.jsx(qs,{setAnchorEl:o,startDate:n,endDate:i,isPickerOpen:S}),e.jsxs(bt,{open:S,anchorEl:x,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"1rem"},children:[e.jsx(is,{selected:n,onChange:g=>{const[j,D]=g;t(j),s(D)},selectsRange:!0,inline:!0}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",padding:"10px",borderLeft:"1px solid #E6EAF1"},children:[e.jsx("h4",{children:"Shortcuts"}),Js.map(g=>e.jsx(I,{variant:"outlined",onClick:()=>y(g.getDates),style:{background:"#eeecff",color:"#5543ff",fontWeight:"bold",borderRadius:"68px",padding:"10px"},children:g.label},g.label))]})]}),e.jsxs("div",{style:{marginTop:"1rem",borderTop:"1px solid #E6EAF1",padding:"10px",display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[e.jsx(I,{variant:"contained",onClick:()=>{t(null),s(null),u()},style:{background:"#eeecff",color:"#5543ff",fontWeight:"bold",borderRadius:"68px",padding:"10px"},children:"Cancel"}),e.jsx(I,{variant:"contained",onClick:u,style:{background:"#eeecff",color:"#5543ff",fontWeight:"bold",borderRadius:"68px",padding:"10px"},children:"Apply"})]})]})]})}function ni(){return e.jsx("div",{children:e.jsx(ei,{})})}function ti(){const{lang:n}=be(),{id:t}=Oe(),i=dn(),s=H(),x=hn(i.breakpoints.down("sm")),[o,S]=v.useState(!1),{data:u,isLoading:y,setFilterCriteria:g,setPagination:j,setSorting:D}=ns(Number(t));Ie(ye.CONSULTATION_STATUS),Ie(ye.CONSULTATION_TYPE);const{filter:R,search:T,setSearch:a,onResetHandler:m,onRemoveFilterHandler:_,onFilterHandler:p}=Un("patient_name");v.useEffect(()=>{g(R)},[R]);const k=v.useMemo(()=>[{header:s.formatMessage({id:"common.type"}),accessorKey:"consultation_type",cell:({row:l})=>{var c;return e.jsx(ss,{type:(c=l.original)==null?void 0:c.consultation_type})}},{header:s.formatMessage({id:"common.patient"}),accessorKey:"patient",enableSorting:!1,cell:({row:l})=>{var c,A,r;return e.jsxs(b,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(mn,{alt:"Avatar 1",size:"sm",src:(A=(c=l.original)==null?void 0:c.patient)==null?void 0:A.photo}),e.jsx(b,{spacing:0,children:e.jsx(w,{variant:"subtitle1",children:(r=l.original.patient)==null?void 0:r.name[n]})})]})}},{header:s.formatMessage({id:"common.status"}),accessorKey:"status",cell:l=>e.jsx(ts,{status:l.getValue()})},{header:s.formatMessage({id:"common.totalPrice"}),accessorKey:"price",cell:({row:l})=>{var c,A;return`${(c=l.original)==null?void 0:c.price} ${(A=l==null?void 0:l.original)==null?void 0:A.currency}`}},{header:s.formatMessage({id:"common.consultationOn"}),accessorKey:"consultation_date",cell:({row:l})=>{var c,A,r;return e.jsxs(e.Fragment,{children:[e.jsx(w,{children:V((c=l.original)==null?void 0:c.consultation_date).format(Ke)}),((A=l.original)==null?void 0:A.start_time)&&e.jsxs(w,{children:["at  ",(r=l.original)==null?void 0:r.start_time]})]})}}],[]);return e.jsxs(e.Fragment,{children:[e.jsxs(On,{data:u,columns:k,isLoading:y,setPagination:l=>{j(l)},setSortingParams:l=>{D(l)},children:[e.jsx(M,{paddingLeft:2,paddingTop:2,children:e.jsx(w,{variant:"h3",children:s.formatMessage({id:"sidebar.consultations"})})}),e.jsxs(b,{direction:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",sx:{px:2,paddingTop:2,...x&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(M,{children:e.jsxs(b,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Wn,{value:T,onFilterChange:l=>a(l),placeholder:s.formatMessage({id:"doctor.consultationTab.searchPlaceholder"})}),e.jsx(I,{variant:"contained",onClick:()=>S(!0),startIcon:e.jsx(Yn,{}),children:s.formatMessage({id:"common.filter"})}),e.jsx(ni,{})]})}),e.jsx(b,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:e.jsx(b,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(I,{variant:"outlined",startIcon:e.jsx(Kn,{}),children:s.formatMessage({id:"common.export"})})})})]}),e.jsx(M,{sx:{px:2,pt:2,pb:1},children:e.jsx(Gn,{params:R,onClearFilter:m,onRemoveFilter:_,referenceKey:ye.CONSULTATION_STATUS,searchKey:"patient_name"})})]}),o&&e.jsx(Qs,{open:o,initialValue:R,handleClose:()=>{S(!1)},setCriteria:p,resetFilter:m})]})}const si=()=>{const n=H(),t=se(m=>m.app.doctor),i=v.useMemo(()=>{var m,_,p,k;return{consultation_price_type:((m=t==null?void 0:t.doctor_consultation_price)==null?void 0:m.consultation_price_type)||"standard_price",consultation_price:((_=t==null?void 0:t.doctor_consultation_price)==null?void 0:_.consultation_price)||10,commission_calculation_method:((p=t==null?void 0:t.doctor_consultation_price)==null?void 0:p.commission_calculation_method)||"percentage",lotf_commission:((k=t==null?void 0:t.doctor_consultation_price)==null?void 0:k.lotf_commission)||"",doctor_id:t==null?void 0:t.id}},[]),s=ue({initialValues:i,validationSchema:Lt(n),enableReinitialize:!0,onSubmit:async(m,{setSubmitting:_})=>{try{await At(m).then(p=>{Z(n.formatMessage({id:"doctor.revenueTab.consultationPriceUpdate"}))})}catch(p){_(!1),console.error(p)}}}),{handleSubmit:x,isSubmitting:o,touched:S,errors:u,values:y,getFieldProps:g,setFieldValue:j}=s,D=v.useCallback(m=>{const{value:_}=m.target;j("consultation_price_type",_)},[j]),R=v.useCallback(m=>{const{value:_}=m.target;j("commission_calculation_method",_)},[j]),T=v.useCallback((m,_,p=!1)=>e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsx(B,{fullWidth:!0,id:m,placeholder:n.formatMessage({id:_}),type:"number",disabled:p,InputProps:{endAdornment:e.jsx("span",{children:We})},...g("consultation_price")}),S.consultation_price&&u.consultation_price&&e.jsx(N,{error:!0,id:"consultation_price-helper",children:u.consultation_price&&typeof u.consultation_price=="string"?u.consultation_price:""})]}),[u.consultation_price,g,n,S.consultation_price]),a=v.useCallback((m,_,p)=>e.jsxs(d,{item:!0,xs:12,sm:6,children:[e.jsx(B,{fullWidth:!0,id:m,placeholder:n.formatMessage({id:_}),type:"number",InputProps:{endAdornment:e.jsx("span",{children:p})},...g("lotf_commission")}),S.lotf_commission&&u.lotf_commission&&e.jsx(N,{error:!0,id:"lotf_commission-helper",children:u.lotf_commission&&typeof u.lotf_commission=="string"?u.lotf_commission:""})]}),[u.lotf_commission,g,n,S.lotf_commission]);return e.jsx(pe,{value:s,children:e.jsx(xe,{autoComplete:"off",noValidate:!0,onSubmit:x,children:e.jsx(d,{container:!0,spacing:2,children:e.jsxs(d,{item:!0,xs:12,children:[e.jsx(Q,{title:n.formatMessage({id:"common.pricing"}),children:e.jsxs(d,{container:!0,spacing:2,children:[e.jsxs(d,{item:!0,xs:12,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"consultation_price_type",children:n.formatMessage({id:"doctor.revenueTab.consultationPrice"})}),e.jsxs(Mn,{row:!0,"aria-label":"consultation_price_type",value:y.consultation_price_type,onChange:D,children:[e.jsx(Re,{control:e.jsx(Ge,{value:"standard_price"}),label:n.formatMessage({id:"doctor.revenueTab.standardPrice"})}),e.jsx(Re,{control:e.jsx(Ge,{value:"custom_price"}),label:n.formatMessage({id:"doctor.revenueTab.customPrice"})})]})]}),S.consultation_price_type&&u.consultation_price_type&&e.jsx(N,{error:!0,id:"consultation-consultation_price-helper",children:u.consultation_price_type&&typeof u.consultation_price_type=="string"?u.consultation_price_type:""})]}),y.consultation_price_type==="standard_price"?T("standard_price","doctor.revenueTab.standardPrice",!0):T("custom_price","doctor.revenueTab.customPrice"),e.jsxs(d,{item:!0,xs:12,children:[e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"commission_calculation_method",children:n.formatMessage({id:"doctor.revenueTab.commissionCalculationMethod"})}),e.jsxs(Mn,{row:!0,"aria-label":"commission_calculation_method",value:y.commission_calculation_method,onChange:R,children:[e.jsx(Re,{control:e.jsx(Ge,{value:"percentage"}),label:n.formatMessage({id:"common.percentage"})}),e.jsx(Re,{control:e.jsx(Ge,{value:"agreed_price"}),label:n.formatMessage({id:"doctor.revenueTab.agreedPrice"})})]})]}),S.commission_calculation_method&&u.commission_calculation_method&&e.jsx(N,{error:!0,id:"lotf_commission-calculation-helper",children:u.commission_calculation_method&&typeof u.commission_calculation_method=="string"?u.commission_calculation_method:""})]}),y.commission_calculation_method==="percentage"?a("percentage","doctor.revenueTab.lotfPercentageCommission","%"):a("agreed_price","doctor.revenueTab.commissionAmountAgreed",We),e.jsx(d,{item:!0,xs:12,children:e.jsx(b,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:e.jsx(Ee,{type:"submit",loading:o,loadingIndicator:n.formatMessage({id:"common.processing"}),variant:"contained",children:n.formatMessage({id:"common.saveChanges"})})})})]})}),e.jsx(M,{mt:4}),e.jsx(Q,{title:n.formatMessage({id:"common.insights"}),children:e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(we,{variant:"outlined",children:e.jsx(Ae,{children:e.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(M,{children:[e.jsx(w,{sx:{color:"text.secondary",fontSize:14},children:n.formatMessage({id:"doctor.revenueTab.totalScheduleConsultations"})}),e.jsx(w,{sx:{fontSize:32,fontWeight:600},children:"20"})]}),e.jsx(M,{sx:{padding:1},children:e.jsx("img",{src:"/src/assets/images/icons/insight1.png",alt:"custom",style:{width:48,height:48}})})]})})})}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(we,{variant:"outlined",children:e.jsx(Ae,{children:e.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(M,{children:[e.jsx(w,{sx:{color:"text.secondary",fontSize:14},children:n.formatMessage({id:"doctor.revenueTab.totalScheduleConsultations"})}),e.jsx(w,{sx:{fontSize:32,fontWeight:600},children:"20"})]}),e.jsx(M,{sx:{padding:1},children:e.jsx("img",{src:"/src/assets/images/icons/insight3.png",alt:"custom",style:{width:48,height:48}})})]})})})}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(we,{variant:"outlined",children:e.jsx(Ae,{children:e.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(M,{children:[e.jsx(w,{sx:{color:"text.secondary",fontSize:14},children:n.formatMessage({id:"doctor.revenueTab.totalRevenue"})}),e.jsxs(w,{sx:{fontSize:32,fontWeight:600},children:["1,700"," ",e.jsx(w,{component:"span",sx:{fontSize:16,fontWeight:400},children:We})]})]}),e.jsx(M,{sx:{padding:1},children:e.jsx("img",{src:"/src/assets/images/icons/insight2.png",alt:"custom",style:{width:48,height:48}})})]})})})}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(we,{variant:"outlined",children:e.jsx(Ae,{children:e.jsxs(M,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(M,{children:[e.jsx(w,{sx:{color:"text.secondary",fontSize:14},children:n.formatMessage({id:"doctor.revenueTab.appRevenue"})}),e.jsxs(w,{sx:{fontSize:32,fontWeight:600},children:["200"," ",e.jsx(w,{component:"span",sx:{fontSize:16,fontWeight:400},children:We})]})]}),e.jsx(M,{sx:{padding:1},children:e.jsx("img",{src:"/src/assets/images/icons/insight2.png",alt:"custom",style:{width:48,height:48}})})]})})})})]})})]})})})})},ii=()=>{const n=H(),{id:t}=Oe(),{data:i,isLoading:s,setPagination:x,setSorting:o}=Rt(Number(t));console.log(i);const S=v.useMemo(()=>[{header:n.formatMessage({id:"common.weekly"}),accessorKey:"weekly",cell:({row:u})=>{var y;return`${(y=u.original)==null?void 0:y.weekly}`}},{header:n.formatMessage({id:"doctor.revenueTab.totalCommission"}),accessorKey:"total_commission",cell:({row:u})=>{var y;return`${(y=u.original)==null?void 0:y.total_commission}`}},{header:n.formatMessage({id:"doctor.revenueTab.totalConsultations"}),accessorKey:"total_consultations",cell:({row:u})=>{var y;return`${(y=u.original)==null?void 0:y.total_consultations}`}}],[]);return e.jsx(e.Fragment,{children:e.jsx(On,{data:i,columns:S,isLoading:s,setPagination:u=>{x(u)},setSortingParams:u=>{o(u)},children:e.jsxs(M,{paddingLeft:2,paddingRight:2,paddingTop:2,marginBottom:2,display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{variant:"h3",children:n.formatMessage({id:"doctor.revenueTab.transaction"})}),e.jsx(I,{variant:"outlined",startIcon:e.jsx(Kn,{}),children:n.formatMessage({id:"common.export"})})]})})})},ai=()=>{const[n,t]=v.useState(1),i=H(),s=(x,o)=>{t(o)};return e.jsxs(e.Fragment,{children:[e.jsx(M,{sx:{borderBottom:1,borderColor:"divider",width:"100%"},children:e.jsxs(Xn,{value:n,onChange:s,variant:"scrollable",scrollButtons:"auto","aria-label":"account profile tab",children:[e.jsx(le,{label:i.formatMessage({id:"doctor.revenueTab.consultationsPricing"}),value:1}),e.jsx(le,{label:i.formatMessage({id:"common.transaction"}),value:3})]})}),e.jsxs(M,{sx:{mt:2.5},children:[e.jsx(oe,{value:n,index:1,children:e.jsx(si,{})}),e.jsx(oe,{value:n,index:3,children:e.jsx(ii,{})})]})]})},ri=ai;function oi({open:n,handleClose:t,initialValue:i,resetFilter:s,setCriteria:x}){const o=H(),S=ue({initialValues:{rating:""},enableReinitialize:!0,onSubmit:async(T,{setSubmitting:a})=>{try{x(T),t()}catch(m){console.error(m)}finally{a(!1)}}}),u=()=>{s(),D(),t()},{handleSubmit:y,isSubmitting:g,values:j,resetForm:D,setFieldValue:R}=S;return e.jsx(e.Fragment,{children:n&&e.jsx(Qe,{open:n,handleClose:t,maxWidth:550,children:e.jsx(pe,{value:S,children:e.jsx(Te,{dateAdapter:Je,children:e.jsxs(xe,{autoComplete:"off",noValidate:!0,onSubmit:y,children:[e.jsx(qe,{children:o.formatMessage({id:"doctor.reviewsTab.filterTitle"})}),e.jsx(ie,{}),e.jsx(en,{sx:{p:2.5},children:e.jsx(d,{container:!0,spacing:1,children:e.jsx(d,{item:!0,xs:12,md:12,children:e.jsxs(b,{spacing:1,children:[e.jsx(E,{htmlFor:"rating",children:o.formatMessage({id:"doctor.reviewsTab.rating"})}),e.jsx(ce,{fullWidth:!0,children:e.jsxs(he,{id:"rating",displayEmpty:!0,value:j.rating,onChange:T=>R("rating",T.target.value),children:[e.jsx(K,{value:"",children:e.jsx("em",{children:o.formatMessage({id:"common.none"})})}),e.jsx(K,{value:5,children:"5 Stars"}),e.jsx(K,{value:4,children:"4 Stars"}),e.jsx(K,{value:3,children:"3 Stars"}),e.jsx(K,{value:2,children:"2 Stars"}),e.jsx(K,{value:1,children:"1 Star"})]})})]})})})}),e.jsx(ie,{}),e.jsx(nn,{sx:{p:2.5},children:e.jsx(d,{container:!0,justifyContent:"right",alignItems:"center",children:e.jsx(d,{item:!0,md:12,children:e.jsxs(M,{display:"flex",justifyContent:"space-between",children:[e.jsx(I,{color:"secondary",onClick:()=>u(),children:o.formatMessage({id:"doctor.filter.clear"})}),e.jsxs(b,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(I,{color:"error",onClick:t,children:o.formatMessage({id:"common.cancel"})}),e.jsx(I,{type:"submit",variant:"contained",disabled:g,children:o.formatMessage({id:"doctor.filter.apply"})})]})]})})})})]})})})})})}const li=async(n={})=>(await Ne.get("/api/v1/admin/hospitals/reviews/list",{params:n})).data;function ci(){const{id:n}=Oe(),[t,i]=v.useState(1);v.useState(6),v.useState("");const s=H(),x=dn(),o=hn(x.breakpoints.down("sm")),[S,u]=v.useState(!1),[y,g]=v.useState([]),[j,D]=v.useState(!1),[R,T]=v.useState(null),a=async(C={})=>{try{D(!0);const W=await li({...C,employee_id:Number(n),page:C.page||1,pageSize:C.pageSize||10});g(W.data),T(W.meta)}catch(W){console.error("Error fetching reviews:",W)}finally{D(!1)}};v.useEffect(()=>{n&&a()},[n]);const m=C=>{i(C.page),a({page:C.page,pageSize:C.pageSize})},{filter:_,search:p,setSearch:k,onResetHandler:l,onRemoveFilterHandler:c,onFilterHandler:A}=Un("patient_name"),r=C=>{k(C),a({search:C,page:1})},f=C=>{A(C),a({...C,page:1})},F=()=>{k(""),l(),a({page:1})};return e.jsxs(e.Fragment,{children:[e.jsx(M,{sx:{flexGrow:1},children:e.jsxs(Q,{title:s.formatMessage({id:"doctor.reviewsTab.title"}),children:[e.jsxs(b,{direction:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",sx:{px:2,paddingTop:2,...o&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(M,{sx:{width:{xs:"70%",md:"70%"}},children:e.jsxs(b,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Wn,{value:p,onFilterChange:C=>r(C),placeholder:s.formatMessage({id:"doctor.reviewsTab.searchReview"})}),e.jsx(I,{variant:"contained",onClick:()=>u(!0),startIcon:e.jsx(Yn,{}),children:s.formatMessage({id:"common.filter"})})]})}),e.jsx(b,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}}})]}),e.jsx(M,{sx:{px:2,pt:2,pb:1},children:e.jsx(Gn,{params:_,onClearFilter:F,onRemoveFilter:c,referenceKey:ye.CONSULTATION_STATUS,searchKey:"reviewer_name"})}),e.jsx(d,{container:!0,spacing:3,children:j?e.jsx(d,{item:!0,xs:12,children:e.jsx(w,{children:"Loading reviews..."})}):y.length>0?y.map(C=>{var W,ee,z,J,ae,U,X,P;return e.jsx(d,{item:!0,xs:12,sm:6,md:6,children:e.jsx(we,{children:e.jsxs(Ae,{children:[e.jsxs(w,{variant:"caption",color:"textSecondary",children:[C.id," - ",V(C.created_at).format("MMM D, YYYY [at] h:mm A")]}),e.jsxs(M,{display:"flex",alignItems:"center",mb:1,mt:1,children:[e.jsx(_t,{sx:{marginRight:2},src:((W=C.patient)==null?void 0:W.photo)||"",children:!((ee=C.patient)!=null&&ee.photo)&&(typeof((z=C.patient)==null?void 0:z.name)=="string"?C.patient.name.charAt(0):((U=(ae=(J=C.patient)==null?void 0:J.name)==null?void 0:ae.en)==null?void 0:U.charAt(0))||"P")}),e.jsxs(M,{children:[e.jsx(w,{variant:"subtitle1",fontWeight:"bold",children:C.patient?typeof C.patient.name=="string"?C.patient.name:((X=C.patient.name)==null?void 0:X.en)||"Anonymous Patient":"Anonymous Patient"}),e.jsx(w,{variant:"caption",color:"textSecondary",children:(P=C.patient)==null?void 0:P.phone_number})]})]}),e.jsx(Fs,{value:C.rating,sx:{color:"#5543FF"},readOnly:!0}),e.jsx(w,{variant:"body2",mt:1,children:C.comment||"No comment provided"}),C.service_type&&e.jsxs(w,{variant:"caption",color:"textSecondary",display:"block",mt:1,children:["Service Type: ",typeof C.service_type=="string"?C.service_type:C.service_type||"Unknown Service"]}),C.visit&&e.jsxs(w,{variant:"caption",color:"textSecondary",display:"block",children:["Visit Type: ",C.visit.visit_type]})]})})},C.id)}):e.jsx(d,{item:!0,xs:12,children:e.jsx(w,{children:"No reviews found for this doctor."})})}),R&&y.length>0&&e.jsx(M,{sx:{p:2},children:e.jsx(vt,{pagination:R,handlePageChange:m,handlePageSizeChange:C=>{a({page:1,pageSize:C.pageSize})}})})]})}),S&&e.jsx(oi,{open:S,initialValue:_,handleClose:()=>{u(!1)},setCriteria:f,resetFilter:l})]})}function aa({requestMode:n}){const{id:t}=Oe();It(Number(t));const[i,s]=v.useState(1),x=H(),o=(S,u)=>{s(u)};return e.jsx(e.Fragment,{children:e.jsxs(Q,{border:!1,boxShadow:!0,children:[e.jsx(M,{sx:{borderBottom:1,borderColor:"divider",width:"100%"},children:e.jsxs(Xn,{value:i,onChange:o,variant:"scrollable",scrollButtons:"auto","aria-label":"account profile tab",children:[e.jsx(le,{label:x.formatMessage({id:"doctor.aboutTab.title"}),value:1}),!n&&e.jsx(le,{label:x.formatMessage({id:"doctor.settingTab.title"}),value:2}),e.jsx(le,{label:x.formatMessage({id:"profile.attachmentTab.title"}),value:3}),!n&&e.jsx(le,{label:x.formatMessage({id:"profile.scheduleTab.title"}),value:4}),!n&&e.jsx(le,{label:x.formatMessage({id:"sidebar.consultations"}),value:5}),!n&&e.jsx(le,{label:x.formatMessage({id:"common.revenue"}),value:6}),!n&&e.jsx(le,{label:x.formatMessage({id:"doctor.reviewsTab.title"}),value:7})]})}),e.jsxs(M,{sx:{mt:2.5},children:[e.jsx(oe,{value:i,index:1,children:e.jsx(Bs,{requestMode:n})}),e.jsx(oe,{value:i,index:2,children:e.jsx(zs,{})}),e.jsx(oe,{value:i,index:3,children:e.jsx($s,{requestMode:n})}),e.jsx(oe,{value:i,index:4,children:e.jsx(Zs,{})}),e.jsx(oe,{value:i,index:5,children:e.jsx(ti,{})}),e.jsx(oe,{value:i,index:6,children:e.jsx(ri,{})}),e.jsx(oe,{value:i,index:7,children:e.jsx(ci,{})})]})]})})}export{ia as D,aa as P};
