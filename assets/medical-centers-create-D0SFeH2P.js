import{u as O,a as U,W as K,t as q,r as p,g as G,b as J,a$ as Q,c as X,j as e,B as b,F as Y,d as Z,aL as F,G as s,S as a,I as o,l as c,m as l,aC as v,N as ee,aJ as re,h as ie,aj as te,k as ne,T as se,L as S,Q as k,aK as ae,q as B,ax as de,J as le,U as oe}from"./index-DSO9TgYq.js";import{P as ce}from"./react-number-format.es-Bl0F5VJY.js";import{d as me}from"./dayjs.min-pRfd56nx.js";import{c as he}from"./medicalCenter-BJDU8s5Q.js";import{u as ue}from"./useCountries-DSXcarux.js";import{o as xe}from"./medical-centers-BO6wn6Y4.js";import{A as I,D as A}from"./AdapterDayjs-DJXadXKJ.js";import{A as pe}from"./Autocomplete-BOe_mB7V.js";import{E as ge}from"./EyeOutlined-ChV9zO9W.js";import{E as _e}from"./EyeInvisibleOutlined-CaFaFVHk.js";import{C as je}from"./CameraOutlined-dQFboYcG.js";import"./regex-AjllrUCH.js";import"./Dialog-CPoUMqzk.js";const fe=()=>({name_en:"",name_ar:"",image:"",register_number:"",register_expire_date:null,license_number:"",license_expired_date:null,email:"",radius:"",city:"",country:"",latitude:"",longitude:"",password:"",address_line_1:"",phone_number:"",linkedin_profile:""}),P=me(new Date),be=()=>{const t=O(),C=U(),E=K(),{lang:y}=q(),x=ue(),[g,T]=p.useState(void 0),[D,W]=p.useState(""),[f,L]=p.useState(!1);p.useEffect(()=>{g&&(W(URL.createObjectURL(g)),G(g,i=>{j("image",i)}))},[g]);const R=()=>{L(!f)},N=i=>{i.preventDefault()},V=p.useMemo(()=>fe(),[]),_=J({initialValues:V,validationSchema:he(t),enableReinitialize:!0,onSubmit:async(i,{setSubmitting:m})=>{try{const d={...i,name:{ar:i.name_ar,en:i.name_en},phone_number:Q(i==null?void 0:i.phone_number),license_expired_date:new Date(i==null?void 0:i.license_expired_date).toISOString(),register_expire_date:new Date(i==null?void 0:i.register_expire_date).toISOString(),address:{latitude:i==null?void 0:i.latitude,longitude:i==null?void 0:i.longitude,city:i==null?void 0:i.city,country:i==null?void 0:i.country,radius:i==null?void 0:i.radius,address_line_1:i==null?void 0:i.address_line_1}};delete d.name_en,delete d.name_ar,delete d.latitude,delete d.longitude,delete d.country,delete d.city,delete d.radius,delete d.address_line_1,xe(d).then(ye=>{X(t.formatMessage({id:"medicalCenter.createSuccess"})),m(!1),E("/medical-center/list")})}catch(d){console.error(d)}}}),{errors:r,touched:n,handleSubmit:H,handleChange:z,values:u,isSubmitting:M,handleBlur:w,setFieldTouched:$,getFieldProps:h,setFieldValue:j}=_;return e.jsx(b,{sx:{mb:5,mt:2},children:e.jsx(Y,{value:_,children:e.jsxs(Z,{autoComplete:"off",noValidate:!0,onSubmit:H,children:[e.jsx(F,{title:t.formatMessage({id:"common.accountInfoTitle"}),subheader:t.formatMessage({id:"medicalCenter.accountInfoSubtitle"}),children:e.jsx(s,{container:!0,spacing:2,children:e.jsx(s,{item:!0,xs:12,sm:8,children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"phone_number",children:t.formatMessage({id:"profile.phoneNo"})}),e.jsx(ce,{id:"phone_number",name:"phone_number",format:"+### ## ### ####",mask:"_",placeholder:"+966 5",onValueChange:i=>_.setFieldValue("phone_number",i.formattedValue),onBlur:_.handleBlur,customInput:c})]}),n.phone_number&&r.phone_number&&e.jsx(l,{error:!0,id:"helper-phone_number",children:r==null?void 0:r.phone_number})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"email",children:t.formatMessage({id:"profile.email"})}),e.jsx(c,{fullWidth:!0,id:"email",placeholder:t.formatMessage({id:"profile.email"}),...h("email"),error:!!(n.email&&r.email)})]}),n.email&&r.email&&e.jsx(l,{error:!0,id:"helper-email",children:r==null?void 0:r.email})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"password",children:t.formatMessage({id:"common.password"})}),e.jsx(v,{id:"password",placeholder:t.formatMessage({id:"common.password"}),type:f?"text":"password",name:"password",onBlur:w,onChange:z,endAdornment:e.jsx(ee,{position:"end",children:e.jsx(re,{"aria-label":"toggle password visibility",onClick:R,onMouseDown:N,edge:"end",size:"large",color:"secondary",children:f?e.jsx(ge,{}):e.jsx(_e,{})})})})]}),n.password&&r.password&&e.jsx(l,{error:!0,id:"password-helper",children:r.password})]})]})})})}),e.jsx("br",{}),e.jsx(F,{title:t.formatMessage({id:"medicalCenter.medicalCenterInfo"}),subheader:t.formatMessage({id:"medicalCenter.medicalCenterInfoSubtitle"}),children:e.jsx(s,{container:!0,spacing:2,children:e.jsx(s,{item:!0,xs:12,sm:8,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,md:6,children:[e.jsxs(a,{direction:"row",justifyContent:"center",sx:{mt:3},children:[e.jsxs(ie,{htmlFor:"change-avtar",sx:{position:"relative",borderRadius:"50%",overflow:"hidden","&:hover .MuiBox-root":{opacity:1},cursor:"pointer"},children:[e.jsx(te,{alt:"Avatar 1",src:D,sx:{width:72,height:72,border:"1px dashed"}}),e.jsx(b,{sx:{position:"absolute",top:0,left:0,background:C.palette.mode===ne.DARK?"rgba(255, 255, 255, .75)":"rgba(0,0,0,.65)",width:"100%",height:"100%",opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(a,{spacing:.5,alignItems:"center",children:[e.jsx(je,{style:{color:C.palette.secondary.lighter,fontSize:"2rem"}}),e.jsx(se,{sx:{color:"secondary.lighter"},children:t.formatMessage({id:"common.upload"})})]})})]}),e.jsx(c,{type:"file",id:"change-avtar",placeholder:"Outlined",variant:"outlined",inputProps:{accept:"image/*"},sx:{display:"none"},onChange:i=>{var m;$("image",!0),T((m=i.target.files)==null?void 0:m[0])}})]}),e.jsx(a,{direction:"row",justifyContent:"center",children:n.image&&r.image&&e.jsx(l,{error:!0,id:"helper-image",children:r==null?void 0:r.image})})]}),e.jsx("br",{}),"  ",e.jsx("br",{}),e.jsx(s,{item:!0,xs:12,md:12,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"name_en",children:t.formatMessage({id:"medicalCenter.nameEn"})}),e.jsx(c,{fullWidth:!0,id:"name_en",placeholder:t.formatMessage({id:"medicalCenter.nameEn"}),...h("name_en"),error:!!(n.name_en&&r.name_en)})]}),n.name_en&&r.name_en&&e.jsx(l,{error:!0,id:"helper-name_en",children:r==null?void 0:r.name_en})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"name_ar",children:t.formatMessage({id:"medicalCenter.nameAr"})}),e.jsx(c,{fullWidth:!0,id:"name_ar",placeholder:t.formatMessage({id:"medicalCenter.nameAr"}),...h("name_ar"),error:!!(n.name_ar&&r.name_ar)})]}),n.name_ar&&r.name_ar&&e.jsx(l,{error:!0,id:"helper-name_ar",children:r==null?void 0:r.name_ar})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"register_number",children:t.formatMessage({id:"medicalCenter.commercialRegister"})}),e.jsx(c,{fullWidth:!0,id:"register_number",placeholder:t.formatMessage({id:"medicalCenter.commercialRegister"}),...h("register_number"),error:!!(n.register_number&&r.register_number)})]}),n.register_number&&r.register_number&&e.jsx(l,{error:!0,id:"helper-register_number",children:r==null?void 0:r.register_number})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"register_expire_date",children:t.formatMessage({id:"medicalCenter.commercialRegisterExpireDate"})}),e.jsx(S,{dateAdapter:I,children:e.jsx(A,{format:k,value:u==null?void 0:u.register_expire_date,minDate:P,onChange:i=>j("register_expire_date",i),name:"register_expire_date"})})]}),n.register_expire_date&&r.register_expire_date&&e.jsx(l,{error:!0,id:"helper-register_expire_date",children:r==null?void 0:r.register_expire_date})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"license_number",children:t.formatMessage({id:"medicalCenter.ministryOfHealthLicence"})}),e.jsx(c,{fullWidth:!0,id:"license_number",placeholder:t.formatMessage({id:"medicalCenter.ministryOfHealthLicence"}),...h("license_number"),error:!!(n.license_number&&r.license_number)})]}),n.license_number&&r.license_number&&e.jsx(l,{error:!0,id:"helper-license_number",children:r==null?void 0:r.license_number})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"license_expired_date",children:t.formatMessage({id:"medicalCenter.ministryOfHealthLicenceExpiry"})}),e.jsx(S,{dateAdapter:I,children:e.jsx(A,{format:k,value:u==null?void 0:u.license_expired_date,minDate:P,onChange:i=>j("license_expired_date",i),name:"license_expired_date"})})]}),n.license_expired_date&&r.license_expired_date&&e.jsx(l,{error:!0,id:"helper-license_expired_date",children:r==null?void 0:r.license_expired_date})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"country",children:t.formatMessage({id:"profile.country"})}),e.jsx(ae,{fullWidth:!0,children:e.jsx(pe,{id:"country",fullWidth:!0,value:x==null?void 0:x.content.filter(i=>i.code===(u==null?void 0:u.country))[0],onBlur:w,onChange:(i,m)=>{j("country",m===null?"":m.code)},options:x==null?void 0:x.content,autoHighlight:!0,isOptionEqualToValue:(i,m)=>i.code===(m==null?void 0:m.code),getOptionLabel:i=>i.label[y],renderOption:({key:i,...m},d)=>e.jsxs(b,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...m,children:[d.code&&e.jsx("img",{loading:"lazy",width:"20",src:`https://flagcdn.com/w20/${d.code.toLowerCase()}.png`,srcSet:`https://flagcdn.com/w40/${d.code.toLowerCase()}.png 2x`,alt:""}),d.label[y],d.code&&`(${d.code}) ${d.phone}`]},i),renderInput:i=>e.jsx(c,{...i,placeholder:t.formatMessage({id:"common.selectOp"}),...h("country"),inputProps:{...i.inputProps}})})})]}),n.country&&r.country&&e.jsx(l,{error:!0,id:"helper-country",children:r==null?void 0:r.country})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsxs(o,{htmlFor:"city",children:[t.formatMessage({id:"profile.city"}),e.jsxs("small",{children:["(",t.formatMessage({id:"medicalCenter.citySubtitle"}),") "]})]}),e.jsx(c,{fullWidth:!0,id:"city",placeholder:t.formatMessage({id:"profile.city"}),...h("city"),error:!!(n.city&&r.city)})]}),n.city&&r.city&&e.jsx(l,{error:!0,id:"helper-city",children:r==null?void 0:r.city})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"radius",children:t.formatMessage({id:"medicalCenter.radius"})}),e.jsx(c,{fullWidth:!0,type:"number",id:"radius",placeholder:t.formatMessage({id:"medicalCenter.radius"}),...h("radius"),error:!!(n.radius&&r.radius)})]}),n.radius&&r.radius&&e.jsx(l,{error:!0,id:"helper-radius",children:r==null?void 0:r.radius})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"linkedin_profile",children:t.formatMessage({id:"medicalCenter.linkdinProfile"})}),e.jsx(c,{fullWidth:!0,id:"linkedin_profile",placeholder:t.formatMessage({id:"medicalCenter.linkdinProfile"}),...h("linkedin_profile"),error:!!(n.linkedin_profile&&r.linkedin_profile)})]}),n.linkedin_profile&&r.linkedin_profile&&e.jsx(l,{error:!0,id:"helper-linkedin_profile",children:r==null?void 0:r.linkedin_profile})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"latitude",children:t.formatMessage({id:"medicalCenter.latitude"})}),e.jsx(c,{fullWidth:!0,id:"latitude",type:"number",placeholder:t.formatMessage({id:"medicalCenter.location"}),...h("latitude"),error:!!(n.latitude&&r.latitude)})]}),n.latitude&&r.latitude&&e.jsx(l,{error:!0,id:"helper-latitude",children:r==null?void 0:r.latitude})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"longitude",children:t.formatMessage({id:"medicalCenter.longitude"})}),e.jsx(c,{fullWidth:!0,type:"number",id:"longitude",placeholder:t.formatMessage({id:"medicalCenter.longitude"}),...h("longitude"),error:!!(n.longitude&&r.longitude)})]}),n.longitude&&r.longitude&&e.jsx(l,{error:!0,id:"helper-longitude",children:r==null?void 0:r.longitude})]}),e.jsxs(s,{item:!0,xs:12,sm:12,children:[e.jsxs(a,{spacing:1,children:[e.jsx(o,{htmlFor:"address_line_1",children:t.formatMessage({id:"medicalCenter.locationTitle"})}),e.jsx(c,{fullWidth:!0,id:"address_line_1",placeholder:t.formatMessage({id:"medicalCenter.locationTitle"}),...h("address_line_1"),error:!!(n.address_line_1&&r.address_line_1)})]}),n.address_line_1&&r.address_line_1&&e.jsx(l,{error:!0,id:"helper-address_line_1",children:r==null?void 0:r.address_line_1})]})]})})]})})})}),e.jsxs(a,{direction:"row",sx:{mt:2},justifyContent:"flex-start",alignItems:"center",spacing:2,children:[e.jsx(B,{variant:"outlined",component:de,to:"/medical-center/list",disabled:M,children:t.formatMessage({id:"common.cancel"})}),e.jsx(B,{type:"submit",variant:"contained",disabled:M,children:t.formatMessage({id:"medicalCenter.addMedicalCenter"})})]})]})})})};function Ce(t){return[{title:t.formatMessage({id:"sidebar.home"}),to:oe},{title:t.formatMessage({id:"sidebar.medicalCenters"}),to:"/medical-center/list"},{title:t.formatMessage({id:"medicalCenter.addNewMedicalCenter"})}]}const We=()=>{const t=O();return e.jsxs("div",{children:[e.jsx(le,{custom:!0,heading:t.formatMessage({id:"medicalCenter.addNewMedicalCenter"}),links:Ce(t)}),e.jsx(be,{})]})};export{We as default};
