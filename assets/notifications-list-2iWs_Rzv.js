import{a as W,u as v,r as m,b as U,c as B,j as e,C as G,F as H,L as q,A as J,d as Q,D as X,e as k,f as Y,G as d,S as c,I as p,l as M,m as S,p as $,q as A,s as Z,t as ee,W as ie,v as ne,i as te,X as ae,R as se,x as oe,y as R,z as re,M as ce,E as le,H as K,T,J as de,P as me,K as ue,B as fe,U as he}from"./index-DSO9TgYq.js";import{d as L}from"./dayjs.min-pRfd56nx.js";import{D as _e}from"./DebouncedInput-DhmfX_1V.js";import{C as O}from"./CustomTypography-CRnDvUFn.js";import{u as ge}from"./useFilterAndSearch-PJD0Zg8P.js";import{s as pe}from"./specialty-D-OME5qd.js";import{u as xe,i as je}from"./specialty-CpBsygzZ.js";import{R as Me,a as b}from"./RadioGroup-CZi2BDzD.js";import{F as y}from"./FormControlLabel-DB_ChWU7.js";import{A as Se}from"./ArrowUpOutlined-C9GTlrEN.js";import"./CloseOutlined-DRBnXhIJ.js";const be=i=>{var u,a;const h={speciality_name_en:"",speciality_name_ar:"",general_price:"",consultant_price:"",senior_consultant_price:"",status:1,consultant_duration:"",consultation_type:[],image:""};return i?{speciality_name_en:(u=i==null?void 0:i.speciality_name)==null?void 0:u.en,speciality_name_ar:(a=i==null?void 0:i.speciality_name)==null?void 0:a.ar,general_price:Number(i==null?void 0:i.general_price),consultant_price:Number(i==null?void 0:i.consultant_price),senior_consultant_price:Number(i==null?void 0:i.senior_consultant_price),status:i==null?void 0:i.status,consultant_duration:i==null?void 0:i.consultant_duration,consultation_type:i==null?void 0:i.consultation_type,image:i==null?void 0:i.image}:h};function ye({specialty:i,url:h,open:u,handleClose:a}){W();const t=v();m.useState(void 0),m.useState(`${i&&(i!=null&&i.image)?i.image:""}`);const _=m.useMemo(()=>be(i),[]),x=U({initialValues:_,validationSchema:pe(t),enableReinitialize:!0,onSubmit:async(o,{setSubmitting:j})=>{var C;try{let n={...o,speciality_name:{en:o==null?void 0:o.speciality_name_en,ar:o==null?void 0:o.speciality_name_ar}};n.image.includes("http")&&delete n.image,((C=o==null?void 0:o.consultation_type)==null?void 0:C.length)===2?n.consultation_type="Both":n.consultation_type=o==null?void 0:o.consultation_type.pop(),delete n.speciality_name_en,delete n.speciality_name_ar,i?await xe(i.id,h,n).then(r=>{B(t.formatMessage({id:"specialty.addModal.editSuccess"})),j(!1),a()}):await je(n,h).then(r=>{B(t.formatMessage({id:"specialty.addModal.addSuccess"})),j(!1),a()})}catch(n){console.error(n),j(!1)}}}),{errors:s,touched:l,handleSubmit:F,isSubmitting:I,getFieldProps:f,values:w,setFieldTouched:N,setFieldValue:E}=x;return e.jsx(e.Fragment,{children:u&&e.jsx(G,{open:u,handleClose:a,maxWidth:540,children:e.jsx(H,{value:x,children:e.jsx(q,{dateAdapter:J,children:e.jsxs(Q,{autoComplete:"off",noValidate:!0,onSubmit:F,children:[e.jsx(X,{children:i?t.formatMessage({id:"notification.editNotification"}):t.formatMessage({id:"notification.addNotification"})}),e.jsx(k,{}),e.jsx(Y,{sx:{p:2.5},children:e.jsx(d,{container:!0,spacing:3,children:e.jsx(d,{item:!0,xs:12,md:12,children:e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{item:!0,xs:12,sm:12,children:e.jsxs(c,{spacing:1,children:[e.jsxs(p,{htmlFor:"is_medical_insurance",children:[t.formatMessage({id:"notification.SendTo"})," "]}),e.jsxs(Me,{row:!0,"aria-label":"payment-card",...f("is_medical_insurance"),children:[e.jsx(y,{control:e.jsx(b,{value:"Yes"}),label:t.formatMessage({id:"common.all"})}),e.jsx(y,{control:e.jsx(b,{value:"No"}),label:t.formatMessage({id:"sidebar.patients"})}),e.jsx(y,{control:e.jsx(b,{value:"No"}),label:t.formatMessage({id:"sidebar.doctors"})}),e.jsx(y,{control:e.jsx(b,{value:"No"}),label:t.formatMessage({id:"sidebar.providers"})})]})]})}),e.jsxs(d,{item:!0,xs:12,sm:12,children:[e.jsxs(c,{spacing:1,children:[e.jsx(p,{htmlFor:"speciality-name-en",children:t.formatMessage({id:"notification.notificationTitleEn"})}),e.jsx(M,{fullWidth:!0,id:"speciality-name-en",placeholder:t.formatMessage({id:"notification.notificationTitleEn"}),...f("speciality_name_en"),error:!!(l.speciality_name_en&&s.speciality_name_en)})]}),l.speciality_name_en&&s.speciality_name_en&&e.jsx(S,{error:!0,id:"helper-speciality_name_en",children:s==null?void 0:s.speciality_name_en})]}),e.jsxs(d,{item:!0,xs:12,sm:12,children:[e.jsxs(c,{spacing:1,children:[e.jsx(p,{htmlFor:"speciality-name-en",children:t.formatMessage({id:"notification.notificationTitleAr"})}),e.jsx(M,{fullWidth:!0,id:"speciality-name-en",placeholder:t.formatMessage({id:"notification.notificationTitleAr"}),...f("speciality_name_en"),error:!!(l.speciality_name_en&&s.speciality_name_en)})]}),l.speciality_name_en&&s.speciality_name_en&&e.jsx(S,{error:!0,id:"helper-speciality_name_en",children:s==null?void 0:s.speciality_name_en})]}),e.jsxs(d,{item:!0,xs:12,sm:12,children:[e.jsxs(c,{spacing:1,children:[e.jsx(p,{htmlFor:"speciality-name-en",children:t.formatMessage({id:"notification.notificationDescEn"})}),e.jsx(M,{fullWidth:!0,multiline:!0,rows:2,id:"speciality-name-en",placeholder:t.formatMessage({id:"notification.notificationDescEn"}),...f("speciality_name_en"),error:!!(l.speciality_name_en&&s.speciality_name_en)})]}),l.speciality_name_en&&s.speciality_name_en&&e.jsx(S,{error:!0,id:"helper-speciality_name_en",children:s==null?void 0:s.speciality_name_en})]}),e.jsxs(d,{item:!0,xs:12,sm:12,children:[e.jsxs(c,{spacing:1,children:[e.jsx(p,{htmlFor:"speciality-name-en",children:t.formatMessage({id:"notification.notificationDescAr"})}),e.jsx(M,{fullWidth:!0,multiline:!0,rows:2,id:"speciality-name-en",placeholder:t.formatMessage({id:"notification.notificationDescAr"}),...f("speciality_name_en"),error:!!(l.speciality_name_en&&s.speciality_name_en)})]}),l.speciality_name_en&&s.speciality_name_en&&e.jsx(S,{error:!0,id:"helper-speciality_name_en",children:s==null?void 0:s.speciality_name_en})]})]})})})}),e.jsx(k,{}),e.jsx($,{sx:{p:2.5},children:e.jsx(d,{container:!0,justifyContent:"right",alignItems:"center",children:e.jsx(d,{item:!0,children:e.jsxs(c,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(A,{color:"error",onClick:a,children:t.formatMessage({id:"common.cancel"})}),e.jsx(Z,{type:"submit",loading:I,loadingIndicator:t.formatMessage({id:"common.processing"}),variant:"contained",children:i?t.formatMessage({id:"notification.editNotification"}):t.formatMessage({id:"notification.addNotification"})})]})})})})]})})})})})}function Fe(i){return[{title:i.formatMessage({id:"sidebar.home"}),to:he},{title:i.formatMessage({id:"sidebar.notificationsCenter"})}]}function Re(){const{lang:i}=ee(),h=ie(),u=W(),a=v(),[t,_]=m.useState(!1),x=ne(u.breakpoints.down("sm")),[s,l]=m.useState(0),[F,I]=m.useState(null),f=m.useCallback(n=>{_(!0)},[h]),{filter:w,search:N,setSearch:E}=ge();m.useEffect(()=>{},[w]);const o=m.useMemo(()=>[{header:a.formatMessage({id:"common.title"}),accessorKey:"id",cell:({row:n})=>{var r;return(r=n.original)==null?void 0:r.id}},{header:a.formatMessage({id:"common.description"}),accessorKey:"name",enableSorting:!1,cell:({row:n})=>e.jsxs(c,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(te,{alt:"Avatar 1",size:"sm",src:n.original.photo}),e.jsx(O,{className:"typography-inline",value:n.original.name[i]})]})},{header:a.formatMessage({id:"notification.sentTo"}),accessorKey:"phone_number",cell:({row:n})=>e.jsx(O,{className:"typography-inline",value:ae(n.original.phone_number)})},{header:a.formatMessage({id:"notification.timeSent"}),accessorKey:"status",cell:n=>e.jsx(se,{status:n.getValue(),referenceKey:oe.PATIENTS_STATUS})},{header:a.formatMessage({id:"common.createdOn"}),accessorKey:"created_at",cell:({row:n})=>{var r;return L((r=n.original)==null?void 0:r.created_at).format(R)}},{header:a.formatMessage({id:"notification.lastSent"}),accessorKey:"created_at",cell:({row:n})=>{var r;return L((r=n.original)==null?void 0:r.created_at).format(R)}},{header:a.formatMessage({id:"common.actions"}),accessorKey:"Actions",meta:{className:"cell-center"},enableSorting:!1,cell:({row:n})=>{const[r,P]=m.useState(null),V=!!r,z=g=>{P(g.currentTarget)},D=()=>{P(null)};return e.jsxs(e.Fragment,{children:[e.jsx(re,{onClick:z,children:e.jsx(ce,{})}),e.jsxs(le,{anchorEl:r,open:V,onClose:D,onClick:D,children:[e.jsx(K,{onClick:g=>{g.stopPropagation(),f(n.original.id)},children:e.jsx(T,{variant:"body1",children:a.formatMessage({id:"patient.editProfile"})})}),e.jsx(K,{onClick:g=>{g.stopPropagation(),l(n.original.id)},children:e.jsx(T,{variant:"body1",children:a.formatMessage({id:"patient.deletePatient"})})})]})]})}}],[]);return e.jsxs(e.Fragment,{children:[e.jsx(de,{custom:!0,links:Fe(a)}),e.jsxs(c,{direction:"row",marginBottom:"20px",spacing:2,justifyContent:"space-between",alignItems:"center",children:[e.jsx(T,{variant:"h2",children:a.formatMessage({id:"sidebar.notificationsCenter"})}),e.jsx(A,{variant:"contained",startIcon:e.jsx(me,{}),onClick:()=>{_(!0)},children:a.formatMessage({id:"notification.addNotification"})})]}),e.jsx(ue,{data:{data:[],meta:{}},columns:o,isLoading:!1,setPagination:n=>{},setSortingParams:n=>{},children:e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...x&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(fe,{sx:{width:{xs:"70%",md:"70%"}},children:e.jsx(c,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(_e,{value:N,onFilterChange:n=>E(n),placeholder:a.formatMessage({id:"notification.searchPlaceholder"})})})}),e.jsx(c,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:e.jsx(c,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(A,{variant:"outlined",startIcon:e.jsx(Se,{}),children:a.formatMessage({id:"common.export"})})})})]})}),t&&e.jsx(ye,{open:t,handleClose:()=>{_(!1)},url:"",specialty:F})]})}export{Re as default};
