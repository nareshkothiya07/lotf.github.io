import{t as z,u as q,a as J,v as Q,r as a,c as y,j as e,S as o,i as W,T as u,R as X,x as I,y as Y,z as Z,M as $,E as ee,H as S,J as se,q as A,K as te,aL as ae,B as ne,bK as E,U as ie}from"./index-DSO9TgYq.js";import{d as re}from"./dayjs.min-pRfd56nx.js";import{D as oe}from"./DebouncedInput-DhmfX_1V.js";import{u as ce}from"./useStatusList-Dbp-x5Xm.js";import{u as le,d as de,a as ue}from"./service-packages-ClErv1Kx.js";import{u as me}from"./useFilterAndSearch-PJD0Zg8P.js";import{P as ge}from"./PackageAddModal-Cz_1MXOB.js";import{D as he}from"./DeleteConfirmation-BqFOMagf.js";import{C as k}from"./CustomTypography-CRnDvUFn.js";import{E as pe}from"./EditStatusDialog-BIVGlZRP.js";import{f as fe}from"./services-DCcxZZqT.js";import{P as xe}from"./PlusOutlined-BQvVSxI0.js";import{A as Se}from"./ArrowUpOutlined-C9GTlrEN.js";import"./CloseOutlined-DRBnXhIJ.js";import"./CameraOutlined-D4Mj0cXe.js";import"./services-BGkrpTaC.js";import"./ConfirmationDialog-DR_Ho8RD.js";import"./Dialog-CPoUMqzk.js";function je(m){return[{title:m.formatMessage({id:"sidebar.home"}),to:ie},{title:m.formatMessage({id:"services.intravenousVitamins.title"})}]}function Fe(){const{lang:m}=z(),{defaultList:P}=ce(I.PACKAGE_STATUS),{data:T,error:ve,isLoading:b,setSorting:_,setFilterCriteria:B,setPagination:w,url:c}=le(E.INTRAVENOUS_VITAMINS),t=q(),K=J(),N=Q(K.breakpoints.down("sm")),[j,x]=a.useState(!1),[i,g]=a.useState(null),[O,v]=a.useState(null),[h,p]=a.useState(0),[D,V]=a.useState(),{filter:M,search:F,setSearch:R}=me(),U=()=>{v(null),x(!0)},L=a.useCallback(async()=>{try{await de(h,c).then(s=>{y(t.formatMessage({id:"services.deletePackageSuccess"})),p(0)})}catch{p(0)}},[h,c,t]),G=a.useCallback(async s=>{try{ue(i==null?void 0:i.id,{status:s},c).then(n=>{y(t.formatMessage({id:"services.statusEditSuccess"})),g(null)})}catch{g(null)}},[i,c,t]);a.useEffect(()=>{B(M)},[M]);const H=a.useMemo(()=>[{header:t.formatMessage({id:"services.packageName"}),accessorKey:"name",enableSorting:!1,cell:({row:s})=>e.jsxs(o,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(W,{alt:"Avatar 1",size:"sm",src:s.original.image}),e.jsx(o,{spacing:0,children:e.jsx(u,{variant:"subtitle1",children:s.original.name[m]})})]})},{header:t.formatMessage({id:"services.medicalCenters"}),accessorKey:"medical_centers_count",cell:({row:s})=>e.jsx(k,{className:"typography-inline",value:s.original.hospitals_count})},{header:t.formatMessage({id:"common.visits"}),accessorKey:"visits_count",disableSortBy:!0,cell:({row:s})=>e.jsx(k,{className:"typography-inline",value:s.original.visits_count})},{header:t.formatMessage({id:"common.status"}),accessorKey:"status",cell:({row:s})=>e.jsx(X,{status:s.original.status,referenceKey:I.PACKAGE_STATUS})},{header:t.formatMessage({id:"common.createdOn"}),accessorKey:"created_at",cell:({row:s})=>{var n;return re((n=s.original)==null?void 0:n.created_at).format(Y)}},{header:t.formatMessage({id:"common.actions"}),accessorKey:"Actions",meta:{className:"cell-center"},enableSorting:!1,cell:({row:s})=>{const[n,l]=a.useState(null),f=!!n,d=r=>{l(r.currentTarget)},C=()=>{l(null)};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{onClick:d,children:e.jsx($,{})}),e.jsxs(ee,{anchorEl:n,open:f,onClose:C,onClick:C,children:[e.jsx(S,{onClick:r=>{r.stopPropagation(),x(!0),v(s.original)},children:e.jsx(u,{variant:"body1",children:t.formatMessage({id:"services.editPackageInfo"})})}),e.jsx(S,{onClick:r=>{r.stopPropagation(),g(s.original)},children:e.jsx(u,{variant:"body1",children:t.formatMessage({id:"common.editStatus"})})}),e.jsx(S,{onClick:r=>{r.stopPropagation(),p(s.original.id)},children:e.jsx(u,{variant:"body1",children:t.formatMessage({id:"services.deletePackage"})})})]})]})}}],[]);return a.useEffect(()=>{fe().then(s=>{var l,f;const n=(f=(l=s==null?void 0:s.data)==null?void 0:l.data)==null?void 0:f.find(d=>(d==null?void 0:d.slug)==="intravenous-vitamins");V(n==null?void 0:n.id)})},[]),e.jsxs(e.Fragment,{children:[e.jsx(se,{custom:!0,links:je(t)}),e.jsxs(o,{direction:"row",marginBottom:"20px",spacing:2,justifyContent:"space-between",alignItems:"center",children:[e.jsx(u,{variant:"h2",children:t.formatMessage({id:"services.intravenousVitamins.title"})}),e.jsx(A,{variant:"contained",startIcon:e.jsx(xe,{}),onClick:U,children:t.formatMessage({id:"services.intravenousVitamins.addServiceTitle"})})]}),e.jsx(te,{data:T,columns:H,isLoading:b,setPagination:s=>{w(s)},setSortingParams:s=>{_(s)},children:e.jsx(ae,{content:!1,children:e.jsxs(o,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...N&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(ne,{sx:{width:{xs:"70%",md:"70%"}},children:e.jsx(o,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(oe,{value:F,onFilterChange:s=>R(s),placeholder:t.formatMessage({id:"services.searchPackage"})})})}),e.jsx(o,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:e.jsx(o,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(A,{variant:"outlined",startIcon:e.jsx(Se,{}),children:t.formatMessage({id:"common.export"})})})})]})})}),j&&e.jsx(ge,{open:j,packageId:D,handleClose:()=>{x(!1)},url:c,subService:O,packageType:E.INTRAVENOUS_VITAMINS}),!!h&&e.jsx(he,{open:!!h,handleSubmit:L,handleClose:()=>{p(0)}}),i&&e.jsx(pe,{title:t.formatMessage({id:"medicalCenter.editTitle"}),open:!!i,statusList:P,status:i==null?void 0:i.status,handleSubmit:G,handleClose:()=>{g(null)}})]})}export{Fe as default};
